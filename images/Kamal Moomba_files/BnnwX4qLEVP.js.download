if (self.CavalryLogger) { CavalryLogger.start_js(["yvivR"]); }

__d("EventPlanTimeHelper",["DateConsts","EventReminderConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("EventReminderConstants").TimeErrorType;a={getTimeErrorType:function(a){a=new Date(a);var b=new Date(),c=new Date(new Date().setFullYear(new Date().getFullYear()+1));if(a<=b)return g.PAST_TIME;else if(a>=c)return g.AFTER_ONE_YEAR;else return g.NO_ERROR},getDefaultDateTime:function(a){if(a)return a*b("DateConsts").MS_PER_SEC;a=new Date();a.setHours(a.getHours()+1);a.setMinutes(0);return a.getTime()}};e.exports=a}),null);
__d("EventPlanUtils",["EventRemindersGating","EventReminderStateStore","MercuryIDs","ShortProfiles","getPageIDFromThreadID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isAllowedtoStartPlanWithRecipients:function(a){__p&&__p();if(b("getPageIDFromThreadID")(a))return!1;var c=b("MercuryIDs").getUserIDFromThreadID(a);if(c){c=b("ShortProfiles").getNow(c);if(!c||!c.is_friend)return!1}c=b("EventReminderStateStore").getEvent(a);return!(c&&c.exists)&&b("EventRemindersGating").isCreateAllowed}};e.exports=a}),null);
__d("LightweightEventDateTimePicker.react",["ix","cx","fbt","invariant","DatePickerRestraints","EventPlanTimeHelper","EventReminderConstants","Image.react","React","XUICalendar.react","XUIDateTimePicker.react","emptyFunction","fbglyph"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("EventReminderConstants").TimeErrorType;c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(a){k.constructor.call(this,a),this.$1=function(a){a=a.getTime();var c=b("EventPlanTimeHelper").getTimeErrorType(a);this.setState({dateTime:a,showTimeError:c});this.props.onDateTimeChange(a,c)}.bind(this),this.state={dateTime:this.props.initialDateTime,showTimeError:l.NO_ERROR}}a.prototype.render=function(){__p&&__p();var a=b("XUICalendar.react").normalizeDate(new Date());a=[b("DatePickerRestraints").enforceDateIsNoEarlierThan(a)];var c=void 0;switch(this.state.showTimeError){case l.PAST_TIME:c=i._("Event time must be in the future.");break;case l.AFTER_ONE_YEAR:c=i._("Select a date within one year from today.");break;case l.NO_ERROR:c=null;break;default:j(0)}return b("React").createElement("div",{className:"_lny"},b("React").createElement(b("XUIDateTimePicker.react"),{date:new Date(this.state.dateTime),dateIcon:b("React").createElement(b("Image.react"),{src:g("125721")}),dateRestraints:a,onChange:this.$1,xuiError:c}),b("React").createElement("span",{className:"_lo4","aria-label":i._("Clock icon")}))};a.defaultProps={onDateTimeChange:b("emptyFunction")};e.exports=a}),null);
__d("LightweightEventLocationTypeahead.react",["cx","fbt","AddressTypeahead.react","AddressTypeaheadCaller","AddressTypeaheadDisplayOrder","AddressTypeaheadIntegration","AddressTypeaheadProvider","AddressTypeaheadSearchSourceConfig","AddressTypeaheadType","React","XUIContextualDialog.react","XUITypeaheadView.react","emptyFunction"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=3,k="lightweight_events_creation";c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){"use strict";__p&&__p();i.constructor.call(this,a),this.$5=function(a){var b=this.$2(a),c=this.$3(a);a=this.$4(a);this.setState({queryString:c});this.props.onLocationSelect(b,c,a)}.bind(this),this.$6=function(event){var a="";event.target instanceof HTMLInputElement&&(a=event.target.value);this.setState({queryString:a});this.props.onLocationChange(a)}.bind(this),this.state={queryString:this.props.initialQueryString}}a.prototype.$2=function(a){"use strict";a=a.getAuxiliaryData();return a&&a.resultType&&a.resultType==="place"?a.locationID:""};a.prototype.$3=function(a){"use strict";var b=a.getAuxiliaryData();if(b)if(b.freeformEntry)return b.selectedTitle;else if(b.resultType==="street")return a.getSubtitle();return a.getTitle()};a.prototype.$4=function(a){"use strict";a=a.getAuxiliaryData();return a?a.full_address:""};a.prototype.$7=function(){"use strict";return new(b("AddressTypeaheadSearchSourceConfig"))(null,null,b("AddressTypeaheadProvider").HERE_THRIFT,b("AddressTypeaheadType").STREET_PLACE_TYPEAHEAD,b("AddressTypeaheadIntegration").STRING_MATCH,b("AddressTypeaheadDisplayOrder").INTERLEAVE,j,b("AddressTypeaheadCaller").LIGHTWEIGHT_EVENTS_CREATION)};a.prototype.focusInput=function(){"use strict";this.$1&&this.$1.focusInput()};a.prototype.componentDidMount=function(){"use strict";this.focusInput()};a.prototype.render=function(){"use strict";({});this.props.useDropDown==!1&&({layerComponent:b("XUIContextualDialog.react"),layerPosition:"left",useDialog:!0});return b("React").createElement(b("AddressTypeahead.react"),babelHelpers["extends"]({},this.props,{className:"_1t92",config:this.$7(),isFreeFormQueryAllowed:!0,queryString:this.state.queryString,onSelectAttempt:this.$5,onChange:this.$6,placeholder:h._("Choose a Location"),productTag:k,ref:function(a){return this.$1=a}.bind(this),layerComponent:this.props.layerComponent,layerPosition:this.props.layerPosition,useDialog:!0,viewRenderer:this.props.viewRenderer}))};a.defaultProps={initialQueryString:"",layerComponent:b("XUIContextualDialog.react"),layerPosition:"left",onLocationChange:b("emptyFunction"),onLocationSelect:b("emptyFunction"),useDropDown:!1,viewRenderer:b("XUITypeaheadView.react")};e.exports=a}),null);
__d("LightweightEventLocationRow.react",["cx","LightweightEventLocationTypeahead.react","React","ReactDOM","ShimButton.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=262;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=function(){if(this.props.disabled)return;this.setState({showTypeahead:!0})}.bind(this),this.$2=function(a,b,c){this.setState({locationName:b,locationAddress:c,showTypeahead:!1}),this.props.onLocationSelect(a,b,c)}.bind(this),this.state={locationName:this.props.initialLocationName,locationAddress:this.props.initialLocationAddress,showTypeahead:!this.props.initialLocationName}}a.prototype.render=function(){__p&&__p();var a=this.state,c=a.locationName,d=a.locationAddress;a=a.showTypeahead;var e=this.props,f=e.onLocationChange;e=e.useDropDown;if(!a)return b("React").createElement(b("ShimButton.react"),{className:"_16yp",onClick:this.$1},b("React").createElement("div",null,b("React").createElement("div",{className:"_16yq"},c),b("React").createElement("div",{className:"_16yr"},d)));a="left";d=b("ReactDOM").findDOMNode(this.refs.typeahead);d&&d instanceof Element&&d.getBoundingClientRect().left<i&&(a="right");return b("React").createElement(b("LightweightEventLocationTypeahead.react"),{initialQueryString:c,layerPosition:a,onLocationChange:f,onLocationSelect:this.$2,useDropDown:e,ref:"typeahead"})};a.defaultProps={disabled:!1,initialLocationName:"",initialLocationAddress:"",onLocationChange:b("emptyFunction"),onLocationSelect:b("emptyFunction"),useDropDown:!1};e.exports=a}),null);
__d("MessengerCommerceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppOrPagePerm=function(a){this.$1.app_or_page_perm=a;return this};a.prototype.setAttachmentIds=function(a){this.$1.attachment_ids=a;return this};a.prototype.setBatchSize=function(a){this.$1.batch_size=a;return this};a.prototype.setBrandAppID=function(a){this.$1.brand_app_id=a;return this};a.prototype.setBroadcastID=function(a){this.$1.broadcast_id=a;return this};a.prototype.setCallSite=function(a){this.$1.call_site=a;return this};a.prototype.setCellNum=function(a){this.$1.cell_num=a;return this};a.prototype.setCtaExtraData=function(a){this.$1.cta_extra_data=a;return this};a.prototype.setCtaExtraStats=function(a){this.$1.cta_extra_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCtaID=function(a){this.$1.cta_id=a;return this};a.prototype.setCtaKind=function(a){this.$1.cta_kind=a;return this};a.prototype.setCtaKindStats=function(a){this.$1.cta_kind_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCtaTypeStats=function(a){this.$1.cta_type_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCustomLabelID=function(a){this.$1.custom_label_id=a;return this};a.prototype.setDebugData=function(a){this.$1.debug_data=a;return this};a.prototype.setEntityID=function(a){this.$1.entity_id=a;return this};a.prototype.setErrorType=function(a){this.$1.error_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setException=function(a){this.$1.exception=a;return this};a.prototype.setFirstSeqID=function(a){this.$1.first_seq_id=a;return this};a.prototype.setHasImplicitSubscriptionPerm=function(a){this.$1.has_implicit_subscription_perm=a;return this};a.prototype.setHasSubscriptionPerm=function(a){this.$1.has_subscription_perm=a;return this};a.prototype.setIsProd=function(a){this.$1.is_prod=a;return this};a.prototype.setIsTestPayment=function(a){this.$1.is_test_payment=a;return this};a.prototype.setLastSeqID=function(a){this.$1.last_seq_id=a;return this};a.prototype.setLatency=function(a){this.$1.latency=a;return this};a.prototype.setMessageBody=function(a){this.$1.message_body=a;return this};a.prototype.setMessageClassification=function(a){this.$1.message_classification=a;return this};a.prototype.setMessageFolder=function(a){this.$1.message_folder=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessageTrigger=function(a){this.$1.message_trigger=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setNmorOrderType=function(a){this.$1.nmor_order_type=a;return this};a.prototype.setNumQuickReplies=function(a){this.$1.num_quick_replies=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPixelID=function(a){this.$1.pixel_id=a;return this};a.prototype.setPrometheusLag=function(a){this.$1.prometheus_lag=a;return this};a.prototype.setQuickReplyContentTypeStats=function(a){this.$1.quick_reply_content_type_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setRating=function(a){this.$1.rating=a;return this};a.prototype.setRecipientID=function(a){this.$1.recipient_id=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setSubscriptionID=function(a){this.$1.subscription_id=a;return this};a.prototype.setSyncToken=function(a){this.$1.sync_token=a;return this};a.prototype.setTargetSpecID=function(a){this.$1.target_spec_id=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setTotalRatingSum=function(a){this.$1.total_rating_sum=a;return this};a.prototype.setTotalReviewCount=function(a){this.$1.total_review_count=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};a.prototype.setUserPhoneNumber=function(a){this.$1.user_phone_number=a;return this};a.prototype.setUserPsid=function(a){this.$1.user_psid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWaterfallLogID=function(a){this.$1.waterfall_log_id=a;return this};a.prototype.setWebhookURL=function(a){this.$1.webhook_url=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={app_or_page_perm:!0,attachment_ids:!0,batch_size:!0,brand_app_id:!0,broadcast_id:!0,call_site:!0,cell_num:!0,cta_extra_data:!0,cta_extra_stats:!0,cta_id:!0,cta_kind:!0,cta_kind_stats:!0,cta_type_stats:!0,custom_label_id:!0,debug_data:!0,entity_id:!0,error_type:!0,event:!0,exception:!0,first_seq_id:!0,has_implicit_subscription_perm:!0,has_subscription_perm:!0,is_prod:!0,is_test_payment:!0,last_seq_id:!0,latency:!0,message_body:!0,message_classification:!0,message_folder:!0,message_id:!0,message_trigger:!0,message_type:!0,nmor_order_type:!0,num_quick_replies:!0,page_id:!0,pixel_id:!0,prometheus_lag:!0,quick_reply_content_type_stats:!0,rating:!0,recipient_id:!0,sender_id:!0,subscription_id:!0,sync_token:!0,target_spec_id:!0,thread_id:!0,total_rating_sum:!0,total_review_count:!0,user_fbid:!0,user_phone_number:!0,user_psid:!0,vc:!0,waterfall_log_id:!0,webhook_url:!0};e.exports=a}),null);
__d("ChangeChatTabColorDialogBody.react",["ix","cssVar","cx","fbt","Grid.react","Image.react","MessengerCustomThreadColorButtonReact.bs","MessagingThreadCustomizationConfig","MessagingThreadCustomizationSource","MessengerThreadThemesWebGraphQLQuery","React","MercuryThreadActions","WebGraphQL","convertMIGColorToFIGColor","fbglyph","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("Grid.react").GridItem,m=b("MessengerCustomThreadColorButtonReact.bs").jsComponent,n=b("MercuryThreadActions").get(),o="196241301102133",p="Unknown Color";function q(a){return"#"+a.slice(2).toLowerCase()}c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state={themes:[]},b}a.prototype.componentDidMount=function(){var a=b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")?"M4_VERSION0":"LEGACY";b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadThemesWebGraphQLQuery"))({version:a})),function(a){this.setState({themes:a.messenger_thread_themes.slice()})}.bind(this))};a.prototype.renderThemeChoice=function(a){__p&&__p();var c=this.props.onChoose,d=this.state.themes;if(!d||!d.length)return null;var e=a.theme_id||o;return b("React").createElement("div",{className:"_gs3 _430z"},b("React").createElement("div",{className:"_28he"},j._("Everyone in this conversation will see this.")),b("React").createElement(b("Grid.react"),{cols:5,className:"_gs4"},d.map(function(d){var f=q(d.fallback_color);return b("React").createElement(l,{key:d.id,className:"_gs0"},b("React").createElement("div",null,d.id===e?b("React").createElement(b("Image.react"),{className:"_gs2",src:g("114570")}):null,b("React").createElement(m,{colorChoice:b("convertMIGColorToFIGColor")(f)||f,colorName:d.accessibility_label||p,isSelected:d.id===e,onChoose:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){n.changeThreadTheme(a.thread_id,d.id,"SETTINGS"),typeof c==="function"&&c()})})))})))};a.prototype.renderColorChoice=function(a){var c=this.props.onChoose,d=a&&a.solid_color?a.solid_color:"#0084ff",e=["#0084ff"].concat(b("MessagingThreadCustomizationConfig").colorChoices),f=b("MessagingThreadCustomizationConfig").colorNames,h=b("React").createElement("div",{className:"_28he"},j._("Everyone in this conversation will see this."));return b("React").createElement("div",{className:"_gs3 _430z"},!this.props.hideSubtitle&&h,b("React").createElement(b("Grid.react"),{cols:5,className:"_gs4 _1z4w"},e.map(function(e){return b("React").createElement(l,{key:e,className:"_gs0 _1z4x"},b("React").createElement("div",null,e.toLowerCase()==d.toLowerCase()?b("React").createElement(b("Image.react"),{className:"_gs2",src:g("114570")}):null,b("React").createElement(m,{colorChoice:b("convertMIGColorToFIGColor")(e)||e,colorName:f[e]||p,isSelected:e===d,onChoose:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){r(c,a.thread_id,e,d)})})))})))};a.prototype.render=function(){if(b("gkx")("AT7TN3zHmYL49F0AvBOAA1uBQTR39Xno5tAJLNsZhlz_xhvcIQxda5cW7tBbM-Edt1n2mM9GSYi3GuBA4bwHsSOR"))return this.renderThemeChoice(this.props.thread);else return this.renderColorChoice(this.props.thread)};function r(a,c,d,e){d!=e&&(n.changeThreadColor(c,d,b("MessagingThreadCustomizationSource").SETTINGS),typeof a==="function"&&a())}e.exports=a}),null);
__d("ChangeChatTabColorDialog",["fbt","ChangeChatTabColorDialogBody.react","React","SimpleXUIDialog","XUIDialogCancelButton.react"],(function(a,b,c,d,e,f,g){"use strict";a={show:function(a,c){var d=355,e=null,f=g._("Pick a color for this conversation");a=b("React").createElement(b("ChangeChatTabColorDialogBody.react"),{thread:a,onChoose:h});h=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null));e=b("SimpleXUIDialog").showEx(a,f,h,null,{width:d,causalElement:c});function h(){e&&e.hide()}}};e.exports=a}),null);
__d("LightweightEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EVENT:"EVENT",CALL:"CALL",DIRECT_M:"DIRECT_M",M_REMINDER:"M_REMINDER"})}),null);
__d("XCreateEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/create/",{acontext:{type:"String",required:!0},event_type:{type:"Enum",required:!0,enumType:1},event_time:{type:"Int"},thread_id:{type:"Int",required:!0},title:{type:"String"},location_id:{type:"String"},location_name:{type:"String"},related_event_id:{type:"Int"}})}),null);
__d("ChatStartPlanDialogHelper",["cx","fbt","AsyncRequest","DateConsts","DialogX","EventPlanTimeHelper","EventReminderConstants","EventRemindersGating","EventsActionsLogger","FBJSON","LightweightEventDateTimePicker.react","LightweightEventLocationRow.react","LightweightEventType","MercuryIDs","React","SimpleXUIDialog","XCreateEventReminderController","XUIButton.react","XUITextInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("EventReminderConstants").TimeErrorType;function a(){this.$9=function(a,b){this.$1=a,this.$6=b}.bind(this),this.$11=function(a){this.$3="",this.$4=a,this.$5=""}.bind(this),this.$12=function(a,b,c){this.$3=a,this.$4=b,this.$5=c}.bind(this)}a.prototype.showDialog=function(a){this.$7();var c=null,d=this.$8(),e=b("React").createElement("div",null,b("React").createElement(b("LightweightEventDateTimePicker.react"),{initialDateTime:this.$1,onDateTimeChange:this.$9}),b("React").createElement("hr",null),b("React").createElement(b("XUITextInput.react"),{className:"_2l1n","aria-label":h._("Event Name"),placeholder:h._("Name"),onChange:function(event){return this.$10(event)}.bind(this)}),b("React").createElement("hr",null),b("React").createElement(b("LightweightEventLocationRow.react"),{onLocationChange:this.$11,onLocationSelect:this.$12,useDropDown:!0})),f=b("React").createElement(b("XUIButton.react"),{label:this.$13(),use:"confirm",onClick:function(){return this.$14(c,a)}.bind(this)});c=b("SimpleXUIDialog").showEx(e,d,f,null)};a.prototype.$7=function(){this.$1=b("EventPlanTimeHelper").getDefaultDateTime(),this.$2="",this.$3="",this.$4="",this.$5="",this.$6=i.NO_ERROR};a.prototype.$10=function(event){this.$2=event.target.value};a.prototype.$14=function(a,c){if(this.$6!==i.NO_ERROR)return;c=b("MercuryIDs").getThreadFBIDFromThreadID(c);var d={action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.MESSENGER_THREAD_SETTINGS}]};d=b("XCreateEventReminderController").getURIBuilder().setString("acontext",b("FBJSON").stringify(d)).setEnum("event_type",b("LightweightEventType").EVENT).setInt("event_time",Math.floor(this.$1/b("DateConsts").MS_PER_SEC)).setInt("thread_id",c).setString("title",this.$2).setString("location_id",this.$3).setString("location_name",this.$4);new(b("AsyncRequest"))(d.getURI()).setHandler(function(b){b.payload&&a&&a.hide()}).send()};a.prototype.$8=function(){return b("EventRemindersGating").shouldUseNewName?h._("Plan"):h._("Event Reminder")};a.prototype.$13=function(){return b("EventRemindersGating").shouldUseNewName?h._("Start Plan"):h._("Create")};e.exports=new a()}),null);
__d("EditChatTabNicknameDialog",["cx","fbt","MercuryIDs","MessagingThreadCustomizationConfig","MessagingThreadCustomizationSource","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerTextWithEmojiInput.react","MercuryThreadActions","React","SimpleXUIDialog"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=400;a={show:function(a,c,d,e,f){var g=null,i=b("MercuryIDs").getUserIDFromParticipantID(c.id);i=i===e?h._("Edit Your Nickname"):h._("Edit Nickname for {personName}",[h._param("personName",c.name)]);e=b("React").createElement("div",{className:"_2c1u"},b("React").createElement(b("MessengerDialogHeader.react"),null,i));i=b("React").createElement("div",{className:"_2c1u"},b("React").createElement("div",{className:"_21g-"},b("React").createElement("div",{className:"_-bo"},h._("Everyone in this conversation will see this.")),b("React").createElement(b("MessengerTextWithEmojiInput.react"),{className:"_2c1v",initialValue:d,onReturn:function(){return this._handleSave(g,a,c,d)}.bind(this),maxLength:b("MessagingThreadCustomizationConfig").maxNicknameLength,placeholder:c.name})));var k=b("React").createElement("div",{className:"_2c1u"},b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Save"),onClick:function(){return this._handleSave(g,a,c,d)}.bind(this),type:"primary"})));g=b("SimpleXUIDialog").showEx(i,e,k,null,{NICKNAME_DIALOG_WIDTH:j,causalElement:f})},_handleSave:function(a,c,d,e){if(!a)return;var f=a._reactContainer.querySelector("[data-text]").textContent;f!==e&&i.changeThreadNicknames(c,b("MercuryIDs").getUserIDFromParticipantID(d.id),f,b("MessagingThreadCustomizationSource").SETTINGS);a.hide()}};e.exports=a}),null);
__d("EditChatTabNicknamesDialog",["cx","fbt","EditChatTabNicknameDialog","immutable","ImmutableObject","MercuryIDs","MessengerAdminGroupUtils","MessengerContactList.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerParticipants.bs","MessengerScrollableArea.react","React","SimpleXUIDialog","XUIDialogCancelButton.react","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=200,j=350;a={show:function(a,c,d){__p&&__p();var e=null,f=b("immutable").Map().withMutations(function(d){if(!a)return;a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))});a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))}),g=b("MessengerAdminGroupUtils").isJoinableThread(a);f=f.filter(function(a){if(!a)return!1;a=b("MercuryIDs").getUserIDFromParticipantID(a.id);return g&&a===c||!g}).toArray();var k=b("React").createElement("div",{className:"_4h9n"},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Edit Nicknames"))));f=b("React").createElement("div",{className:"_4h9n"},b("React").createElement("div",{className:"_4h9o"},b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%"},b("React").createElement(b("MessengerContactList.react"),{contactAdapter:function(b){return this._fromMercuryParticipant(b,a)}.bind(this),disableRole:!0,listSections:b("immutable").OrderedMap([[null,f]]),onSelect:function(b){e&&e.hide(),setTimeout(function(){return this._handleContactSelect(b,a,c)}.bind(this),i)}.bind(this),rowClassName:"_44kr",viewer:c,thread:a}))));var l=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null));e=b("SimpleXUIDialog").showEx(f,k,l,null,{NICKNAME_DIALOG_WIDTH:j,causalElement:d})},_handleContactSelect:function(a,c,d){var e,f=b("MercuryIDs").getUserIDFromParticipantID(a.id);f=((e=c)!=null?(e=e.custom_nickname)!=null?e[f]:e:e)||"";e=c.thread_id;b("EditChatTabNicknameDialog").show(e,a,f,d,this.linkRef)},_fromMercuryParticipant:function(a,c){var d=b("MercuryIDs").getUserIDFromParticipantID(a.id),e=a.name,f="";c.custom_nickname&&c.custom_nickname[d]&&(e=c.custom_nickname[d],f=a.name);return new(b("ImmutableObject"))({alias:a.alias,uid:a.id,photo:a.image_src,title:e,subtitle:f,type:a.type,isMessengerUser:a.is_messenger_user,href:a.href})}};e.exports=a}),null);
__d("WebMessengerDeleteSyncedGroupDialog",["fbt","React","SimpleXUIDialog","XUIDialogButton.react","XUIDialogCancelButton.react"],(function(a,b,c,d,e,f,g){"use strict";a={show:function(a,c){var d=g._("Delete Facebook Group?"),e=g._("Turning off your Facebook group will delete the group for all members and can't be undone."),f=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("Delete"),use:"confirm",onClick:function(){a&&a()}}));b("SimpleXUIDialog").showEx(e,d,f,c)}};e.exports=a}),null);
__d("WebMessengerDeleteThreadDialog",["fbt","React","SimpleXUIDialog","MercuryThreadActions","XUIDialogButton.react","XUIDialogCancelButton.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MercuryThreadActions").get();a={show:function(a,c,d,e){var f=g._("Delete This Entire Conversation?"),i=g._("Once you delete your copy of this conversation, it cannot be undone."),j=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("Delete Conversation"),use:"confirm",onClick:function(){h["delete"](a),c&&c()}}));b("SimpleXUIDialog").showEx(i,f,j,d,{causalElement:e})}};e.exports=a}),null);
__d("ChatDialogConfirmationButtons.react",["fbt","React","XUIButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={confirmActionIndex:null},this.$1=function(a){a=this.props.buttons;var b=this.state.confirmActionIndex;if(!!b||b===0){this.setState({confirmActionIndex:null});a=a[b];a&&a.onClick()}}.bind(this),this.$2=function(){this.setState({confirmActionIndex:null})}.bind(this),b}a.prototype.render=function(){__p&&__p();var a=this.props.buttons,c=this.state.confirmActionIndex,d=g._("Are you sure?"),e=g._("Cancel");if(!!c||c===0)return b("React").createElement("span",null,b("React").createElement(b("XUIButton.react"),{key:"confim",label:d,onClick:this.$1,use:"confirm"},d),b("React").createElement(b("XUIButton.react"),{key:"cancel",label:e,onClick:this.$2},e));else return a.map(function(a,c){var d=a.label,e=a.onClick;a=a.requiresConfirmation;if(a)return b("React").createElement(b("XUIButton.react"),{key:"button-requiresConfirmation-"+c,label:d,onClick:function(){this.$3(c)}.bind(this)},d);else return b("React").createElement(b("XUIButton.react"),{key:"button-"+c,label:d,onClick:e},d)}.bind(this))};a.prototype.$3=function(a){this.setState({confirmActionIndex:a})};e.exports=a}),null);
__d("ChatGroupMembershipAdminTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","CurrentUser","FacepileRounded.react","MercuryIDs","MercuryThreadActions","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=50;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.admins,c=h._("Remove as Admin"),d=!!a.find(function(a){return a.id===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())});a=a.reduce(function(a,e){var f="",g=e.id;f=b("React").createElement("li",{className:"_2ll0 _2pi3",key:g},b("React").createElement("div",{className:"_3-8s"},b("React").createElement(b("FacepileRounded.react"),{imageSize:k,profiles:[{image_src:e.image_src,name:e.name}]})),b("React").createElement(b("ChatDetailStack.react"),{bottomDetail:f,topDetail:e.name}),d?b("React").createElement("div",null,b("React").createElement(b("ChatDialogConfirmationButtons.react"),{buttons:[{label:c,onClick:function(){this.$1(g)}.bind(this),requiresConfirmation:!0}]})):null);g===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())?a.unshift(f):a.push(f);return a}.bind(this),[]);return b("React").createElement("ul",null,a)};a.prototype.$1=function(a){j.changeGroupAdmins(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),[b("MercuryIDs").getUserIDFromParticipantID(a)],!1)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("ChatGroupMembershipMembersTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","CurrentUser","FacepileRounded.react","MercuryIDs","MercuryThreadActions","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=50;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$2=function(){j.leaveGroup(this.props.threadID)}.bind(this),b}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.admins;a=a.participants;var d=h._("Remove"),e=h._("Make Admin"),f=h._("Leave Group"),g=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID()),i=!!c.find(function(a){return a.id===g}),j=c.length===0;a=a.reduce(function(a,l){__p&&__p();var m=l.id,n=c.includes(l),o=l.id===g,p=n?h._("Admin"):null,q=[];n=i&&!n;var r=o&&j;(n||r)&&q.push({label:e,onClick:function(){this.$1(m)}.bind(this),requiresConfirmation:!0});o?q.push({label:f,onClick:this.$2,requiresConfirmation:!0}):i&&q.push({label:d,onClick:function(){this.$3(m)}.bind(this),requiresConfirmation:!0});n=b("React").createElement("li",{className:"_33zx _2pi3",key:m},b("React").createElement("div",{className:"_3-8s"},b("React").createElement(b("FacepileRounded.react"),{imageSize:k,profiles:[{image_src:l.image_src,name:l.name}]})),b("React").createElement(b("ChatDetailStack.react"),{bottomDetail:p,topDetail:l.name}),b("React").createElement("div",null,b("React").createElement(b("ChatDialogConfirmationButtons.react"),{buttons:q})));m===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())?a.unshift(n):a.push(n);return a}.bind(this),[]);return b("React").createElement("ul",null,a)};a.prototype.$3=function(a){j.removeFromGroup(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),b("MercuryIDs").getUserIDFromParticipantID(a))};a.prototype.$1=function(a){j.changeGroupAdmins(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),[b("MercuryIDs").getUserIDFromParticipantID(a)],!0)};e.exports=a}),null);
__d("ChatGroupMembershipRequestSetting.react",["cx","fbt","ChatDialogConfirmationButtons.react","MercuryThreadActions","MessengerApprovalModeTypes","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get();c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=this.props.thread,c=a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS;j.setApprovalMode(c?b("MessengerApprovalModeTypes").OPEN:b("MessengerApprovalModeTypes").APPROVALS,a)}.bind(this),c}a.prototype.render=function(){var a=this.props.thread;a=a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS;var c=a?h._("Admin Approval: ON"):h._("Admin Approval: OFF");a=a?h._("Turn off"):h._("Turn on");return b("React").createElement("div",{className:"_32ly",key:"requestSettings"},b("React").createElement("div",{className:"_32lz"},c,b("React").createElement(b("ChatDialogConfirmationButtons.react"),{buttons:[{label:a,onClick:this.$1,requiresConfirmation:!0}]})),b("React").createElement("div",{className:"_32l- _2pi2"},h._("Admins can approve new people that are added by non-admins or people that are invited to join the group.")))};e.exports=a}),null);
__d("ChatGroupMembershipRequestTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","ChatGroupMembershipRequestSetting.react","CurrentUser","FacepileRounded.react","immutable","MercuryIDs","MessengerApprovalModeTypes","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","React","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=50;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.membershipParticipants,d=a.thread,e=a.threadID;a=d&&d.approval_mode===b("MessengerApprovalModeTypes").APPROVALS;var f=d?d.group_approval_queue:[];a=a&&f&&f.length&&c?f.reduce(function(a,d){__p&&__p();var f=d.inviter,g=d.requester;d=c.find(function(a){return a.fbid===f.id});var i=c.find(function(a){return a.fbid===g.id});if(!i)return a;var k=[{label:h._("Approve"),onClick:function(){this.$1(e,g.id)}.bind(this),requiresConfirmation:!0},{label:h._("Ignore"),onClick:function(){this.$2(e,g.id)}.bind(this),requiresConfirmation:!0}];d=d?h._("Invited by {inviter name}",[h._param("inviter name",d.name)]):null;a.push(b("React").createElement("li",{className:"_4y_j _2pi3",key:g.id},b("React").createElement("div",{className:"_3-8s"},b("React").createElement(b("FacepileRounded.react"),{imageSize:j,profiles:[{image_src:i.image_src,name:i.name}]})),b("React").createElement(b("ChatDetailStack.react"),{bottomDetail:d,topDetail:i.name}),b("React").createElement("div",null,b("React").createElement(b("ChatDialogConfirmationButtons.react"),{buttons:k}))));return a}.bind(this),[]):null;f=d?b("React").createElement(b("ChatGroupMembershipRequestSetting.react"),{key:"requestSettings",thread:d}):null;return[f,b("React").createElement("ul",{key:"requestSection"},a)]};a.prototype.$1=function(a,c){b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:b("MercuryIDs").getThreadFBIDFromThreadID(a),user_ids:[c],response:"ACCEPT",surface:"WEB_ADMIN_MODEL_APPROVAL_CENTER"}}))};a.prototype.$2=function(a,c){b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:b("MercuryIDs").getThreadFBIDFromThreadID(a),user_ids:[c],response:"DENY",surface:"WEB_ADMIN_MODEL_APPROVAL_CENTER"}}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("ChatGroupMembershipDialog.react",["ChatGroupMembershipAdminTab.react","ChatGroupMembershipMembersTab.react","ChatGroupMembershipRequestTab.react","CurrentUser","immutable","LayerFadeOnHide","MercuryIDs","React","XUIDialog.react","XUIDialogBody.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={selectedTab:"chatGroupMembershipMembers"},this.$1=function(a){this.setState({selectedTab:a})}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.thread,d=a.threadID,e=a.participants;a=a.membershipParticipants;var f=c&&c.admin_ids||[],g=f.length>0,h=e.filter(function(a){return f.indexOf(b("MercuryIDs").getUserIDFromParticipantID(a.id))>-1||f.indexOf(a.id)>-1}),i=!!h.find(function(a){return a.id===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())}),j=g?i?this.$2():this.$3():this.$4(),k=b("React").createElement(b("ChatGroupMembershipMembersTab.react"),{admins:h,participants:e,threadID:d});this.state.selectedTab==="chatGroupMembershipAdmins"&&g?k=b("React").createElement(b("ChatGroupMembershipAdminTab.react"),{admins:h,threadID:d}):this.state.selectedTab==="chatGroupMembershipRequests"&&i&&(k=b("React").createElement(b("ChatGroupMembershipRequestTab.react"),{membershipParticipants:a,participants:e,thread:c,threadID:d}));return b("React").createElement(b("XUIDialog.react"),{shown:this.props.dialogShown,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onHide:this.props.onHide,isStrictlyControlled:!0,label:"Membership",width:445},j,b("React").createElement(b("XUIDialogBody.react"),null,k))};a.prototype.$3=function(){return b("React").createElement(b("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$1},b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},b("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")),b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipAdmins"},b("React").createElement("span",{id:"chatGroupMembershipAdmins"},"Admins")))};a.prototype.$4=function(){return b("React").createElement(b("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$1},b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},b("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")))};a.prototype.$2=function(){return b("React").createElement(b("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$1},b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},b("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")),b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipAdmins"},b("React").createElement("span",{id:"chatGroupMembershipAdmins"},"Admins")),b("React").createElement(b("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipRequests"},b("React").createElement("span",{id:"chatGroupMembershipRequests"},"Membership Requests")))};e.exports=a}),null);
__d("CustomizeThreadDialogGated.react",["CustomizeThreadDialog","React"],(function(a,b,c,d,e,f){"use strict";var g,h=b("CustomizeThreadDialog").Dialog;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return!h?null:b("React").createElement(h,this.props)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceReviewDialogTextArea.react",["cx","AbstractTextArea.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("joinClasses")(this.props.className,"_3g_j");return b("React").createElement(b("AbstractTextArea.react"),babelHelpers["extends"]({},this.props,{className:a}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceReviewDialog.react",["cx","fbt","MessengerEnvironment","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceReviewDialogTextArea.react","React","StarsInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a,b){i.constructor.call(this,a,b),j.call(this),this.state=this.$1()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};a.prototype.render=function(){var a=this.props.merchantName||"",c=this.state.rating>0,d=this.props.review||"",e=this.state.review||"";e=this.state.rating!==this.props.rating||e.length!==d.length||e!==d;d=h._("Write a review for {label for merchant name}",[h._param("label for merchant name",a)]);a=h._("Cancel");var f=h._("Send"),g=h._("Reivew options couldn't be shown.");return b("React").createElement(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:g,onToggle:this.props.onToggle,shown:this.props.shown},this.props),b("React").createElement(b("MNCommerceDialogTitle.react"),{showCloseButton:!0},d),b("React").createElement(b("MNCommerceDialogBody.react"),null,this.$2()),b("React").createElement(b("MNCommerceDialogFooter.react"),null,b("React").createElement(b("MNCommerceButton.react"),{label:a,onClick:this.props.onCancelButtonClick,use:"default"}),b("React").createElement(b("MNCommerceButton.react"),{label:f,onClick:this.$3,disabled:!c||!e,use:"confirm"})))};a.prototype.$2=function(){var a=b("MessengerEnvironment").messengerui,c=this.state.rating||0,d=this.state.review||"",e=(a?"_159y":"")+(a?"":" _159z");a=(a?"_15a3":"")+" _15a4";return b("React").createElement("div",null,b("React").createElement("div",{className:a}," Rate your experience"),b("React").createElement(b("StarsInput.react"),{allowMultipleSubmissions:!0,large:!0,onClick:this.onStarsChangeClick,count:c}),b("React").createElement(b("MNCommerceReviewDialogTextArea.react"),{className:e,defaultValue:d,onChange:this.onReviewChange,placeholder:"Write a review..."}))};a.propTypes={error:c.object,loading:c.bool.isRequired,rating:c.number,review:c.string,merchantName:c.string,onCancelButtonClick:c.func,onConfirmButtonClick:c.func.isRequired,pageId:c.string};var j=function(){__p&&__p();this.onStarsChangeClick=function(a){var b=this.state.review;this.onTypeChange(a,b)}.bind(this),this.onReviewChange=function(a){var b=this.state.rating;this.onTypeChange(b,a.target.value)}.bind(this),this.$1=function(a){a=a||this.props;var b=a.rating;a=a.review;return{rating:b,review:a}}.bind(this),this.onTypeChange=function(a,b){this.setState({rating:a,review:b})}.bind(this),this.$3=function(a){a=this.props;a.onToggle(!1);if(!a.onConfirmButtonClick)return;var b=a.pageId;a.onConfirmButtonClick(b,this.state.rating,this.state.review)}.bind(this)};e.exports=a}),null);
__d("MessengerPlatformBotReviewActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={stateLoaded:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").BOT_REVIEW_STATE.LOADED,state:a})},stateLoadError:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").BOT_REVIEW_STATE.LOAD_ERROR,pageID:a})},stateReload:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").BOT_REVIEW_STATE.RELOAD,pageID:a})}};e.exports=a}),null);
__d("XMessengerPlatformBotReviewReadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/bot_review/read/",{page_id:{type:"FBID",required:!0}})}),null);
__d("MessengerPlatformBotReviewReadDataManager",["AsyncRequest","MessengerPlatformBotReviewActions","XMessengerPlatformBotReviewReadController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.fetchReviewState=function(a){a=b("XMessengerPlatformBotReviewReadController").getURIBuilder().setFBID("page_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};a.prototype.$1=function(a){var c=a.getRequest().uri.getQueryData();c=c.page_id;a&&(a.payload.pageID=c);b("MessengerPlatformBotReviewActions").stateLoaded(a.payload)};a.prototype.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MessengerPlatformBotReviewActions").stateLoadError(a)};function a(){}e.exports=new a()}),null);
__d("MessengerPlatformBotReviewStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MessengerPlatformBotReviewReadDataManager","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MessengerPlatformBotReviewStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type,d=a.pageID||a.state&&a.state.pageID;switch(c){case b("MNCommerceActionTypes").BOT_REVIEW_STATE.LOADED:c=a.state;this.$MessengerPlatformBotReviewStore1.set(d,b("LoadObject").empty().setValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").BOT_REVIEW_STATE.LOAD_ERROR:this.$MessengerPlatformBotReviewStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load permissions for: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").BOT_REVIEW_STATE.RELOAD:d&&(this.$MessengerPlatformBotReviewStore1.set(d,b("LoadObject").loading()),b("MessengerPlatformBotReviewReadDataManager").fetchReviewState(d));this.__emitChange();break}};a.prototype.getReviewState=function(a){a&&!this.$MessengerPlatformBotReviewStore1.has(a)&&(this.$MessengerPlatformBotReviewStore1.set(a,b("LoadObject").loading().setValue({pageID:a})),b("MessengerPlatformBotReviewReadDataManager").fetchReviewState(a));return this.$MessengerPlatformBotReviewStore1.get(a)||b("LoadObject").empty()};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommerceReviewDialogContainer.react",["MessengerPlatformBotReviewStore","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceReviewDialog.react","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").createClass({displayName:"MNCommerceReviewDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MessengerPlatformBotReviewStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null;a&&(c=a.pageID);var d=b("MessengerPlatformBotReviewStore").getReviewState(c);return{shown:!!a,loading:d.isLoading(),onConfirmButtonClick:a&&a.onConfirmButtonClick,pageID:c,reviewState:d.getValue(),error:d.getError()}}},render:function(){var a=this.state.reviewState;return b("React").createElement(b("MNCommerceReviewDialog.react"),{error:this.state.error,loading:this.state.loading,shown:this.state.shown,rating:a.rating,review:a.review,merchantName:a&&a.name,onCancelButtonClick:this._hideDialog,onConfirmButtonClick:this.state.onConfirmButtonClick,onToggle:this._onToggle,pageId:this.state.pageID})},_onToggle:function(a){a||this._hideDialog()},_hideDialog:function(){b("MNCommerceDialogStateActions").hideDialog()}});e.exports=a}),null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={showMuteChangeDialog:function(a,c,d){b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/mercury/mute_thread_dialog.php").setRelativeTo(c),function(c){c.subscribe("confirm",function(){this.hide();var c=void 0;b("DOM").scry(this.getRoot(),'input[type="radio"]').forEach(function(a){a.checked&&(c=a.value)});c=g.convertRawMuteSetting(c);d(a,c)}.bind(c))})},convertRawMuteSetting:function(a){switch(a){case"always":return-1;case"30minutes":return 1800;case"1hour":return 3600;case"8hours":return 8*3600;case"24hours":return 24*3600;default:return 0}}};e.exports=g}),null);
__d("MNCommerceBotsReviewResponseDialog.react",["fbt","MessengerEnvironment","MNCommerceAttachmentConstants","React","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui?b("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:b("MNCommerceAttachmentConstants").DIALOG.WIDTH,c=this.props.success?g._("Thanks for your review!"):g._("Something went wrong"),d=this.props.success?g._("Your review has been successfully submitted."):g._("Please try again");return b("React").createElement(b("XUIDialog.react"),babelHelpers["extends"]({autohide:2e3,width:a},this.props),b("React").createElement(b("XUIDialogTitle.react"),null,c),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",null,d)))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceBotsReviewConfirmationDialogContainer.react",["MNCommerceBotsReviewResponseDialog.react","MNCommerceDialogStateActions","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a||this.$2()}.bind(this),this.$2=function(){b("MNCommerceDialogStateActions").hideDialog()},c}a.prototype.render=function(){return b("React").createElement(b("MNCommerceBotsReviewResponseDialog.react"),{success:!0,shown:!0,onToggle:this.$1})};e.exports=a}),null);
__d("MNCommerceBotsReviewErrorDialogContainer.react",["MNCommerceBotsReviewResponseDialog.react","MNCommerceDialogStateActions","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a||this.$2()}.bind(this),this.$2=function(){b("MNCommerceDialogStateActions").hideDialog()},c}a.prototype.render=function(){return b("React").createElement(b("MNCommerceBotsReviewResponseDialog.react"),{success:!1,shown:!0,onToggle:this.$1})};e.exports=a}),null);
__d("XMessengerPlatformBotReviewWriteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/bot_review/write/",{page_id:{type:"FBID",required:!0},rating:{type:"Int",required:!0},review:{type:"String"}})}),null);
__d("MessengerPlatformBotReviewWriteDataManager",["AsyncRequest","MessengerPlatformBotReviewActions","MNCommerceBotsReviewConfirmationDialogContainer.react","MNCommerceBotsReviewErrorDialogContainer.react","MNCommerceDialogStateActions","XMessengerPlatformBotReviewWriteController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.review=function(a,c,d){a=b("XMessengerPlatformBotReviewWriteController").getURIBuilder().setFBID("page_id",a).setInt("rating",c).setString("review",d).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};a.prototype.$1=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MessengerPlatformBotReviewActions").stateReload(a);b("MNCommerceDialogStateActions").showDialog(b("MNCommerceBotsReviewConfirmationDialogContainer.react"),{})};a.prototype.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MessengerPlatformBotReviewActions").stateLoadError(a);b("MNCommerceDialogStateActions").showDialog(b("MNCommerceBotsReviewErrorDialogContainer.react"),{})};function a(){}e.exports=new a()}),null);
__d("XMessagingGroupOptionsDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/dialog/group_options/",{thread_fbid:{type:"String",required:!0},__asyncDialog:{type:"Int"}})}),null);
__d("ChatTabMenu.react",["cssVar","cx","fbt","AsyncDialog","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","ChangeChatTabColorDialog","ChatConfig","ChatGroupMembershipDialog.react","ChatPrivacyActionController","ChatStartPlanDialogHelper","CurrentUser","CustomizeThreadDialogGated.react","Dialog","EditChatTabNicknamesDialog","EventPlanUtils","EventRemindersGating","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FRXEntryPoint","GroupsActionURIConstants","ImmutableObject","JSResource","M4IconSettings.bs","MenuSeparator.react","MercuryConfig","MercuryIDs","MercuryLogMessageType","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MercurySourceType","MercuryThreadInfo","MercuryThreadMuter","MercuryViewer","MessageRequestUtils","MessagingTag","MessengerAdminGroupUtils","MessengerCommerceTypedLogger","MessengerDialogs.bs","MessengerGroupsSyncStatus","MessengerMessageRequestsTypedLogger","MessengerPlatformBotReviewWriteDataManager","MessengerPlatformUserControlConfig","MNCommerceDialogStateActions","MNCommerceLoggerEvents","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","MNCommerceReviewDialogContainer.react","NFXChatHeadGK","NFXStoryLocation","PopoverMenu.react","ReactComponentWithPureRenderMixin","QE2Logger","React","ReactDOM","ReactMenu","ShimButton.react","Toggler","TrackingNodes","URI","WebMessengerConfirmBlockDialog","WebMessengerDeleteSyncedGroupDialog","WebMessengerDeleteThreadDialog","WebMessengerThreadPermalinks","WorkFileUploadsGating","WorkModeConfig","XEventCreateDialogController","XMessagingGroupOptionsDialogController","XNFXStartForMessageThreadController","XRapidReportingDialogController","MercuryMessageObject","MercuryThreadActions","MercuryThreadIDMap","MercuryThreads","MercuryMessageActions","getPageIDFromThreadID","goURI","gkx","isEmpty"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("M4IconSettings.bs").jsComponent,k=b("MercuryMessageObject").get(),l=b("MercuryThreadActions").get(),m=b("MercuryThreadIDMap").get(),n=b("MercuryThreads").get(),o=b("MercuryMessageActions").get(),p=b("ReactMenu").Item;a=b("React").PropTypes;var q=b("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA"),r=b("gkx")("AT69YRYE9s42s_yD9mwsCxHePQWU-EQ6ECgPqFwGZDgIh_c4QhPQ6EkbZkZwNW9AFiPJRpSW6bp0lToh_XN_Tj-d"),s=b("MessengerPlatformUserControlConfig").v2_enabled,t="messenger_platform_user_controls_v2_www";c=b("React").createClass({displayName:"ChatTabMenu",_privacyActionController:undefined,linkRef:undefined,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{autoFocus:a.bool,composer:a.object,hasBlockedMessages:a.bool.isRequired,highlightNewMessage:a.bool,isFocused:a.bool,isGroupChat:a.bool,isMultiCompany:a.bool,isPageChat:a.bool,membershipParticipants:a.object,participants:a.arrayOf(a.object),participantsMap:a.object,thread:a.object,threadID:a.string.isRequired,viewer:a.string.isRequired},getInitialState:function(){return{membersDialogShown:!1,muted:!1,privacyText:"",showReportPageDialog:!1,url:null,showCustomizedDialog:!1}},_isBusinessEnabled:function(){var a=this.props.threadID;a=b("MercuryIDs").getParticipantIDFromFromThreadID(a);a=a?b("MessengerParticipants.bs").getNow(a):null;return!!a&&!!a.is_business_enabled},componentDidMount:function(){var a=this.props.threadID,c=b("MercuryIDs").getUserIDFromThreadID(a);b("WebMessengerThreadPermalinks").getThreadURI(a,function(c){this.isMounted()&&!b("MercuryIDs").isLocalThread(a)&&this.setState({url:c})}.bind(this));this.props.isGroupChat||(this._privacyActionController=new(b("ChatPrivacyActionController"))(b("MercuryIDs").getUserIDFromThreadID(a),function(a){return this._updatePrivacyLink(a)}.bind(this)));q&&this.getPageUserIfExists()&&(b("QE2Logger").logExposureForUser(t),s&&new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").USER_CONTROL_V2_IMPRESSION).setUserFbid(b("CurrentUser").getID()).setPageID(c).setDebugData("www_chat_tabs").log())},componentWillUnmount:function(){this._privacyActionController&&this._privacyActionController.destroy()},_unmuteThread:function(){var a=this.props.threadID,c=b("MercuryIDs").getUserIDFromThreadID(a);l.unmute(a);b("Toggler").hide();s&&this.getPageUserIfExists()&&new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").USER_CONTROL_V2_UNMUTED).setUserFbid(b("CurrentUser").getID()).setPageID(c).setDebugData("www_chat_tabs").log()},_togglePrivacyFunc:function(){this._privacyActionController&&this._privacyActionController.togglePrivacy()},_renderFileUploader:function(){return b("React").createElement(p,{key:"fileUploader",className:"_37_x"},b("React").createElement(b("ShimButton.react"),{className:"_4q61 itemAnchor",inline:!0,onClick:function(){this.props.composer&&b("FantaMessageActions").openUploadFilePicker(this.props.threadID,this.props.composer)}.bind(this)},i._("Add Files...")))},_fullConversationRedirect:function(){b("goURI")(this.state.url)},_renderOpenFullConversation:function(){if(this.state.url){var a=b("CurrentUser").isWorkUser()?i._("Open in Workplace Chat"):i._("Open in Messenger");return b("React").createElement(p,{key:"openFullMessenger",href:this.state.url,onclick:this._fullConversationRedirect},a)}return null},_renderAddFriend:function(){if(b("getPageIDFromThreadID")(this.props.threadID)||this.props.isMultiCompany&&!this.props.isGroupChat)return null;var a=n.getThreadMetaNow(this.props.threadID),c=b("MessengerAdminGroupUtils").shouldInvite(a);a=b("MessengerAdminGroupUtils").isGroupChat(a);var d=void 0;b("WorkModeConfig").is_work_user?d=i._("Add Coworkers to Chat..."):c?d=i._("Invite Friends to Chat..."):a?d=i._("Add Group Members to Chat..."):d=i._("Add Friends to Chat...");return b("React").createElement(p,{key:"addFriend",onclick:this._showAddFriend},d)},_showAddFriend:function(){b("FantaTabSheetActions").openAddMoreFriendsSheet(this.props.threadID)},_renderTogglePrivacy:function(){return!this.props.isGroupChat&&this.state.privacyText?b("React").createElement(p,{key:"togglePrivacy",onclick:this._togglePrivacyFunc},this.state.privacyText):null},_canEditNickname:function(){if(b("getPageIDFromThreadID")(this.props.threadID))return!1;var a=n.getThreadMetaNow(this.props.threadID),c=b("CurrentUser").getID();a=a&&a.participants&&c&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,c);return!!a},_renderEditNickname:function(){return!this._canEditNickname()?null:b("React").createElement(p,{key:"editNickname",onclick:this._showEditNicknameDialog},i._("Edit Nicknames"))},_renderChangeColor:function(){if(b("getPageIDFromThreadID")(this.props.threadID))return null;var a=n.getThreadMetaNow(this.props.threadID),c=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());a=a&&c&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,c);c=b("gkx")("AT5P41pr7BDnjiOgbStpHA_i7Cn6sNmQTUBmLPCEePGMUzzc1H0XlI9pcb9hHfQ4BcDluF-cNEK1JTZw1H2bIykG")?i._("Customize Chat"):i._("Change Color...");return a&&b("ChatConfig").get("chat_tab_custom_color")?b("React").createElement(p,{key:"changeColor",onclick:this._showCustomColorDialog},c):null},_onUpdateMute:function(a,c){var d=b("MercuryIDs").getUserIDFromThreadID(a);l.updateMuteSetting(a,c);s&&this.getPageUserIfExists()&&new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").USER_CONTROL_V2_MUTED).setUserFbid(b("CurrentUser").getID()).setPageID(d).setDebugData("www_chat_tabs").log()},_renderMuteConversation:function(){var a=this.props,c=a.thread;a=a.threadID;c=!!c&&b("MercuryThreadInfo").isMuted(c);var d=this.getPageUserIfExists();if(!c){c=b("MercuryThreadMuter").showMuteChangeDialog.bind(null,a,this.linkRef,this._onUpdateMute);return b("React").createElement(p,{key:"mute",onclick:c},d?i._("Mute Notifications"):i._("Mute Conversation..."))}else return b("React").createElement(p,{key:"unmute",onclick:this._unmuteThread},d?i._("Unmute Notifications"):i._("Unmute Conversation"))},_renderDeleteConversation:function(){return b("React").createElement(p,{key:"delete",onclick:this._deleteConversation},i._("Delete Conversation..."))},_renderReportSpam:function(){var a=b("getPageIDFromThreadID")(this.props.threadID),c=i._("Report..."),d=i._("Something's Wrong");if(a)return b("React").createElement(p,{key:"reportSpam",onclick:this._reportPageClicked},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MNCommerceReportConversationDialog.react").__setRef("ChatTabMenu.react"),pageID:a,showDialog:this.state.showReportPageDialog,onToggle:this._handleReportPageToggle}),c);a=b("React").createElement(p,{key:"FRXReportSpam",onclick:this._FRXReportSpamClicked},d);d=b("React").createElement(p,{key:"reportSpam",onclick:this._reportSpamClicked},c);return!this.props.isGroupChat&&!b("CurrentUser").isWorkUser()?r?a:d:null},_manageMessagesItem:function(){if(s)return null;return this._isBusinessEnabled()?b("React").createElement(p,{key:"manageMessages",onclick:this._messageManageClicked},i._("Manage Messages...")):null},_manageReviewItem:function(){return!this._isBusinessEnabled()?null:b("React").createElement(p,{key:"manageReivew",onclick:this._reviewClicked},i._("Leave Feedback"))},getPageUserIfExists:function(){var a=this.props.participants,c=this.props,d=c.isPageChat,e=c.threadID;c=c.participantsMap;var f=b("MercuryIDs").getUserIDFromThreadID(e);c&&(a=c.toList().toArray());return!d||!f||!a||b("isEmpty")(a)?null:a.find(function(a){return a.fbid===f})},_onBlockPageActionClick:function(){if(!this.props.threadID)return;var a=this.getPageUserIfExists();if(!a)return;a=a.is_messenger_blocked;a?(l.unblockOnMessengerDotCom(this.props.threadID),this._updatePageBlocked(!1)):(l.blockOnMessengerDotCom(this.props.threadID),this._updatePageBlocked(!0))},_updatePageBlocked:function(a){__p&&__p();var c=this.props,d=c.isPageChat;c=c.threadID;c=b("MercuryIDs").getUserIDFromThreadID(c);if(!d||!c)return;d=this.getPageUserIfExists();if(!d)return;d=b("MercuryIDs").getParticipantIDFromUserID(c);d=b("MessengerParticipants.bs").getNow(d);if(d){d=b("ImmutableObject").set(d,{is_messenger_blocked:a});d={participants:[d]};b("MercuryServerPayloadPreprocessor").getForFBID(this.props.viewer).handleUpdate(d)}var event=a?b("MNCommerceLoggerEvents").USER_CONTROL_V2_BLOCKED:b("MNCommerceLoggerEvents").USER_CONTROL_V2_UNBLOCKED;new(b("MessengerCommerceTypedLogger"))().setEvent(event).setUserFbid(b("CurrentUser").getID()).setPageID(c).setDebugData("www_chat_tabs").log()},_blockPageMessagesItem:function(){__p&&__p();if(!s)return null;if(b("CurrentUser").isWorkUser())return null;var a=this.getPageUserIfExists();if(!a)return null;a=a.is_messenger_blocked;var c=i._("Turn Off Messages"),d=i._("Turn On Messages");a=a?d:c;return b("React").createElement(p,{key:"blockPage",onClick:this._onBlockPageActionClick},a)},_blockMessagesItem:function(){__p&&__p();var a=this.props,c=a.hasBlockedMessages,d=a.isGroupChat,e=a.threadID;a=a.thread;e=b("MercuryIDs").getUserIDFromThreadID(e);var f=this._isBusinessEnabled();a=a&&a.message_count===0;if(f||e&&e===b("CurrentUser").getID())return null;if(!d&&!c&&!a&&!b("CurrentUser").isWorkUser())return b("React").createElement(p,{key:"blockMessages",onclick:this._messageBlockedClicked},i._("Block Messages..."));return!d&&c?b("React").createElement(p,{key:"unblockMessage",onclick:this._messageUnblockedClicked},i._("Unblock Messages...")):null},_ignoreMessagesItem:function(){var a=this.props,c=a.isGroupChat,d=a.hasBlockedMessages;a=a.threadID;a=b("MercuryIDs").getUserIDFromThreadID(a);if(this._isBusinessEnabled()||a&&a===b("CurrentUser").getID()||d||b("CurrentUser").isWorkUser())return null;return c&&!b("gkx")("AT6sQjs7GRVhEipNW3TkmIJi_BHZa2KKyD-Mi9QicLxYmeTJYm7WWpq-_Rh-wyDoXW1BNvzANnO7tf1hMqNgPGMF")?null:b("React").createElement(p,{key:"ignore",onclick:this._messageIgnoreClicked},i._("Ignore Messages..."))},_renderCreateGroup:function(){var a=!1;if(b("gkx")("AT76uJPrd7aouwB_QroadLDPQjoYqjTnZ6JlShuyxmrPn6QOi_fPin1c8OftLiUFB89lVhL5JEgoqRyScwLRyYCk")){var c=n.getThreadMetaNow(this.props.threadID);a=c&&c.groups_sync_status===b("MessengerGroupsSyncStatus").OPT_IN}return!a&&this.props.isGroupChat?b("React").createElement(p,{key:"createGroup",onclick:this._createGroupClicked},i._("Create Group")):null},_renderCreateEvent:function(){return this.props.isGroupChat?b("React").createElement(p,{key:"createEvent",onclick:this._createEventClicked},i._("Create Event")):null},_renderCreatePlan:function(){if(b("EventPlanUtils").isAllowedtoStartPlanWithRecipients(this.props.threadID)){var a=b("EventRemindersGating").shouldUseNewName?i._("Start Plan"):i._("Create Reminder");return b("React").createElement(p,{key:"eventPlan",onclick:this._onEventPlanButtonClicked},a)}return null},_renderConversationName:function(){var a=n.getThreadMetaNow(this.props.threadID),c=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());a=a&&c&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,c)&&this.props.isGroupChat&&!n.isEmptyLocalThread(this.props.threadID);return a?b("React").createElement(p,{key:"conversationName",onclick:this._openNameConversation},i._("Edit Conversation Name")):null},_openNameConversation:function(){b("FantaTabSheetActions").openNameConversationSheet(this.props.threadID)},_renderLeaveConversation:function(){return this.props.isGroupChat?b("React").createElement(p,{key:"leave",onclick:this._unsubscribeLinkClicked},i._("Leave Conversation...")):null},_openMembersDialog:function(){m.getServerIDFromClientID(this.props.threadID,function(a){b("MessengerDialogs.bs").showDialog(function(){var c=a&&b("MercuryIDs").getThreadIDFromThreadFBID(a),d=this.props.participants,e=this.props.participantsMap;e&&(d=e.toList().toArray());return c&&d?b("React").createElement(b("ChatGroupMembershipDialog.react"),{dialogShown:!0,membershipParticipants:this.props.membershipParticipants,onHide:this._onHideMembersDialog,participants:d,thread:this.props.thread,threadID:c}):null}.bind(this))}.bind(this))},_onHideMembersDialog:function(){b("MessengerDialogs.bs").removeAllDialogs()},_renderPeopleList:function(){if(this.props.isGroupChat&&!n.isEmptyLocalThread(this.props.threadID)){var a=n.getThreadMetaNow(this.props.threadID);if(b("MessengerAdminGroupUtils").isAdminRequired(a)){if(this.props.participants&&this.props.participants.length>0||this.props.participantsMap&&this.props.participantsMap.size>0)return b("React").createElement(p,{key:"members",onclick:this._openMembersDialog},i._("Members..."))}else return b("React").createElement(p,{key:"members",onclick:this._showParticipants},i._("Edit Participants..."))}return null},_renderGroupOptions:function(){var a=n.getThreadMetaNow(this.props.threadID),c=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());return a&&c&&this.props.isGroupChat&&b("MessengerAdminGroupUtils").canSeeJoinableGroupOptions(a)?b("React").createElement(p,{key:"groupOptions",onclick:this._showGroupOptions},i._("View Group Options")):null},_renderToggleSecretMode:function(){return this.props.hasSecretModeOn?b("React").createElement(p,{key:"secretMode",onclick:this._secretModeTurnOff},i._("Turn off disappearing messages")):null},_renderGroupsSyncDeleteOption:function(){if(!b("gkx")("AT76uJPrd7aouwB_QroadLDPQjoYqjTnZ6JlShuyxmrPn6QOi_fPin1c8OftLiUFB89lVhL5JEgoqRyScwLRyYCk"))return null;var a=n.getThreadMetaNow(this.props.threadID);if(!a)return null;return a.groups_sync_status!=b("MessengerGroupsSyncStatus").OPT_IN?null:b("React").createElement(p,{onclick:function(){return this._groupsSyncDelete(a)}.bind(this),key:"groupsSyncDelete"},i._("Delete Facebook Group"))},_groupsSyncDelete:function(a){b("WebMessengerDeleteSyncedGroupDialog").show(function(){return l.deleteSyncedGroup(a)})},_renderMenuItems:function(){__p&&__p();var a=this.props.thread,c=b("gkx")("AT6MJjghtf-uvoIi5M722VONKqFRBHBSnMD8qt980ioxXTNy2DTVRFp69gZkdlRaIJSK5YtzN81MxfTYpiEI66xk")&&!b("CurrentUser").isWorkUser(),d=b("gkx")("AT6A1bnDK2h8UfK21QtwMasCKSCRuJLNl1CkXiFlb4ngyuzOTwnMPylW45yiU1EwI4xsY2mbtMRkoGbbra-xak0V"),e=this._renderReportSpam(),f=this._blockMessagesItem(),g=this._ignoreMessagesItem(),h=this._manageMessagesItem(),i=this._manageReviewItem(),j=this._renderCreateGroup(),k=this._renderCreateEvent(),l=this._renderGroupOptions(),m=this._blockPageMessagesItem(),n=this._renderToggleSecretMode(),o=this._renderTogglePrivacy(),p=this._renderConversationName(),q=this._renderPeopleList(),r=this._renderEditNickname(),s=this._renderChangeColor(),t=this._renderMuteConversation(),u=this._renderDeleteConversation(),v=this._renderLeaveConversation(),w=c&&d?null:this._renderCreatePlan(),x=!c&&b("WorkFileUploadsGating").canUploadFiles?this._renderFileUploader():null;d=c&&!d?null:this._renderAddFriend();c=c?null:this._renderOpenFullConversation();var y=this._renderGroupsSyncDeleteOption();c=[c,p,q,l,d,r,s].filter(function(a){return!!a});p=[t,n,u,g,m,f,v,o,h,i,e,y].filter(function(a){return!!a});q=[x,w,j,k].filter(function(a){return!!a});l=[c,p,q].filter(function(a){return a.length>0});d=l.reduce(function(a,c,d){a.length>0&&a.push(b("React").createElement(b("MenuSeparator.react"),{key:"separator"+d}));return a.concat(c)},[]);r=!!a&&b("MercuryThreadInfo").showComposer(a)&&!b("isEmpty")(a.participants)&&!b("MessageRequestUtils").isMessageRequest(a)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(a)||b("MercuryThreadInfo").isEmptyLocalThread(a)));return b("React").createElement(b("ReactMenu"),{className:"chatReact"+(r?"":" hidden_elem")},d)},render:function(){var a=this.props,c=a.autoFocus,d=a.threadID,e=a.isFocused;a=a.highlightNewMessage;var f=i._("Options"),g=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.DROPDOWN_BUTTON),h=n.getThreadMetaNow(this.props.threadID),k=h&&h.header_color||"#0084ff";a=a?"#FFFFFF":e?k:"#bec2c9";return b("React").createElement(b("React").Fragment,null,b("gkx")("AT5P41pr7BDnjiOgbStpHA_i7Cn6sNmQTUBmLPCEePGMUzzc1H0XlI9pcb9hHfQ4BcDluF-cNEK1JTZw1H2bIykG")&&b("React").createElement(b("CustomizeThreadDialogGated.react"),{show:this.state.showCustomizedDialog,onHide:this._hideCustomizeDialog,thread:h,threadID:this.props.threadID}),b("React").createElement(b("PopoverMenu.react"),{menu:this._renderMenuItems(),ref:"menu"},b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:c,"data-ft":g,"data-hover":"tooltip","aria-label":f,"data-tooltip-alignh":"center","data-tooltip-content":f,className:"button"+(n.isNewEmptyLocalThread(d)?" hidden_elem":"")+(b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?"":" _3olv")+(b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?"":" _1ll-"),ref:function(a){return this.linkRef=b("ReactDOM").findDOMNode(a)}.bind(this),role:"button"},b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?b("React").createElement(j,{filled:!0,color:a}):null)))},_hideCustomizeDialog:function(){this.setState({showCustomizedDialog:!1})},_updatePrivacyLink:function(a){__p&&__p();var c=this.props,d=c.isGroupChat;c=c.threadID;c=b("MercuryIDs").getUserIDFromThreadID(c);var e;void 0;if(a==b("ChatPrivacyActionController").OFFLINE){e=i._("Go online");this.setState({privacyText:e});return}if(d||!!c)return;if(c){d=b("MercuryIDs").getParticipantIDFromUserID(c);b("MessengerParticipants.bs").get(d,function(c){!c.is_friend?e=null:a==b("ChatPrivacyActionController").BLOCKED?e=i._("Turn On Chat for {name}",[i._param("name",c.short_name)]):b("gkx")("AT6XJNxwV6KaJzyxn6EDe3Tm_qRFKRqe2qkOS_4ZLz8D2JxuLFBXYKOl65GgbN3cStXtdJ_4PUESVZvXZJiurCDl")?e="":e=i._("Turn Off Chat for {name}",[i._param("name",c.short_name)]),this.setState({privacyText:e})}.bind(this))}},_showEditNicknameDialog:function(){if(n.isEmptyLocalThread(this.props.threadID))return;var a=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());a&&b("EditChatTabNicknamesDialog").show(n.getThreadMetaNow(this.props.threadID),a,this.linkRef)},_showCustomColorDialog:function(){if(n.isEmptyLocalThread(this.props.threadID))return;n.getThreadMeta(this.props.threadID,function(a){b("gkx")("AT5P41pr7BDnjiOgbStpHA_i7Cn6sNmQTUBmLPCEePGMUzzc1H0XlI9pcb9hHfQ4BcDluF-cNEK1JTZw1H2bIykG")?this.setState({showCustomizedDialog:!0}):b("ChangeChatTabColorDialog").show(a,this.linkRef)}.bind(this))},_showParticipants:function(){m.getServerIDFromClientID(this.props.threadID,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(b("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:a})))})},_unsubscribeLinkClicked:function(){var a=[];a.push({name:"unsubscribe",label:i._("Leave Conversation"),handler:function(){return this._unsubscribeToThread()}.bind(this)});a.push(b("Dialog").CANCEL);var c=void 0;n.getThreadMeta(this.props.threadID,function(a){a.admin_ids&&a.admin_ids.indexOf(b("MercuryViewer").getID())!==-1?c=i._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send and receive messages."):c=i._("You will stop receiving messages from this conversation and people will see that you left.")});new(b("Dialog"))().setTitle(i._("Leave Conversation?")).setBody(c).setButtons(a).show()},_unsubscribeToThread:function(){if(!n.isEmptyLocalThread(this.props.threadID)){var a=k.constructLogMessageObject(b("MercurySourceType").CHAT_WEB,this.props.threadID,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryViewer").getID()]});o.send(a)}b("FantaTabActions").closeTab(this.props.threadID);return!0},_deleteConversation:function(){b("WebMessengerDeleteThreadDialog").show(this.props.threadID,function(){return b("FantaTabActions").deleteTab(this.props.threadID)}.bind(this),null,this.linkRef)},_reportSpamClicked:function(){var a=this.props.threadID;a=b("MercuryIDs").getUserIDFromThreadID(a);var c=new(b("URI"))("/ajax/chat/report.php").addQueryData({id:a}).addQueryData({src:"top_report_link"});b("NFXChatHeadGK").result&&(c=b("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",a).setEnum("location","www_chat_head").getURI());b("AsyncDialog").send(new(b("AsyncRequest"))(c))},_FRXReportSpamClicked:function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);a=a?a:"";var c=btoa("EntMessengerViewer1To1Thread:"+a);c=JSON.stringify({reportable_ent_token:c,story_location:b("NFXStoryLocation").MESSENGER_DIRECT_THREAD_DETAILS,entry_point:b("FRXEntryPoint").REPORT_BUTTON,responsible_id:a});a=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();new(b("AsyncRequest"))(a).send()},_reportPageClicked:function(){this.setState({showReportPageDialog:!0})},_handleReportPageToggle:function(){this.setState({showReportPageDialog:!1})},_messageBlockedClicked:function(){l.blockMessages(this.props.threadID,this._handleAfterBlock)},_handleAfterBlock:function(){b("WebMessengerConfirmBlockDialog").show();var a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,b("CurrentUser").getID());l.changeFolder(this.props.threadID,b("MessagingTag").OTHER);b("FantaTabActions").closeTab(this.props.threadID);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(b("MessagingTag").INBOX).setThreadKey(a).setEntryPoint(null).log()},_messageManageClicked:function(){var a=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)},c=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})},_messageIgnoreClicked:function(){l.ignoreMessages(this.props.isGroupChat?b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID):b("MercuryIDs").getUserIDFromThreadID(this.props.threadID))},_reviewClicked:function(){var a=function(a,c,d){if(c===0)return;b("MessengerPlatformBotReviewWriteDataManager").review(a,c,d.trim())},c=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);b("MNCommerceDialogStateActions").showDialog(b("MNCommerceReviewDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})},_messageUnblockedClicked:function(){l.unblockMessages(this.props.threadID)},_secretModeTurnOff:function(){l.turnOffSecretMode(this.props.threadID)},_secretModeTurnOn:function(){l.turnOnSecretMode(this.props.threadID)},_showGroupOptions:function(){n.getThreadMeta(this.props.threadID,function(a){if(!a.is_canonical){a=b("XMessagingGroupOptionsDialogController").getURIBuilder().setString("thread_fbid",a.thread_fbid).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))}})},_createGroupClicked:function(){n.getThreadMeta(this.props.threadID,function(a){if(!a.is_canonical){var c=new(b("URI"))(b("GroupsActionURIConstants").CREATE_GROUP_URI).addQueryData({ref:"web_messenger_dock",parent_id:"0"}),d=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)}).filter(function(a){return a});c.addQueryData({members:d});a.name&&c.addQueryData({name:a.name});b("AsyncDialog").send(new(b("AsyncRequest"))(c))}})},_createEventClicked:function(){n.getThreadMeta(this.props.threadID,function(a){if(!a.is_canonical){a=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)}).filter(function(a){return a});a=b("XEventCreateDialogController").getURIBuilder().setString("acontext",JSON.stringify({})).setIntVector("invite_ids",a).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))}})},open:function(){this.refs.menu.showPopover()},_onEventPlanButtonClicked:function(){b("ChatStartPlanDialogHelper").showDialog(this.props.threadID)}});e.exports=c}),null);
__d("MessengerUserControlsButtonReact.bs",["ix","fbt","LinkReact.bs","ImageReact.bs","MercuryIDs","ReasonReact.bs","AsyncRequest","MessengerDialogs.bs","MessengerMenuReact.bs","MercuryThreadActions","MessengerParticipants.bs","MessengerPopoverMenuReact.bs","MessengerCommerceTypedLogger","MercuryServerPayloadPreprocessor","MessengerMuteDialogBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Mute Notifications"),j=h._("Unmute Notifications"),k=h._("Turn Off Messages"),l=h._("Turn On Messages"),m=g("464335"),n=g("464334"),o=b("ReasonReact.bs").statelessComponent("MessengerUserControlsButton");function a(a,c,d){new(b("AsyncRequest"))(a.getURI(c)).setMethod("POST").setData(c).setHandler(d).send();return 0}function c(a,c,d,e,f,g,h){__p&&__p();var p=function(a){var c=b("MercuryIDs").getParticipantIDFromUserID(e);c=b("MessengerParticipants.bs").getNow(c);if(c==null)return 0;else{c=Object.assign({},c);b("MercuryServerPayloadPreprocessor").getForFBID(g).handleUpdate(Object.assign({},{participants:[Object.assign(c,{is_messenger_blocked:a})]}));return 0}},q=function(a){a=new(b("MessengerCommerceTypedLogger"))().setEvent(a).setUserFbid(g).setPageID(e).setDebugData("www_messenger");a.log();return 0},r=function(){if(d){b("MercuryThreadActions").getForFBID(g).unblockOnMessengerDotCom(f);p(!1);return q("user_control_v2_unblocked")}else{b("MercuryThreadActions").getForFBID(g).blockOnMessengerDotCom(f);p(!0);return q("user_control_v2_blocked")}},s=function(a){b("MercuryThreadActions").getForFBID(g).updateMuteSetting(f,a);return q("user_control_v2_muted")},t=function(){return q("user_control_menu_clicked")},u=function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)},v=function(){if(c){b("MercuryThreadActions").getForFBID(g).unmute(f);return q("user_control_v2_unmuted")}else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerMuteDialogBootloaderReact.bs").make(s,u,[]))})};return[o[0],o[1],o[2],o[3],function(){return q("user_control_v2_impression")},o[5],o[6],o[7],function(){var e=c?j:i;e=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,e,[v],0,[]));var f=d?l:k;f=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,f,[r],0,[]));e=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").Menu[0]([e,f]));f=d?n:m;return b("ReasonReact.bs").element(0,0,b("MessengerPopoverMenuReact.bs").make([a],0,0,e,0,[t],[b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[f],[32],0,[40],0,[]))]))]))},o[9],o[10],o[11],o[12]]}f.mute=i;f.unmute=j;f.block=k;f.unblock=l;f.unblocked_button_image_path=m;f.blocked_button_image_path=n;f.component=o;f.sendSubscriptionAction=a;f.make=c}),null);
__d("BootloadableMessengerUserControlsButtonReact.bs",["MessengerUserControlsButtonReact.bs"],(function(a,b,c,d,e,f){"use strict";a=[b("MessengerUserControlsButtonReact.bs").mute,b("MessengerUserControlsButtonReact.bs").unmute,b("MessengerUserControlsButtonReact.bs").block,b("MessengerUserControlsButtonReact.bs").unblock,b("MessengerUserControlsButtonReact.bs").unblocked_button_image_path,b("MessengerUserControlsButtonReact.bs").blocked_button_image_path,b("MessengerUserControlsButtonReact.bs").component,b("MessengerUserControlsButtonReact.bs").sendSubscriptionAction,b("MessengerUserControlsButtonReact.bs").make];f.bootloadable=a}),null);