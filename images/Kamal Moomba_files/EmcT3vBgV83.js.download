if (self.CavalryLogger) { CavalryLogger.start_js(["Yu7J\/"]); }

__d("XPagesMercuryIndicatorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/mercury/indicator/",{})}),null);
__d("PagesMercuryChatTabIndicatorHandler",["AsyncRequest","AvailableListConstants","ChatPrivacyActionController","ChatVisibility","FBIDCheck","MercuryIDs","PresencePrivacy","XPagesMercuryIndicatorController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.tryCreateHandler=function(a,c,d,e){a=b("MercuryIDs").getUserIDFromThreadID(a);return!a||b("FBIDCheck").isUser_deprecated(a)?null:new g(a,c,d,e)};function g(a,c,d,e){this.$2=!1,this.$3=!1,this.$4=!1,this.$5=c,this.$6=!1,this.$7=a,this.$10=d,this.$9=e,this.$8=new(b("ChatPrivacyActionController"))(a,function(a){return this.$11(a)}.bind(this))}g.prototype.__getEnableTimeSwitch=function(){return this.$2};g.prototype.__getIsShown=function(){return this.$4};g.prototype.__getPageOnlineStatus=function(){return this.$5};g.prototype.__getShouldPreventFutureShown=function(){return this.$6};g.prototype.__getTargetID=function(){return this.$7};g.prototype.__getIsChecking=function(){return this.$3};g.prototype.__getResponsivenessDescription=function(){return this.$1};g.prototype.checkResponsiveness=function(){if(this.$3)return;var a=b("XPagesMercuryIndicatorController").getURIBuilder().getURI();this.$3=!0;new(b("AsyncRequest"))().setURI(a).setMethod("POST").setData({page_id:this.$7}).setHandler(function(a){this.$3=!1;a=a.payload;a.responsiveness&&this.$12(a.responsiveness,a.enableTimeSwitch)}.bind(this)).send()};g.prototype.hideIndicator=function(){this.$13(!1)};g.prototype.hideIndicatorAndPreventFutureShow=function(){this.$13(!0)};g.prototype.$13=function(a){this.$6=this.$6||a,this.$4&&(this.$4=!1,this.$9())};g.prototype.showIndicator=function(){if(this.$4||this.$5!==b("AvailableListConstants").OFFLINE||!this.$1||!b("ChatVisibility").isOnline()||!b("PresencePrivacy").allows(this.$7)||this.$6)return;this.$4=!0;this.$10(this.$1,this.$7)};g.prototype.notifyPageOnlineStatusChanged=function(a){__p&&__p();if(this.$5===a)return;this.$5=a;if(!this.$2)return;switch(a){case b("AvailableListConstants").ACTIVE:this.hideIndicator();break;default:this.showIndicator();break}};g.prototype.$12=function(a,b){this.$1=a,this.$2=b,this.showIndicator()};g.prototype.$11=function(a){switch(a){case b("ChatPrivacyActionController").OFFLINE:case b("ChatPrivacyActionController").BLOCKED:this.$13(!0);break}};e.exports=g}),null);