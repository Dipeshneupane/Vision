if (self.CavalryLogger) { CavalryLogger.start_js(["2r4gW"]); }

__d("MessengerDotComPromotionActionURL",[],(function(a,b,c,d,e,f){e.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setIndex=function(a){this.$1.index=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPayload=function(a){this.$1.payload=a;return this};a.prototype.setQrContentType=function(a){this.$1.qr_content_type=a;return this};a.prototype.setTitle=function(a){this.$1.title=a;return this};a.prototype.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setType=function(a){this.$1.type=a;return this};a.prototype.setURL=function(a){this.$1.url=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0};e.exports=a}),null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryMessageActions").getForFBID(this.$1),this.$3=b("MercuryMessageObject").getForFBID(this.$1)}a.prototype.sendPlainTextMessage=function(a,b,c){b=this.$3.constructUserGeneratedMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendSticker=function(a,b,c){b=this.$3.constructStickerMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendAttachment=function(a,b,c){c=this.$3.constructAttachmentMessageObject(c,a);this.$2.addAttachmentPlaceholder(c,b.upload_id,b)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerAsyncWrapper",["React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();void 0;b("gkx")("AT6uOpHsaIuXW82MiVMSo_xgA_Dx0-Ld7p3DjaI-6h1npleIfo2Ysa-KTi2_I4jhSTW9dTVJIrfmoYCZy4z-M8VA")?a=b("React").unstable_AsyncMode:a=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("React").Component);a&&a.prototype;c.prototype.render=function(){"use strict";return this.props.children};function c(){"use strict";a.apply(this,arguments)}return c}();e.exports=a}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logging/promotion/",{promotion_id:{type:"Int",required:!0},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","CurrentUser","Image.react","MessengerButtonReact.bs","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.bs","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerButtonReact.bs").jsComponent;c=b("React").PropTypes;var k=h("86832"),l=h("86833");d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={bannerClosed:!1},this.$3=function(){return b("React").createElement(j,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$4,type:"primary"})}.bind(this),this.$4=function(){this.$5(),this.props.promotionID?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send(),this.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):window.open(this.props.primaryActionURI)):this.props.primaryActionURI?b("goURI")(this.props.primaryActionURI,!0):this.props.primaryActionCallback&&this.props.primaryActionCallback()}.bind(this),this.$2=function(){this.$5(),this.props.promotionID&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send()}.bind(this),this.$5=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.bs").resize()})}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.promotionID||this.setState({bannerClosed:!1})};a.prototype.componentDidMount=function(){if(this.$1()||!this.props.promotionID||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};a.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};a.prototype.render=function(){return this.$1()?null:b("React").createElement("div",{className:"_2cij"},b("React").createElement(b("Image.react"),{className:"_2cik",onClick:this.$2,src:k}),b("React").createElement(b("Image.react"),{className:"_2cil",src:l}),this.props.promotionContent," ",this.$3())};a.prototype.$1=function(){return this.state.bannerClosed};a.propTypes={promotionID:c.number,promotionContent:c.string,primaryActionTitle:c.string,primaryActionURI:c.string,primaryActionCallback:c.func,instanceLogData:c.object};e.exports=a}),null);
__d("MessengerPromotionDataDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(){g.constructor.call(this,{strict:!0})}e.exports=new a()}),null);
__d("MessengerPromotionDataStore",["FluxStore","MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerPromotionDataDispatcher")),this.$MessengerPromotionDataStore1=null}a.prototype.getPromotionData=function(){return this.$MessengerPromotionDataStore1};a.prototype.__onDispatch=function(a){switch(a.type){case"SET_PROMOTION_DATA":this.$MessengerPromotionDataStore1!==a.promotionData&&(this.$MessengerPromotionDataStore1=a.promotionData,this.__emitChange());break}};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MessengerPromotionDataActions",["MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setPromotionData:function(a){b("MessengerPromotionDataDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})}};e.exports=a}),null);
__d("MessengerRefreshPrompt",["fbt","CurrentUser","MessengerPromotionDataActions","Visibility","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3*60*60,i=1e3*60*60*24*3;a=function(){var a=Date.now();b("setIntervalAcrossTransitions")(function(){var c=b("CurrentUser").isWorkUser()?g._("A new version of Workplace Chat is available."):g._("A new version of Messenger is available.");Date.now()-a>i&&b("Visibility").once(b("Visibility").VISIBLE,function(){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:c,primaryActionTitle:g._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href}),a=Date.now()})},h)};e.exports=a}),null);
__d("WorkNuxID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WORK_CHAT_DOWNLOAD_UPSELL_BANNER:5468})}),null);
__d("WorkplaceChatUpsellBanner.react",["ix","cx","fbt","Promise","BasicFBNux","Bootloader","Event","Image.react","Link.react","React","UserAgent","WorkNuxID","XUIButton.react","XWorkplaceDesktopDownloadController","fbglyph","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k="https://play.google.com/store/apps/details?id=com.facebook.workchat",l="https://itunes.apple.com/app/work-chat/id958124798";c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){j.constructor.call(this),this.state={xOutAppUpsell:!1}}a.prototype.componentDidMount=function(){this.$2()};a.prototype.render=function(){return b("React").createElement("div",{className:"_3ej0"+(this.state.xOutAppUpsell?" _3ej2":"")},i._("Get the app and chat anywhere, anytime"),this.$3(),this.$4())};a.prototype.$3=function(){var a=null;b("UserAgent").isPlatform("Mac OS X")?a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","mac").setString("ref","chat_upsell").getURI():b("UserAgent").isPlatform("Windows")&&(a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","win").setString("ref","chat_upsell").getURI());return b("React").createElement("div",{className:"_3-9a"},a?this.$5(a.toString(),i._("Desktop App")):null,this.$5(l,i._("iOS")),this.$5(k,i._("Android")))};a.prototype.$5=function(a,c){return b("React").createElement(b("XUIButton.react"),{target:"_blank",className:"_3ej4",label:c,href:a,onClick:function(){return this.$6(c)}.bind(this)})};a.prototype.$4=function(){return b("React").createElement(b("Link.react"),{onClick:function(){return this.$7()}.bind(this)},b("React").createElement(b("Image.react"),{className:"_3-8w _3-90 _3ej3",alt:"X",src:g("114703")}))};a.prototype.$7=function(){this.$8(),this.setState({xOutAppUpsell:!0}),setTimeout(function(){return b("Event").fire(window,"resize")},300)};a.prototype.$6=function(a){b("promiseDone")(this.$9(),function(b){var c=b.logger;b=b.actions;c.clear();c.setAction(b.CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED).addToExtraData("button",a.toString()).log()})};a.prototype.$8=function(){b("promiseDone")(this.$9(),function(a){var b=a.logger;a=a.actions;b.clear();b.setAction(a.CHAT_APP_UPSELL_BANNER_DISMISSED).log()})};a.prototype.$2=function(){b("BasicFBNux").onView(b("WorkNuxID").WORK_CHAT_DOWNLOAD_UPSELL_BANNER),b("promiseDone")(this.$9(),function(a){var b=a.logger;a=a.actions;b.clear();b.setAction(a.CHAT_APP_UPSELL_BANNER_SHOWN).log()})};a.prototype.$9=function(){this.$1||(this.$1=new(b("Promise"))(function(a,c){b("Bootloader").loadModules(["WorkOnboardingTypedLogger","WorkOnboardingLogAction"],function(b,c){b=new b();a({logger:b,actions:c})},"WorkplaceChatUpsellBanner.react")}));return this.$1};e.exports=a}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler","WorkplaceChatUpsellBanner.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={promotionData:b("MessengerPromotionDataStore").getPromotionData()},this.subscriptions=new(b("SubscriptionsHandler"))(),c}a.prototype.componentDidMount=function(){b("MessengerRefreshPrompt")(),b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]),this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){this.setState({promotionData:b("MessengerPromotionDataStore").getPromotionData()})}.bind(this)))};a.prototype.componentWillUnmount=function(){this.subscriptions.release()};a.prototype.render=function(){var a=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return b("React").createElement(b("WorkplaceChatUpsellBanner.react"),null);return a?b("React").createElement(b("MessengerNotificationBanner.react"),{promotionID:a.promotionID,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,instanceLogData:a.instanceLogData}):null};a.propTypes={showWorkchatUpsellBanner:c.bool,isFirstRedirect:c.bool};e.exports=a}),null);
__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MercuryThreads","MercuryUnseenState","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","PhotoResizeModeConst","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){b("MessengerSettingsStore").getSettings().sound_enabled&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a,!1)}function q(a,c,d){__p&&__p();if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} to {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} to your group",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d.timestamp)})}a={init:function(a){this._viewer=a,this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer),this._threads=b("MercuryThreads").getForFBID(this._viewer),this._unseenState=b("MercuryUnseenState").getForFBID(this._viewer),this._highResImageMap=new Map(),this._shouldMarkAllAsSeenWhenActive=!0,this._shouldUpdateFavicon=!0,this._shouldUpdateTitle=!0,b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MessengerBrowserAlerts")),b("Event").listen(window,"focus",function(){o(),clearInterval(m)}),b("Event").listen(window,"blur",function(){m=setInterval(o,k)}),this._threadInformer.subscribe("messages-received",function(a,b){for(var c in b)b[c].forEach(function(a){this.handleMessageReceived(a)}.bind(this))}.bind(this)),this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this))},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(c||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;this._threads.getThreadMeta(a.thread_id,function(c){__p&&__p();if(b("MercuryThreadInfo").isMuted(c))if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===this._viewer}.bind(this)))return}else return;var d=b("CurrentUser").getID();b("MessengerState.bs").compute(d,function(e){e=e.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(d,e,c))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?this._attemptDesktopNotification(c,a):a.log_message_type!==b("MercuryLogMessageType").UNSUBSCRIBE&&p(a.timestamp);!b("UserActivity").isOnTab()&&this._unseenState.getUnseenCount()>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&this._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))}.bind(this))}.bind(this))}.bind(this))},showRTCNotification:function(a,c){__p&&__p();if(b("UserActivity").isOnTab()){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var d=a.peerID;if(!this._highResImageMap.has(d)){var e=function(b,e){this._highResImageMap.set(d.toString(),e.uri),this._displayRTCDesktopNotification(e.uri,a,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(d).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(e.bind(null,d)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(d),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i=void 0;c.isVideoCall?c.isGroupCall?i=g._("Incoming Group Video Chat"):i=g._("Incoming Video Call"):c.isGroupCall?i=g._("Incoming Group Call"):i=g._("Incoming Audio Call");f=g._("{caller} is calling you. Click to answer.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onClick:function(){window.focus(),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){__p&&__p();var a=this._unseenState.getUnseenCount();if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&a>0){this._updateFavicon(0);this._unseenState.markAsSeen();return}this._shouldUpdateTitle&&b("DocumentTitle").badge(a);this._updateFavicon(a);n&&a===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&a>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this._focusToken&&this._focusToken.unsubscribe(),this._focusToken=null,this._unseenState.markAsSeen())}.bind(this)))},_attemptDesktopNotification:function(a,c){if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var d=function(b,d){this._highResImageMap.set(a.snippet_sender,d.uri),q(a,d.uri,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(d.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("MessengerWorkContextInformationWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1613769105371737"};c.getQueryID=function(){"use strict";return"381051872368528"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryWorkContextInformation",["EmitterSubscription","EventEmitter","KeyedCallbackManager","MercuryDispatcher","MercurySingletonProvider","MessengerWorkContextInformationWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))();function a(a){__p&&__p();this.$4=new Map(),this.$6=function(a){__p&&__p();if(a&&a.user&&a.user.scim_company_user){var b=a.user.scim_company_user,c=b.work_phone_numbers.nodes;c=c.filter(function(a){return a.is_primary_number===!0&&a.user_phone_number_type}).shift();var d=b.work_location.nodes[0],e={};e[a.user.id]={phone:c?[c.user_phone_number_for_display]:null,email:b.email?[b.email]:null,location:d?[d.user_formatted_address]:null};this.$3.addResourcesAndExecute(e);this.$4.set(a.user.id,!1);g.emit("change")}}.bind(this),this.$1=a,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$3=new(b("KeyedCallbackManager"))(),this.$4=new Map()}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.getTopThreads=function(){return this.$3.getAllResources()};a.prototype.getOrFetch=function(a){if(!a)return null;var b=this.$3.getResource(a);if(b)return b;this.$5(a);return null};a.prototype.$5=function(a){if(this.$4.get(a))return;this.$4.set(a,!0);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerWorkContextInformationWebGraphQLQuery"))({id:a})),this.$6)};a.addListener=function(a,b){return g.addListener(a,b)};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2042265585845427"};c.getQueryID=function(){"use strict";return"211838679432498"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerGraphQLThreadlistFetcher.bs",["Promise","bs_array","bs_js_dict","BanzaiODS","bs_caml_array","WebGraphQL","bs_caml_format","CurrentUser","MessengerServerPayloadTransformer.bs","MessengerThreadlistWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return new(b("MessengerThreadlistWebGraphQLQuery"))({limit:a.limit,before:a.timestamp,tags:a.tags,isWorkUser:b("CurrentUser").isWorkUser(),includeDeliveryReceipts:a.includeDeliveryReceipts,includeSeqID:a.includeSeqID})}function h(a,c,d,e){__p&&__p();var f=[],g=[],h={},i=[],j={},k=[undefined],l=[0];b("bs_array").iteri(function(e,m){__p&&__p();e=b("bs_caml_array").caml_array_get(c,e);var n=[],o=[],p=[],q=m.viewer.pending_threads;q==null||(l[0]=q.unseen_count);b("bs_array").iter(function(c){__p&&__p();if(c==null)return 0;else{var e=b("MessengerServerPayloadTransformer.bs").transformThread(a,c,d),g=b("MessengerServerPayloadTransformer.bs").transformParticipants(c);b("bs_array").iter(function(a){j[a.fbid]=a;return 0},g);var k;if(e.is_canonical){g=e.other_user_fbid;g==null?k=null:(n.push(g),k=g)}else{g=e.thread_fbid;g==null?k=null:(o.push(g),k=g)}p.push(e.thread_id);f.push(e);if(!(k==null)){g=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(a,c);g&&(h[k]=g[0])}if(k==null)return 0;else{g=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(c);if(g.length<1)return 0;else{c=b("bs_caml_array").caml_array_get(g,0);if(e.is_canonical){i.push({other_user_fbid:k,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(c.timestamp_precise)});return 0}else{i.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(c.timestamp_precise)});return 0}}}}},m.viewer.message_threads.nodes);q=m.viewer.message_threads.sync_sequence_id;q==null||(k[0]=b("bs_caml_format").caml_int_of_string(q));m=e.timestamp;g.push({start:e.offset,end:m==null?e.offset+e.limit|0:(e.offset+e.limit|0)-1|0,folder:e.folder,other_user_fbids:n,thread_fbids:o,thread_ids:p,filter:e.filter});return 0},e);return{threads:f,ordered_threadlists:g,pending_folder_unseen_count:l[0],roger:h,delivery_receipts:i,participants:b("bs_js_dict").values(j),sequence_id:k[0]}}function a(a,c,d,e){var f=b("bs_array").map(g,c);return b("Promise").all(b("WebGraphQL").execAll(f,{actorID:d?a:null,batchName:"MessengerGraphQLThreadlistFetcher"}))["catch"](function(a){b("BanzaiODS").bumpEntityKey("messenger_webgraphql",e+".failure");return b("Promise").reject(a)}).then(function(f){b("BanzaiODS").bumpEntityKey("messenger_webgraphql",e+".success");return h(a,c,d,f)})}f._getQuery=g;f.transform=h;f.fetchAll=a}),null);
__d("MessengerInitialDataTransformer.bs",["bs_array","bs_caml_array","MercuryThreadlistConstants","MessengerGraphQLThreadlistFetcher.bs","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=a.additional_participant,f;if(e==null)f=[];else{var g=[];b("bs_array").iter(function(a){if(a==null)return 0;else{g.push(b("MessengerServerPayloadTransformer.bs").transformParticipant(a));return 0}},e.nodes);f=g}e=a.thread_list;e=e==null?null:b("MessengerGraphQLThreadlistFetcher.bs").transform(c,[{limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1|0,folder:"inbox",timestamp:null,offset:0,filter:null}],d,[e]);var h=a.pinned_threads;h=h==null?null:b("MessengerGraphQLThreadlistFetcher.bs").transform(c,[{limit:b("MercuryThreadlistConstants").MAX_PINNED_THREADS+1|0,folder:"inbox",timestamp:null,offset:0,filter:null}],!1,[h]);var i=a.current_thread,j;if(i==null)j=null;else{i=i.message_thread;j=i==null?null:b("MessengerServerPayloadTransformer.bs").transformThread(c,i,d)}c=e==null?[[],0,[],{},[],[]]:[e.ordered_threadlists,e.pending_folder_unseen_count,e.threads,e.roger,e.participants,e.delivery_receipts];i=c[2];d=a.thread_key;e=d==null?i.filter(function(a){return a.unread_count===0}):[];a=e.length!==0?b("bs_caml_array").caml_array_get(e,0).thread_fbid:null;j==null||i.push(j);d=h==null?[]:h.threads;e=d.map(function(b){var a=b.is_canonical;a=a?b.other_user_fbid:b.thread_fbid;if(a==null)return null;else return a});j=i.filter(function(a){return!a.is_pinned});h=j.concat(d);return[{ordered_threadlists:c[0],threads:h,roger:c[3],participants:c[4].concat(f),pending_folder_unseeen_count:c[1],delivery_receipts:c[5],payload_source:"server_initial_data",pinned_thread_ids:e},a]}f.transform=a}),null);
__d("MessengerPage",["EventEmitter","EventEmitterWithHolding","EventHolder","keyMirror","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";a={Events:b("keyMirror")({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function(a,b){return g.addRetroactiveListener(a,b)},emit:function(a){g.emitAndHold(a,b("performanceAbsoluteNow")())},removeCurrentListener:function(){g.removeCurrentListener()}};var g=new(b("EventEmitterWithHolding"))(new(b("EventEmitter"))(),new(b("EventHolder"))());e.exports=a}),null);
__d("FBPaymentsDialogContainerReact.bs",["ReasonReact.bs","FBPaymentsDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("FBPaymentsDialogContainer.react"),{},a)}f.make=a}),null);
__d("MNCommerceDialogContainerReact.bs",["ReasonReact.bs","MNCommerceDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceDialogContainer.react"),{},a)}f.make=a}),null);
__d("MessengerBannerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerBanner.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBanner.react"),{showWorkchatUpsellBanner:a,isFirstRedirect:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("MessengerBugNubReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerBugNub.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBugNub.react"),{isBetaEnabled:b("bs_js_null_undefined").fromOption(a),unixName:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("MercuryCanonicalGroupThreadActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({THREAD_SEARCH_UPDATED:null})}),null);
__d("MercuryCanonicalGroupThreadStore",["FluxStore","MercuryCanonicalGroupThreadActionTypes","MercuryCanonicalGroupThreadManager","MessengerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MercuryCanonicalGroupThreadStore1=b("MercuryCanonicalGroupThreadManager").get()}a.prototype.__onDispatch=function(a){a=a.type;switch(a){case b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break}};a.prototype.getOrFetch=function(a){var c=this.$MercuryCanonicalGroupThreadStore1.getNow(a);c||this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(a,function(){b("MessengerDispatcher").dispatch({type:b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED})});return c};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getReason:function(){__p&&__p();var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];if(a){var c=b("MercuryConfig").DYIDeepLink;return g._("Sorry, this conversation isn't active anymore because messages can no longer be sent to email addresses. After May 1st 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[g._param("download your information",b("React").createElement("a",{href:c},g._("Learn More")))])}else if(b("MercuryConfig").ViewerIsReadOnly)return g._("You're temporarily blocked from sending messages. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(b("MercuryConfig").ColdOpenBlock)return g._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return g._("You cannot reply to this conversation.")}};e.exports=a}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AbstractMentionsTextEditor.react"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.__maybeSearch=function(){var a=this,c=this.props.editorState,d=c.getSelection();d.getHasFocus()&&d.isCollapsed()&&(function(){var e=c.getCurrentContent(),f=a.props.mentionsSource;f&&(a.$DebouncedMentionsTextEditor1&&b("clearImmediate")(a.$DebouncedMentionsTextEditor1),a.$DebouncedMentionsTextEditor1=b("setImmediate")(function(){f.search(e,d,this.__onShowMentions)}.bind(a)))})()}.bind(this),this.__debouncedSearch=b("debounce")(this.__maybeSearch,50)}a.prototype.componentDidUpdate=function(a){"use strict";this.props.editorState!==a.editorState&&this.__debouncedSearch()};a.prototype.componentWillUnmount=function(){"use strict";this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),g.componentWillUnmount.call(this)};e.exports=a}),null);
__d("MNBotsLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotMenuButton.react",["AutoFocusableLink.react","BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=302,i=280;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={flyoutOpen:!!this.props.clicked,isLoading:!1,menuItems:null},this.$3=function(){this.setState({flyoutOpen:!1})}.bind(this),this.$7=function(){this.state.flyoutOpen&&this.$3()}.bind(this),this.$5=function(){this.$1=this.state.flyoutOpen}.bind(this),this.$4=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$1)return;this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2());this.setState({flyoutOpen:!this.state.flyoutOpen})}.bind(this),b}a.prototype.UNSAFE_componentWillMount=function(){this.state.flyoutOpen&&this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2())};a.prototype.componentDidMount=function(){new(b("MessengerBotsWebTypedLogger"))().setEvent(b("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};a.prototype.componentWillUnmount=function(){this.state.flyoutOpen&&this.$3()};a.prototype.render=function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:this.props.className,href:"#",onClick:this.$4,onMouseDown:this.$5,role:"button",ref:"link"}),this.$6())};a.prototype.$6=function(){if(!this.state.flyoutOpen)return null;var a=b("MessengerEnvironment").messengerui,c=a?h:i;a=a?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").createElement(a,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:c,position:"above",contextRef:function(){return this.refs.link}.bind(this),onBeforeHide:this.$7,onBlur:this.$3,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onEscKeyDown:this.$3,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$3}),loader:b("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))};a.prototype.$2=function(){b("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(a){this.setState({menuItems:a,isLoading:!1})}.bind(this),function(){this.setState({menuItems:[],isLoading:!1})}.bind(this))};a.propTypes={autoFocus:c.bool,className:c.string,clicked:c.bool,flyoutAlignment:c.string.isRequired,threadID:c.string.isRequired,pageID:c.string.isRequired};e.exports=a}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};function a(){h.apply(this,arguments)}a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/message_share_attachment/fromURI/",{})}),null);
__d("MessengerURLUploader",["AsyncRequest","Event","MessengerActions","SubscriptionsHandler","URLMatcher","XShareScrapeAttachmentAsyncController","debounce","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI(),h=920,i=920;function a(a,c,d){this.handleInputValueChange=function(a){a=this.$3();a=b("URLMatcher").match(a);a?this.$5!==a&&(this.$5=a,this.$2=null,b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")&&b("MessengerActions").loadingPreview(this.$7,a),this.loadShare()):b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")||(this.$5=null,this.$2=null)}.bind(this),this.$3=a,this.$6=new(b("SubscriptionsHandler"))(),this.$7=d,this.$4=b("debounce")(this.handleInputValueChange,200),this.initInput(c)}a.prototype.getData=function(){return this.$2};a.prototype.getMatchedURL=function(){return this.$5};a.prototype.initInput=function(a){this.$6.addSubscriptions(b("Event").listen(a,"keyup",this.$4),b("Event").listen(a,"paste",this.$4))};a.prototype.loadShare=function(){this.$1&&this.$1.abort&&this.$1.abort();var a=this.$5;a&&(this.$1=new(b("AsyncRequest"))().setMethod("POST").setURI(g).setData({uri:a,image_width:i,image_height:h,disallow_delayed:!0}).setHandler(this.handleShareLoad.bind(this,a)).send())};a.prototype.handleShareLoad=function(a,b){a===this.$5&&(this.$2=(b.payload||0).share_data)};a.prototype.setThreadID=function(a){this.$7=a};a.prototype.clearShareData=function(){this.$5=null,this.$2=null};e.exports=a}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";var g=new RegExp("(?:^|\\s|\\()(["+c+"]((?:"+d+f+"){0,20}))$");b={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function(a){a=g.exec(a);if(a!==null){var b=a[2];return{matchingString:b,leadOffset:a[1].length}}return null}};e.exports=b}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=3;c="\\b[a-z][^\\s"+b("DocumentMentionsRegex").PUNCTUATION+"]";var g=new RegExp("(^|[^#])((?:"+c+"{"+a+",})$)");d={name:"FourLetterMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=d}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("messenger_mentions"),j=h("91674").uri;function a(a,c,d,e){__p&&__p();if(!a||!c||c.length<=2)return null;var f=c.reduce(function(c,e){if(!e||e.fbid===a)return c;var f=d&&d.custom_nickname&&d.custom_nickname[e.fbid]?d.custom_nickname[e.fbid]:"";c.push(new(b("SearchableEntry"))({uniqueID:e.fbid,title:"@"+e.name,subtitle:f,photo:e.image_src,keywordString:f}));return c},[]);e&&d&&d.thread_fbid&&f.push(k(d.thread_fbid));e=new(b("StaticSearchSource"))(f);i.debug("constructed_search_source",JSON.stringify({participants:c.map(function(a){return a&&a.fbid})}));return new(b("DocumentCompositeMentionsSource"))([new(b("DocumentMentionsSource"))(b("AtSignAllowEmptyMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("FourLetterMentionsStrategy"),e)])}function k(a){var c=g._("everyone").toString(),d=g._("Mention everyone in this chat").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a),subtitle:d})}e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","Bootloader","CompositeDraftDecorator","DebouncedMentionsTextEditor.react","DOMDimensions","DraftModifier","EditorState","EmojiFormat","Event","immutable","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitle.react","MercuryTimestamp","MercuryTriodeSourceUtil","MessengerActions","MessengerBotMenuButton.react","MessengerConstants","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDomIDs.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","React","ReactDOM","Run","TypingDetectorController","URLMatcher","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","debounce","getEntityMatcher","getEveryoneMentionIndex","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","replaceMentionedTextInEditorState","setImmediate","shouldNotRenderSegoe","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDomIDs.bs").ids;c=b("React").PropTypes;var l=1,m=/^image\//,n="handled",o=8,p="not-handled",q=b("LogHistory").getInstance("MessengerComposerInput");d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){i.constructor.call(this,a),r.call(this),this.$12=this.$12.bind(this),this.$11=a,this.state=this.$13(),this.$6=b("debounce")(function(a){this.$11||(this.$11=a),s(this.props,this.$11)&&this.$14(),this.$11=a}.bind(this),300),this.$7=b("throttle")(function(){if(this.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$1!==a&&(this.props.onResize&&this.props.onResize());this.$1=a}}.bind(this),100)}a.prototype.$13=function(a){return{editorState:this.$15(b("MessengerEditorStateManager").get(this.props.threadID),a)}};a.prototype.componentDidMount=function(){this.$10=!0,this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height,this.$16(),this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID),b("Run").onUnload(this.$17),this.$3=b("Event").listen(window,"blur",this.$17),this.$4=b("Event").listen(window,"focus",this.$18),this.$5=b("debounce")(function(){this.$19()}.bind(this),1e3)};a.prototype.UNSAFE_componentWillUpdate=function(a){this.props.threadID!==a.threadID&&this.$19()};a.prototype.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7),this.props.threadID!==a.threadID?this.$16():this.$6(a),c.editorState!==this.state.editorState&&(this.props.onChange&&this.props.onChange(this.getValue()))};a.prototype.componentWillUnmount=function(){this.$10=!1,this.$8&&this.$8.destroy(),this.props.threadID&&this.$19(),this.$9&&b("clearImmediate")(this.$9),this.$3&&this.$3.remove(),this.$4&&this.$4.remove()};a.prototype.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$20(a)};a.prototype.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$20(b("EditorState").forceSelection(c,a.getSelectionAfter()))};a.prototype.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};a.prototype.$16=function(){if(!this.$10)return;this.setState(this.$13(!1));this.$23();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$14()};a.prototype.$14=function(){if(this.props.mentionsEnabled){var a=this.props,c=a.participants,d=a.viewer;a=a.thread;this.setState({mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("AT49sw5n0nlIyoqYGYpRJXtOnRzCLqSpsmIoWA7hmyYTaoQcU5JHlDW_AWGZ_laa8hQ933FOWyuLNLlpGxYhTnOb"))})}};a.prototype.$19=function(){if(!this.props.threadID)return;b("MessengerEditorStateManager").set(this.props.threadID,this.state.editorState)};a.prototype.$24=function(a){this.$2&&this.$2.clearShareData(),this.setState({editorState:this.$15(b("EditorState").createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null,showEveryoneMentionDialog:!1},a)};a.prototype.$23=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};a.prototype.$25=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;q.debug("Invalid threadID ",c)}return c};a.prototype.$26=function(){var a=this.props.fileUploader,c=this.$25();a&&(q.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),q.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};a.prototype.onEveryoneWarningAccept=function(){this.setState({showEveryoneMentionDialog:!1},function(){if(this.props.thread){var a=this.getMentions(this.props.thread.thread_fbid);this.$27(a)}}.bind(this))};a.prototype.hideWarningDialog=function(){this.setState({showEveryoneMentionDialog:!1})};a.prototype.getEveryoneMentionWarningDialog=function(){var a=h._("Mention everyone?").toString(),c=h._("Doing so will send a mention to everyone in this group.").toString();return b("React").createElement(b("MessengerDialog.react"),{onToggle:function(a){a||this.hideWarningDialog()}.bind(this)},b("React").createElement(b("MessengerDialogHeader.react"),null,a),b("React").createElement(j,null,c),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Cancel"),type:"secondary",onClick:function(){return this.hideWarningDialog()}.bind(this)}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("OK"),type:"primary",use:"default",onClick:function(){return this.onEveryoneWarningAccept()}.bind(this)})))};a.prototype.$28=function(){if(this.props.thread){var a=this.getMentions(this.props.thread.thread_fbid),c=b("getEveryoneMentionIndex")(a)>-1;c?this.setState({showEveryoneMentionDialog:c}):this.$27(a)}else this.$27()};a.prototype.$27=function(a){__p&&__p();this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(c){var d=this;b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")&&b("MessengerActions").removeSharePreview(this.props.threadID);c&&this.props.mentionsEnabled&&(a&&a.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource)&&(function(){var e=d.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=d.props;var i=e.thread,j=e.participants,k=c;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")})()}.bind(this))&&this.$24(function(){this.$19(),this.$8&&this.$8.resetState()}.bind(this))};a.prototype.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};a.prototype.getInput=function(){return this.refs.input};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewer;var e=null;c&&d&&a?e=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$29(d,a)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(d.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$30(c,d,a))]):e=h._("Composing a new message");c=null;this.props.threadID&&this.props.pageID&&(c=b("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},b("React").createElement(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})));d="";this.props.disableInput?d=h._("Composer is disabled for this thread.").toString():this.props.thread&&!this.props.thread.is_canonical?d=h._("Type a message, \u0040name...").toString():d=h._("Type a message...").toString();a=this.getEveryoneMentionWarningDialog();var f=b("gkx")("AT5qVFdI09B4AOd-aI25l2oB8XCG19goZ5mgq3l0XNCbiTirSd0ch7WdX0lWZTP3JziMdMDGZTgIfc_krtYvXl_n0kilI-X3DBffPqqHujTGzQ");return b("React").createElement("div",{className:"_kmc"+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",onClick:this.focus,role:"presentation"},this.state.showEveryoneMentionDialog?a:null,this.props.showMenu?c:null,b("React").createElement("div",{className:"_3-8x"+(this.props.showMenu?" _3km3":"")+(f?"":" _3oh-")},b("React").createElement(b("DebouncedMentionsTextEditor.react"),{autoHighlight:!0,ariaControls:k.CONVERSATION,ariaDescribedBy:k.COMPOSER_INPUT_DESCRIPTION,ariaLabel:d,editorState:this.state.editorState,handleBeforeInput:this.$31,handleContentReturn:this.$21,handlePastedFiles:this.$12,handleReturn:this.$21,maxResults:o,readOnly:this.props.disableInput,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,onChange:this.$20,placeholder:d,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$32,onShowMentions:this.$33}),b("React").createElement("div",{className:"_5ca7",id:k.COMPOSER_INPUT_DESCRIPTION},e)))};a.prototype.$29=function(a,c){return b("React").createElement(b("MercuryThreadTitle.react"),{thread:a,viewer:c})};a.prototype.$30=function(a,c,d){return b("React").createElement(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};a.prototype.$15=function(a,c){var d=this.$34(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};a.prototype.$34=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};a.prototype.$35=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.$36=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$20(a)};a.prototype.getShareData=function(){if(b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null}a=b("URLMatcher").match(this.getValue());return a===this.$2.getMatchedURL()?this.$2.getData():null};a.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};a.prototype.$37=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};a.prototype.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$20(a);this.$32()};a.propTypes={disableAutofocus:c.bool,fileUploader:c.object,handleOnlyImageUploads:c.bool.isRequired,isComposing:c.bool,mentionsEnabled:c.bool,pageID:c.string,participants:c.instanceOf(b("immutable").Map),sharePreview:c.object,showMenu:c.bool,disableInput:c.bool,smallerEqual640:c.bool,thread:c.object,threadID:c.string,viewer:c.string,onBeforeInput:c.func,onChange:c.func,onFileUpload:c.func,onResize:c.func,onMessageSend:c.func};var r=function(){__p&&__p();this.$10=!1,this.$20=function(a){a!==this.state.editorState&&(this.setState({editorState:a},function(){this.$5()}.bind(this)),this.props.onResize&&this.props.onResize())}.bind(this),this.$21=function(event,a){if(b("isSoftNewlineEvent")(event)){var c=b("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:c(a)});return n}this.setState({},this.triggerSend);return n}.bind(this),this.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(this.state.editorState.getCurrentContent())}.bind(this),this.focus=function(){this.refs.input&&this.refs.input.focus()}.bind(this),this.$31=function(a,b){this.props.onBeforeInput&&this.props.onBeforeInput(a,b);var c=this.$35(a,b);a=this.$36(a,b);return c||a?n:p}.bind(this),this.$12=function(a){a=this.props.handleOnlyImageUploads?a.filter(function(a){return a&&m.test(a.type)}):a;var c=this.$25();if(a.length){b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")?b("MessengerActions").prepareFilesForSend(c,a,"Copy"):this.props.onFileUpload(a);return n}return p}.bind(this),this.$17=function(){this.$19()}.bind(this),this.$18=function(){this.setState(this.$13(!0))}.bind(this),this.triggerSend=function(){this.$22()&&this.$26(),(this.getValue().trim().length>0||this.$37())&&this.$28()}.bind(this),this.$32=function(){var a=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:a})}.bind(this),this.$33=function(a,c){a=(this.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};this.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===l?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);this.setState(a)}.bind(this)};function s(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=a}),null);
__d("MessengerFileSizeErrorDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){switch(a){case"size-exceeded":return 1;case"wrong-type":return 0;default:return 2}}var i=b("ReasonReact.bs").statelessComponent("MessengerFileSizeErrorDialogReact");function j(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function k(a){switch(a){case 0:return g._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return g._("The file you have selected is too large. The maximum size is 25MB.");case 2:return null}}function l(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,j,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Failed to upload files"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[k(a)])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([0],[g._("OK")],0,0,0,[0],0,0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return l(h(a.error),[])});f.errorOfString=h;f.component=i;f.handleToggle=j;f.renderDialogBody=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerSendButtonReact.bs",["fbt","bs_block","LinkReact.bs","ReasonReact.bs","bs_js_primitive","bs_camlinternalLazy"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerSendButtonReact"),i=b("bs_block").__(246,[function(){return g._("Press Enter to send")+("\n"+g._("Press Shift+Enter to add a new paragraph"))}]);function j(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var e=c?[{color:c[0]}]:0,f=i.tag|0;return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,[a],0,["tooltip"],[f===250?i[0]:f===246?b("bs_camlinternalLazy").force_lazy_block(i):i],0,0,0,0,[d],0,0,0,e,0,0,0,g._("Send")))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return j(a.className,b("bs_js_primitive").null_undefined_to_opt(a.customColor),a.onClick,[])});f.component=h;f.title=i;f.make=j;f.jsComponent=a}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","EmoticonsList","immutable","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.bs","MessengerComposerInput.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.bs","MessengerURIStore","MessengerView","MNCommerceCallToActionType","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReplyingToMessageReact.bs","WorkChatExtensionAvailabilityFetcher","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","idx","isWebGLEnabled","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerBlockDialogReact.bs").jsComponent,m=b("MessengerButtonReact.bs").jsComponent,n=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.bs").jsComponent,q=b("ReplyingToMessageReact.bs").jsComponent;c=b("React").PropTypes;var r=640,s=360,t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;d=babelHelpers.inherits(a,b("React").PureComponent);k=d&&d.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.refsGifUploader=null,this.handleFileUpload=function(a){this.refsUploader&&this.refsUploader.uploadFiles(a),this.exitCurrentMode()}.bind(this),this.$33=function(a){a=b("EmoticonsList").symbols[a];if(!a)return;this.refsInput&&this.refsInput.insertEmoticon(a)}.bind(this),this.focusInput=function(){this.refsInput&&this.refsInput.focus()}.bind(this),this.$44=function(a){this.refsGifUploader=a}.bind(this),this.$51=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=this.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()}.bind(this),this.$49=function(){__p&&__p();var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("MessengerURIStore").getState().threadIDs;if(c){c=c.filter(function(a){return this.props.threadID!==a}.bind(this));b("MessengerActions").selectAggregation(c)}c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);this.$47()["delete"](this.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this),this.$53=function(){this.$48()}.bind(this),this.$48=function(){__p&&__p();var a,c=this;a=(a=this.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)this.$54();else{(function(){var d=(a=c.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a,e=d?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d)):null,f=e&&e.short_name;f&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onBlock:function(){this.$55(f)}.bind(this),contact:e,onToggle:this.$56})}.bind(c))})()}}.bind(this),this.$50=function(a){var c=this.props.thread,d=b("CurrentUser").getID();d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,d);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),this.$45=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?this.props.onStickerSelect(a.resultID.toString()):this.refsGifUploader&&this.refsGifUploader.uploadURL&&this.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})}.bind(this),this.$46=function(a){this.focusInput(),this.refsInput&&this.refsInput.insertEmoji(a)}.bind(this),this.$15=function(a){this.setState({currentValue:a})}.bind(this),this.$14=function(a,b,c){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(a,b,c)}.bind(this),this.$42=function(a){this.refsInput&&this.refsInput.triggerSend()}.bind(this),this.$43=function(a){return this.props.onStickerSelect(a)}.bind(this),this.$10=function(){if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:this.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$1);break}}.bind(this),this.$1=function(){this.setState({showNullState:!0,disableNullState:!1})}.bind(this),this.$1=this.$1.bind(this),this.state=this.$2()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID&&(this.setState(this.$2()),a.thread&&this.$3(a.thread.message_count,b("getPageIDFromThreadID")(a.threadID))),a.thread&&a.thread.message_count>0&&this.setState({showNullState:!1})};a.prototype.componentDidMount=function(){this.props.thread&&this.$3(this.props.thread.message_count,this.$4());var a=b("gkx")("AT5XAkqd2O6LjOmkOGXezXJfqE7PmAUiHvyTs90ENWlU1oS2KiZWA5DZjhpXDuy0xxUdkjT9ijcbf3nq8xIRzrY1");b("CurrentUser").isWorkUser()&&a&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(a){return this.setState({hasWorkChatExtension:a})}.bind(this))};a.prototype.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$5(),this.$6())};a.prototype.render=function(){__p&&__p();if(!this.props.canReply)return this.$7();else if(this.props.thread&&b("MessageRequestUtils").isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$8();var a=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$4(),a);if(this.state.showNullState&&this.state.nullStateCTA!==null)return b("React").createElement("div",{className:"_2xh0"},this.$9(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$10,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})));var c=this.$11();a=b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=r,a]}},function(a){var d=a[0];a=a[1];return b("React").createElement("div",{"aria-label":i._("New message"),className:"_4rv3",role:"region"},this.props.replyingToMessage&&this.$12(),b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&this.$13(this.props.threadID),b("React").createElement("div",{className:"_5irm"+(d?" _1_73":"")},b("React").createElement(b("MessengerComposerInput.react"),{disableAutofocus:!!this.props.disableAutofocus,fileUploader:this.props.fileUploader,handleOnlyImageUploads:!1,isComposing:c,mentionsEnabled:this.props.mentionsEnabled,ref:function(a){return this.refsInput=a}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout()}.bind(this),onResize:this.props.onResize,onMessageSend:this.$14,participants:this.props.participants,sharePreview:this.props.sharePreview,smallerEqual640:d,thread:this.props.thread,threadID:c?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID,pageID:this.$4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$15,showMenu:this.state.showMenu,disableInput:this.state.disableInput}),this.$16(a)))}.bind(this));var d=this.$4(),e=c?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return d&&b("gkx")("AT6sbgm7rc2lUrfkuLmhGQcvGZoC5P9uoMvWR1gdSA6TrdITISrYRi27xHKWuRHMYoI4W7RaxO4KyBa-w6z3OpbbspZrp85jUpATWVUJp3E46w")?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:a,pageID:d,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:e}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:a}):a};a.prototype.$13=function(a){__p&&__p();if(!a)return null;var c=this.props.fileUploader;if(!c)return null;c=c.get("uploadedFiles");if(c.size==0)return null;var d=this.props.thread;d=d&&d.footer_color?d.footer_color:"#0084ff";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{files:c,small:!1,threadID:a,threadCustomColor:d,onClick:this.$17,onResize:this.props.onResize}),loader:b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})})};a.prototype.$12=function(){var a=this.props.replyingToMessage;return!a?null:b("React").createElement(q,{name:this.$18(a),body:a.body,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};a.prototype.$18=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};a.prototype.$17=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};a.prototype.$16=function(a){return this.state.disableInput===!0?null:b("React").createElement("div",{ref:function(a){this.refsButtonsContainer=a}.bind(this),className:"_4rv4"},this.$19(a),this.$20())};a.prototype.$19=function(a){if(this.props.hideActions)return null;return a&&a<s?b("React").createElement("div",null,b("React").createElement("ul",{className:"_39bj"},this.$21(),this.$22(),this.$23(),this.$24(),this.$25()),b("React").createElement("ul",{className:"_39bj"},this.$26(),this.$27(),this.$28(),this.$29(),this.$30())):b("React").createElement("ul",{className:"_39bj"},this.$21(),b("CurrentUser").isWorkUser()?this.$31():null,this.$22(),this.$23(),this.$24(),this.$25(),this.$26(),this.$27(),this.$28(),this.$29(),this.$30())};a.prototype.$32=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{error:a.error})})};a.prototype.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};a.prototype.$27=function(){return b("React").createElement("li",null,this.$34())};a.prototype.$34=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$35()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})})};a.prototype.$30=function(){return b("gkx")("AT7NMH8Fy3EgTAU92jLm_-e65sqgQK-sAjecOeMqKm7I8DjgqesO35iaJSaySvKNghUUIX8H61oA8oRMnPMYOfvy")&&b("gkx")("AT44XpsdaaEfcz2GrZ0m8RNEjrTHpQedGRhxmeB3oGdMvETdQ7vdyzqg8MlOqQGInNDXydDTyvvVR5lvi3VlBp7t")&&this.props.threadID?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button"})}):null};a.prototype.$26=function(){return!t?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button"})}))};a.prototype.$28=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGroupPollingButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button"})}))};a.prototype.$29=function(){var a=b("gkx")("AT4VU3LTU_m0y3MeJeai7hJytsOcRy63JbTrv7QtkGDcMH9aN_sV8sDNC1ebrhVq0RfT0H4FEgW5UVoJHsOiHpnF")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$35()?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};a.prototype.$21=function(){return this.props.threadFBID&&!this.$35()&&this.state.hasWorkChatExtension?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})):null};a.prototype.$36=function(a){return b("React").createElement("li",{className:"_39bk"},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$37()),ref:function(a){return this.refsUploader=a}.bind(this),imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:!1,inputClassname:"_260t",linkClassName:"_30yy _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$32,threadID:this.props.threadID}))};a.prototype.$22=function(){return this.$36("files")};a.prototype.$31=function(){return this.$36("attachment")};a.prototype.$38=function(){return this.state.currentValue.length>0||this.$39()||this.$40()};a.prototype.$39=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};a.prototype.$40=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};a.prototype.$41=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};a.prototype.$20=function(){var a=!(this.props.threadID||this.$37());return!a&&this.$38()&&!this.$41()?b("React").createElement(p,{className:(this.props.threadID?"_30yy":"")+" _38lh _39bl",customColor:this.props.thread&&this.props.thread.solid_color,onClick:this.$42}):b("React").createElement(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(this.props.threadID?" _30yy":"")+" _39bl",disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.$43,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24})};a.prototype.$23=function(){var a=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$37()),getInput:function(){return this.refsInput}.bind(this),flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$33,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$9=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)]));else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())){var d=this.$4();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)]))}break;default:return null}return null};a.prototype.$24=function(){var a=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").createElement("li",null,b("React").createElement("div",{style:{display:"none"}},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$44,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$32})),b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return this.refsInput}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():""}.bind(this),location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$45}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$25=function(){var a=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return this.refsInput}.bind(this),onSelect:this.$46,onMount:function(a){return this.refsEmojiButton=a}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$8=function(){__p&&__p();var a=this.props.thread,c=!!a&&b("MessageRequestUtils").isFiltered(a);a=b("CurrentUser").getID();var d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,a);return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:51}}),bootloadLoader:b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposer.react"),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$47().changeFolder(this.props.threadID,b("MessagingTag").INBOX);var a=b("MessengerURIStore").getState().threadIDs;if(a){a=a.filter(function(a){return this.props.threadID!==a}.bind(this));b("MessengerActions").selectAggregation(a)}this.setState({pendingActionsBypassed:!0},function(){return new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(d).setEntryPoint(null).log()}.bind(this))}.bind(this),onDeclineClick:function(){var a=b("MercuryIDs").isGroupChat(this.props.threadID);b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(c){var e=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(e,{onBlock:this.$48,onDelete:this.$49,onToggle:this.$50,isGroupChat:a})}.bind(this));new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerComposer.react")}.bind(this),onDeleteClick:function(){b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(a){var c=a.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{onDelete:this.$49,onToggle:this.$50})}.bind(this))}.bind(this),"MessengerComposer.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this)})};a.prototype.$7=function(){__p&&__p();if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var a=this.props.thread,c=this.props.participants,d=!1,e=!1;if(a.cannot_reply_reason==="blocked"){d=!0;a.is_canonical===!0||j(0);c!=null||j(0);var f=a.other_user_fbid;f!=null||j(0);c=c.get(b("MercuryIDs").getParticipantIDFromUserID(f));c!=null||j(0);c.is_messenger_blocked&&(e=!0)}if(d)if(e)return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i._param("unblock_now_button",b("React").createElement(m,{label:i._("Unblock Now"),onClick:this.$51,type:"secondary"}))])));else return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("This person isn't available right now.")));return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},b("MercuryReadOnlyReason").getReason(a.has_email_participant)))};a.prototype.$52=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};a.prototype.$54=function(){var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;if(a){var c=b("MessengerURIStore").getState().activeThreadID===a;this.$52().changeFolder(a,"other");c&&b("MessengerActions").selectThread(null)}};a.prototype.$56=function(){b("MessengerDialogs.bs").removeDialog()};a.prototype.$55=function(a){var c=this.props.threadID,d=c===b("MessengerURIStore").getState().activeThreadID;this.$52().blockIgnoreOnMessengerDotCom(d,c,function(){this.$57(a)}.bind(this))};a.prototype.$57=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};a.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};a.prototype.$11=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};a.prototype.$37=function(){return!!(this.$11()&&this.props.recipients&&this.props.recipients.size)};a.prototype.$35=function(){return!!this.$4()};a.prototype.$4=function(){return b("getPageIDFromThreadID")(this.props.threadID)};a.prototype.$5=function(){var a=this.$4();a?b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({showMenu:a})}.bind(this),function(){this.setState({showMenu:!1})}.bind(this),b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};a.prototype.$6=function(){var a=this.$4();a?b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({disableInput:a})}.bind(this),function(){this.setState({disableInput:!1})}.bind(this),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};a.prototype.$3=function(a,c){a=a===0;var d=!!c;if(d&&a){d=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(d.getURI()).setMethod("POST").setData({page_id:c}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()}else this.setState({showNullState:!1,disableNullState:!1})};a.prototype.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};a.prototype.$47=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};a.prototype.testUtils_renderRawP2PSendMoneyButton=function(){return this.$34()};a.prototype.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};a.propTypes={canReply:c.bool,disableAutofocus:c.bool,fileUploader:c.object,hideActions:c.bool,mentionsEnabled:c.bool,onCustomLikeSelect:c.func,onMessageSend:c.func,onPhotoUploadComplete:c.func,onPhotoUploadCancel:c.func,onPhotoUploadFail:c.func,onPhotoUploadSubmit:c.func,onResize:c.func,onStickerSelect:c.func.isRequired,onVoiceClipCreate:c.func,p2pPaymentConfig:c.object,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func};e.exports=a}),null);
__d("MessengerEmojiUsageUtils",["MessengerSupportedEmojiUtils","Utf16"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=65039;a={findAllEmojis:function(a){__p&&__p();var c=[];a=b("MessengerSupportedEmojiUtils").parse(a);a.forEach(function(a){var d=[];a.emoji.forEach(function(a){a=b("Utf16").decode(a);a&&d.push(a)});d[d.length-1]===g&&d.pop();c.push(d)});return c}};e.exports=a}),null);
__d("MessengerComposerContainer.react",["fbt","AsyncUploadRequest","EmojiDispatcher","EmojiLikeUtils","EmojiState","immutable","KeyEventController","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MercuryThreads","MercuryTriodeSourceUtil","MessageRequestUtils","MessengerActions","MessengerComposer.react","MessengerComposerActions","MessengerDialogs.bs","MessengerEmojiUsageUtils","MessengerSimpleDialogReact.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","SubscriptionsHandler","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerSimpleDialogReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$7=function(a,c,d){__p&&__p();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!this.props.canReply){d&&d(null);return!1}var e=null,f=!1;this.$14(a,c)||(f=this.$15(function(d){var f=this.$2.constructUserGeneratedMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d);d=b("MercuryIDs").getUserIDFromThreadID(d);if(b("MNPlatformTagsDataManager").hasThreadTags(d)){d=b("MNPlatformTagsDataManager").getThreadTags();f.tags=d}c&&(c.shareable_attachment&&(f.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(f.profile_ranges=f.profile_xmd=c.profile_ranges));e=f;return f}.bind(this)));d&&d(f?e:null);e=null;return f}.bind(this),this.$9=function(a,b){this.$3.cancelAttachmentPlaceholder(b.upload_id,b)}.bind(this),this.$8=function(a,b){this.$3.confirmAttachmentPlaceholder(b.upload_id,b)}.bind(this),this.$10=function(a,b){this.$3.cancelAttachmentPlaceholder(b.upload_id,b);a=g._("Upload failed");var c=g._("Please try again. Make sure you are uploading a valid file.");b.errorDialogParams&&(a=b.errorDialogParams.title||a,c=b.errorDialogParams.body||c);this.$16(a,c)}.bind(this),this.$11=function(a,c){this.$15(function(a){return this.$2.constructAttachmentMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a)}.bind(this),function(a){this.$3.addAttachmentPlaceholder(a,c.upload_id,c),this.handleMessageSentToPendingThread()}.bind(this))}.bind(this),this.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();this.$1.sendAttachment(this.props.threadID,j(c),b("MercuryTriodeSourceUtil").getMercuryTriodeSource());var d={};d[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(this)).setData({voice_clip:!0}).setFiles(d);this.$4.addSubscriptions(c.subscribe("success",function(a,b){return this.$17(b)}.bind(this)));c.send()}.bind(this),this.$12=function(a){return this.$15(function(c){return this.$2.constructStickerMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c)}.bind(this))}.bind(this),this.$13=function(a,c,d){var e=this.props.threadID,f=this.$2.constructUserGeneratedMessageObject(a.emoji,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),e);f.has_attachment=!1;return this.$15(function(a){b("EmojiLikeUtils").setEmojiSize(f,c);return b("EmojiLikeUtils").setEmojiSource(f,d)})}.bind(this),this.handleMessageSentToPendingThread=function(){this.props.thread&&b("MessageRequestUtils").isMessageRequest(this.props.thread)&&b("MercuryThreadActions").getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID)}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer),this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer),this.$5=b("MercuryThreads").getForFBID(this.props.viewer),this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer),this.$6=b("MercuryThreadInformer").getForFBID(this.props.viewer),this.$4=new(b("SubscriptionsHandler"))(),b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]),this.props.onMount&&this.props.onMount(this),this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){this.props.replyingToMessage&&(this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage())}.bind(this),function(event,a){return!!(event.key==="Escape"&&b("KeyEventController").filterEventTypes(event,a)&&b("KeyEventController").filterEventModifiers(event,a))}))};a.prototype.componentWillUnmount=function(){this.$4.release()};a.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};a.prototype.render=function(){return b("React").createElement(b("MessengerComposer.react"),{canReply:this.props.canReply,fileUploader:this.props.fileUploader,hideActions:this.props.showMinimalForRTC,mentionsEnabled:!0,onMessageSend:this.$7,onPhotoUploadComplete:this.$8,onPhotoUploadCancel:this.$9,onPhotoUploadFail:this.$10,onPhotoUploadSubmit:this.$11,onResize:this.props.onResize,onStickerSelect:this.$12,onCustomLikeSelect:this.$13,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(a){return this.refsComposer=a}.bind(this),sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer})};a.prototype.$14=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};a.prototype.$17=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};a.prototype.handleFileUpload=function(a){a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return this.handleAudioUpload(a)}.bind(this));this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};a.prototype.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};a.prototype.$15=function(a,c){__p&&__p();var d=this.props.threadID,e=this.props.recipients,f=!1;!d&&e&&e.size>1&&(d=b("MercuryLocalIDs").generateThreadID(),f=!0);if(!d)return!1;a=a(d);if(f){f=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();this.$5.createNewLocalThread(d,f.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=f}if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MercuryMessages").get().getMessagesFromIDs([this.props.replyingToMessage.message_id]);a.replied_to_message=e.length>0?e[0]:null;this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$6.subscribeOnce("messages-updated",function(a,c){a=b("MercuryThreadIDMap").get();a.canLinkExternally(d)&&b("MessengerActions").selectThread(d)}):b("MessengerActions").selectThread(d));this.focusInput();return!0};a.prototype.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};a.prototype.$16=function(a,c){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{title:a,body:c})})};a.propTypes={canReply:c.bool,fileUploader:c.object,onMount:c.func,onResize:c.func,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,showMinimalForRTC:c.bool,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func};function j(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:b("MercuryAttachmentType").PHOTO,preview_uploading:!0}]}}e.exports=a}),null);
__d("MessengerBlockedGroupThreadWarningDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","CacheStorage","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group."),i=g._("See Conversation?"),j=g._("Cancel"),k=g._("Leave Group"),l=g._("See Conversation"),m=new(b("CacheStorage"))("localstorage");function a(a){return"see_blocked_group:"+a}function c(a,b){m.set("see_blocked_group:"+a,b,!0);return 0}function d(a){return m.get("see_blocked_group:"+a,!1)}var n=b("ReasonReact.bs").statelessComponent("MessengerBlockedGroupThreadWarningDialogReact");function o(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function p(a,c,d,e,f){__p&&__p();var g=function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("MessengerDialogs.bs").removeDialog(0)},m=function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("MessengerDialogs.bs").removeDialog(0)},p=function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("MessengerDialogs.bs").removeDialog(0)};return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,o,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,i)))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[h])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[j],0,0,[p],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[k],0,0,[m],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[l],0,["danger"],[g],[0],0,0,[]))]))]))},n[9],n[10],n[11],n[12]]}e=b("ReasonReact.bs").wrapReasonForJs(n,function(a){return p(a.onSee,a.onLeave,a.onCancel,a.prevThreadID,[])});f.bodyText=h;f.titleText=i;f.cancelText=j;f.leaveText=k;f.seeConvoText=l;f.storage=m;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=n;f.handleToggle=o;f.make=p;f.jsComponent=e}),null);
__d("MessengerIgnoredGroupThreadWarningDialogReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","CacheStorage","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("People you've ignored are in this group."),j=h._("If you ignore this group, you can find it in Filtered Messages."),k=h._("Ignore group?"),l=h._("Cancel"),m=h._("Ignore Group"),n=h._("See Group"),o=new(b("CacheStorage"))("localstorage");function a(a){return"see_ignored_group:"+a}function c(a,b){o.set("see_ignored_group:"+a,b,!0);return 0}function d(a){return o.get("see_ignored_group:"+a,!1)}var p=b("ReasonReact.bs").statelessComponent("MessengerIgnoredGroupThreadWarningDialogReact");function q(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function r(a,c,d,e,f,g){__p&&__p();var h=function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("MessengerDialogs.bs").removeDialog(0)},o=function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("MessengerDialogs.bs").removeDialog(0)},r=function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("MessengerDialogs.bs").removeDialog(0)};return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){var a=new(b("IgnoreMessagesTypedLogger"))().setEvent("group_with_ignored_person_warning").setThreadID(f).setPlatform("messengerdotcom");a.log();return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,q,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[k])))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",undefined,i),b("React").createElement("div",{className:"_3-8x"},j)])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[l],0,0,[r],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[n],0,0,[h],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[m],0,["danger"],[o],[0],0,0,[]))]))]))},p[9],p[10],p[11],p[12]]}e=b("ReasonReact.bs").wrapReasonForJs(p,function(a){return r(a.onSee,a.onIgnore,a.onCancel,a.prevThreadID,a.threadID,[])});f.bodyTextPeopleInGroup=i;f.bodyTextEffects=j;f.titleText=k;f.cancelText=l;f.ignoreText=m;f.seeConvoText=n;f.storage=o;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=p;f.handleToggle=q;f.make=r;f.jsComponent=e}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerServerErrorDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerServerErrorDialog");function i(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}var j=g._("An unexpected problem was encountered. Please try again later."),k=g._("Temporary Failure");function l(a,c){return[h[0],h[1],h[2],h[3],function(){return b("bs_curry")._1(a,0)},h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,i,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,k)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[j])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([0],[g._("OK")],0,0,0,[0],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return l(a.onMount,[])});f.component=h;f.handleToggle=i;f.message=j;f.title=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","immutable","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryMessageStore","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadActions").get(),i=b("MessengerServerErrorDialogReact.bs").jsComponent;c=b("React").PropTypes;var j=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,k=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},this.$2=undefined,this.$3=!1,this.$4=undefined,this.$5=undefined,this.$6=undefined,this.$7=!1,this.$15=function(){var a=this.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)}.bind(this),this.$18=function(){var a=this.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)}.bind(this),this.$16=function(a){var c=this.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,this.props.viewer);this.$20(a)}.bind(this),this.$19=function(a){var c=this.props.thread;if(c==null)return;var d=c.thread_id;h.changeFolder(d,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,e){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setPlatform(e.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");this.$20(a)}.bind(this),this.$17=function(a){this.$20(a)}.bind(this),this.$13=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:!0});this.$1.fetchMoreMessages()||this.setState({isLoading:!1,isLoaded:!0})}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$2&&this.$2.release(),clearTimeout(this.$6)};a.prototype.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};a.prototype.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};a.prototype.render=function(){var a=this.state.messages;a=a.some(function(a){return a.log_message_type===b("MercuryLogMessageType").SERVER_ERROR});b("MessengerConfig").ErrorDialog&&a&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{onMount:function(){return this.$7=!0}.bind(this)})}.bind(this));return b("React").createElement(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryReceipts:this.props.deliveryReceipts,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,participants:this.props.participants,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};a.prototype.handleResize=function(){this.refs.conversation.handleResize()};a.prototype.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};a.prototype.$9=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$14())return!1;var d=!1;b("MessengerState.bs").compute(this.props.viewer,function(c){c=c.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(this.props.viewer,c,a)&&(d=!0)}.bind(this));if(!d)return!1;c=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(c);return c?!1:!0};a.prototype.$11=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$14())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(b("MessengerState.bs").fbid(this.props.messengerState),b("MessengerState.bs").ignoredIds(this.props.messengerState),a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:b("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U")};a.prototype.$14=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};a.prototype.$10=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onSee:this.$15,onLeave:this.$16,onCancel:this.$17,prevThreadID:a})}.bind(this))};a.prototype.$12=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{onSee:this.$18,onIgnore:this.$19,onCancel:this.$17,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)})}.bind(this))};a.prototype.$20=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};a.prototype.$8=function(a){__p&&__p();if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,b("MessengerConfig").MessageLoadCount);clearTimeout(this.$6);this.$6=setTimeout(function(){this.props.thread&&this.props.thread.message_count<1&&this.setState({isLoaded:!0,isLoading:!1})}.bind(this),6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){this.setState({messages:this.$21(b("immutable").List(a.messages)),isLoading:!1})}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a){this.$3=!0,this.$4=a,this.setState({messages:this.$21(this.state.messages)}),clearInterval(this.$5),this.$5=setInterval(this.refs.conversation.scrollToBottom,50)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){clearInterval(this.$5)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){clearInterval(this.$5)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){this.$3=!1,this.$4=null}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){this.$3=!1,this.$4=null}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){clearInterval(this.$5),this.$3=!1,this.setState({messages:this.$21(this.state.messages)})}.bind(this)))};a.prototype.$21=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};a.propTypes={contact:c.instanceOf(b("ImmutableObject")),deliveryReceipts:c.object,readReceipts:c.object.isRequired,messengerState:c.any,onMarkRead:c.func.isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map),thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerDetailViewHeaderContainer.react",["immutable","ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerView","React","shallowEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerDetailViewHeaderReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){var c=a.getUniqueID(),d=a.getType(),e=a.getAuxiliaryData()||{};if(d===b("MercuryTypeaheadConstants").THREAD_TYPE){var f=b("MercuryThreadIDMap").getForFBID(this.props.viewer);f.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else c===this.props.viewer&&this.props.recipients.size===0||d===b("MercuryTypeaheadConstants").PAGE_TYPE||d===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE&&!e.canViewerAddToGroupChat?(b("MessengerComposerActions").moveDraftToNextThread(b("MercuryIDs").getThreadIDFromUserID(c)),b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))):b("MessengerComposerActions").addToken(a)}.bind(this),this.$2=function(a){b("MessengerComposerActions").removeToken(a)},c}a.prototype.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutProperties(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutProperties(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};a.prototype.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("React").createElement(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser}):b("React").createElement(h,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})};a.propTypes={contactData:c.object,infoPanelCollapsed:c.bool.isRequired,onInfoPanelToggle:c.func.isRequired,onResize:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,thread:c.instanceOf(b("ImmutableObject")),view:c.string,viewer:c.string.isRequired,isWorkUser:c.bool.isRequired};e.exports=a}),null);
__d("MessengerGraphQLTokenizerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerGraphQLTokenizer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGraphQLTokenizer.react"),{autoFocus:a,className:b("bs_js_null_undefined").fromOption(c),context:b("bs_js_null_undefined").fromOption(d),defaultEntries:b("bs_js_null_undefined").fromOption(e),enableMessageSearch:f,includeExistingParticipantIDs:g,entries:h,excludeGroups:i,excludePages:j,forGroup:b("bs_js_null_undefined").fromOption(k),forceHideClearButton:b("bs_js_null_undefined").fromOption(l),hasHoverState:m,onAddEntryAttempt:n,onClear:b("bs_js_null_undefined").fromOption(o),onRemoveEntryAttempt:p,originalEntryIDs:q,placeholder:r,roomAssociatedObject:b("bs_js_null_undefined").fromOption(s),scrollableViewClassName:b("bs_js_null_undefined").fromOption(t),shouldQueryInternalBot:u,shouldQueryVCEndpoint:v,tabIndex:b("bs_js_null_undefined").fromOption(w),threadFBID:b("bs_js_null_undefined").fromOption(x),useLayer:y,viewer:z,width:A},B)}f.make=a}),null);
__d("MessengerAddToConversationDialogReact.bs",["cx","fbt","FBID.bs","bs_block","bs_curry","React","immutable","bs_belt_Array","MercuryIDs","bs_pervasives","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MercuryMessageObject","MessengerDialogReact.bs","MercuryLogMessageType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","MessengerGraphQLTokenizerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){if(typeof a==="number")return b("bs_block").__(0,[[b("immutable").List([])]]);else if(a.tag){var d=a[0];return b("bs_block").__(0,[[c[0].filter(function(a){return a.getUniqueID()!==d})]])}else return b("bs_block").__(0,[[c[0].push(a[0])]])}var j=b("ReasonReact.bs").reducerComponent("MessengerAddToConversationDialogReact");function k(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function l(a,c,d){__p&&__p();var e=function(d,e){__p&&__p();e=e[1];var f=e[0].count(),g=b("MessengerAdminGroupUtils").isJoinableThread(a),h=b("MessengerAdminGroupUtils").shouldInvite(a),i=0;if(f!==0)if(g)h?e[0].forEach(function(e,d,f){d=b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(e.getUniqueID()));b("MercuryMessageActions").getForFBID(c).send(b("MercuryMessageObject").getForFBID(c).constructUserGeneratedMessageObject(a.joinable_mode.link,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d,[]),undefined,undefined);return!0}):i=1;else if(h)throw b("bs_pervasives").invalid_arg("Only joinable threads can invite");else i=1;i===1&&b("MercuryMessageActions").getForFBID(c).send(b("MercuryMessageObject").getForFBID(c).constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,b("MercuryLogMessageType").SUBSCRIBE,{added_participants:e[0].map(function(c,a,d){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(c.getUniqueID()))}).toArray()}),undefined,undefined);d.preventDefault();return b("MessengerDialogs.bs").removeDialog(0)};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(d){var f=b("MessengerAdminGroupUtils").shouldInvite(a),g=b("immutable").Set(b("bs_belt_Array").keepMap(a.participants,function(a){return b("bs_js_primitive").null_undefined_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a))}));return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,k,0,[!0],0,["default"],[460],[b("React").createElement("div",{className:"_4jgp"},b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[f?h._("Invite More People"):h._("Add More People")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Done")],0,0,[b("bs_curry")._1(d[0],e)],[0],0,0,[]))])),b("ReasonReact.bs").element(0,0,b("MessengerGraphQLTokenizerReact.bs").make(!0,["_4jgt"],0,0,!1,b("MessengerAdminGroupUtils").useNewGroupMemberSuggestionRanking(),d[1][0],!0,!b("MessengerAdminGroupUtils").canSeeBotsInGroupTypeahead(),[!0],[!0],!1,function(a){return b("bs_curry")._1(d[3],b("bs_block").__(0,[a]))},[function(){return b("bs_curry")._1(d[3],0)}],function(a){return b("bs_curry")._1(d[3],b("bs_block").__(1,[a.getUniqueID()]))},g,f?h._("Invite to group:"):h._("Add to group:"),b("bs_js_primitive").null_undefined_to_opt(a.associated_object),["_4jgu"],!1,!1,0,b("bs_js_primitive").null_undefined_to_opt(a.thread_fbid),!1,c,460,[])))]))},function(){return[b("immutable").List([])]},j[10],i,j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return l(a.thread,a.viewer,[])});c=460;f.reducer=i;f.component=j;f.dialogWidth=c;f.handleToggle=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerInfoPanelSectionReact.bs",["cx","Keys.bs","bs_curry","React","Utils.bs","ReasonReact.bs","bs_js_primitive","CustomColorHighlightingReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSectionReact");function i(a,c){if(a&&a[0]&&c)if(c[0])return b("React").createElement("div",{className:"_1lj1 _3vo-",role:"button",tabIndex:0});else return b("React").createElement("div",{className:"_1lj1",role:"button",tabIndex:0});else return null}function j(a,c,d,e){__p&&__p();var f=function(){if(d)return b("bs_curry")._1(d[0],0);else return 0},g=function(a){a.preventDefault();return f(0)},h=function(a){if(a.keyCode===b("Keys.bs").$$return||a.keyCode===b("Keys.bs").space){a.preventDefault();return f(0)}else return 0},j=a&&a[0]&&!(c&&c[0])?!0:!1;if(e)return b("React").cloneElement(b("React").createElement("h4",{"aria-expanded":j,className:"_1lj0",onKeyDown:h,onClick:g},e[0],i(a,c)),{"aria-pressed":"true"});else return null}function k(a,c,d,e,f,g){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("React").createElement("div",{className:"_1lix"+(b("Utils.bs").isSomeTrue(c)?" _1liy":"")+(b("Utils.bs").isSomeTrue(c)&&b("Utils.bs").isSomeTrue(d)?" _1liz":"")},b("React").createElement("div",{className:"_1li-"}),j(c,d,e,f),b("React").createElement("div",{className:"_1li_"},b("ReasonReact.bs").element(0,0,b("CustomColorHighlightingReact.bs").make(a,g))))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return k(b("bs_js_primitive").null_undefined_to_opt(a.customColor),b("bs_js_primitive").null_undefined_to_opt(a.isCollapsible),b("bs_js_primitive").null_undefined_to_opt(a.isCollapsed),b("bs_js_primitive").null_undefined_to_opt(a.onToggle),b("bs_js_primitive").null_undefined_to_opt(a.title),a.children)});f.component=h;f.renderChevron=i;f.renderHeader=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessageThreadAssociatedObjectKey","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.isCollapsed,d=a.onToggle,e=a.associatedObject;a=a.customColor;e=e[b("MessageThreadAssociatedObjectKey").ACTION_LINK];return b("React").createElement(j,{customColor:a,isCollapsible:!0,isCollapsed:c,onToggle:d,title:h._("Part of")},b("React").createElement(b("Link.react"),{href:e,target:"_blank",style:{textDecoration:"none"},className:"_35-k"},this.$1(),this.$2()))};a.prototype.$1=function(){var a=this.props.associatedObject;a=a[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE];return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_35-n",src:a}))};a.prototype.$2=function(){var a=this.props.associatedObject,c=a[b("MessageThreadAssociatedObjectKey").NAME];a=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];var d=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_35-o"},b("React").createElement("div",{className:"_35-p"},c),b("React").createElement("div",{className:"_35-q"},h._({"EVENT":"Go to {productName} Event","GROUP":"Go to {productName} Group"},[h._param("productName",d),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))])))};function a(){i.apply(this,arguments)}a.propTypes={isCollapsed:c.bool.isRequired,onToggle:c.func.isRequired,customColor:c.string,associatedObject:c.instanceOf(Object).isRequired};e.exports=a}),null);
__d("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1574519202665847"};c.getQueryID=function(){"use strict";return"337579896759283"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerContactImageReact.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerGroupRequestSource","MessengerTextWithEmoticons.react","React","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=b("MessengerContactImageReact.bs").jsComponent,l=32;function m(a,c){__p&&__p();if(!a||c===null)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));a=a&&a.name;if(!a)return null;if(c===b("MessengerGroupRequestSource").ADD)return h._("Added by {inviter}.",[h._param("inviter",a)]);else if(c===b("MessengerGroupRequestSource").JOIN_THROUGH_LINK)return h._("Invited by {inviter}.",[h._param("inviter",a)]);return null}function n(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser;a=a.requestSource;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});e=m(e,a);a=e?b("React").createElement("span",{className:"_4e87"},b("React").createElement("div",null,c),b("React").createElement("div",{className:"_4egt"},e)):b("React").createElement("span",{className:"_3tkx"},c);return b("React").createElement("div",{className:"_3szq _4fq"},b("React").createElement(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:l,src:d}),a)}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID;a=a.requestSource;c=c?h._("Approve"):h._("Accept");return b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement(n,{name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:a}),b("React").createElement("div",{className:"_3ihq _4fs"},b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$1.bind(this)},c),b("React").createElement("span",{className:"_1m8c"}),b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$2.bind(this)},h._("Ignore"))))};a.prototype.$1=function(event){var a=this.props,c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):j.acceptToJoinableGroup(d,a)};a.prototype.$2=function(event){var a=this.props,c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):j.rejectToJoinableGroup(d,a)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","immutable","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerApprovalRequester.react","MessengerInfoPanelSectionReact.bs","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.state={approvalQueue:b("immutable").Map()}}a.prototype.componentDidMount=function(){this.$1(this.props.thread)};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(k,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:h._("Group Options")},b("React").createElement("div",{className:"_3iho"},this.$2(),this.$3())),this.$4())};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread)};a.prototype.$1=function(a){__p&&__p();var c=this;if(!a)return;b("MessengerAdminGroupUtils").isAdminRequired(a)?(function(){var d=a.group_approval_queue&&a.group_approval_queue.map(function(a){return[b("MercuryIDs").getParticipantIDFromUserID(a.requester.id),a]}),e=d&&new Map(d);e&&b("MessengerParticipants.bs").getMulti(Array.from(e.keys()),function(a){a=Object.values(a);a=a;this.setState({approvalQueue:b("immutable").Map(a.map(function(a){return[a.id,this.$5(a,e)]}.bind(this)))})}.bind(c))})():a.approval_queue_ids&&b("MessengerParticipants.bs").getMulti(a.approval_queue_ids,function(a){this.setState({approvalQueue:b("immutable").Map(a)})}.bind(this))};a.prototype.$5=function(a,b){b=b.get(a.id);return{fbid:a.fbid,id:a.id,image_src:a.image_src,is_messenger_user:!!a.is_messenger_user,name:a.name,inviter_id:b&&b.inviter.id,requester_id:b&&b.requester.id,request_source:b&&Number(b.request_source),request_timestamp:b&&b.request_timestamp}};a.prototype.$2=function(){var a=this.props.thread,c=a.joinable_mode.link;return!b("MessengerAdminGroupUtils").showJoinableLink(a)?null:b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szq"},h._("Share the link"),b("React").createElement("div",{className:"_3ihp _3oh-"},c)))};a.prototype.$3=function(){var a=this.props,c=a.viewer,d=a.thread;a=b("MessengerAdminGroupUtils").isApprovalOpenThread(d);if(!b("MessengerAdminGroupUtils").showJoinableApprovalToggle(d,c))return null;c=b("MessengerAdminGroupUtils").canSeeAdminV2Feature(d);var e=c?h._("Require Admin Approval"):h._("New member approval"),f=c?null:b("React").createElement("div",{className:"_3ihp"},h._("Approve who can join the group"));return b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szq"},e,f),b("React").createElement("div",{className:"_3ihq"+(c?" _4e3w":"")},b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,"aria-label":e,checked:!a,onToggle:function(a){return j.setApprovalMode(a?b("MessengerApprovalModeTypes").APPROVALS:b("MessengerApprovalModeTypes").OPEN,d)}})))};a.prototype.$4=function(){var a=this.props,c=a.viewer,d=a.thread,e=d.thread_fbid;if(!e||!b("MessengerAdminGroupUtils").showApprovalQueue(d,c))return null;a=b("MessengerAdminGroupUtils").getPendingRequestNumber(d);c=b("MessengerAdminGroupUtils").isAdminRequired(d)?h._("Member Requests ({memberRequestCount})",[h._param("memberRequestCount",a)]):h._("Pending Requests ({pendingRequestCount})",[h._param("pendingRequestCount",a)]);return b("React").createElement(k,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:c},b("React").createElement("div",{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(a){return a.fbid&&b("React").createElement(b("MessengerApprovalRequester.react"),{key:a.id,imageSRC:a.image_src,inviterFBID:a.inviter_id,requestSource:a.request_source,isAdminRequired:b("MessengerAdminGroupUtils").isAdminRequired(d),isMessengerUser:a.is_messenger_user,name:a.name,threadFBID:e,userFBID:a.fbid})}).toArray()))};e.exports=a}),null);
__d("MercuryGenericConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MAX_THREAD_NAME_LENGTH:250,MAX_GROUP_THREAD_DESCRIPTION_LENGTH:1e3})}),null);
__d("createContentStateForTextWithMessengerEmoji",["ContentState","DraftModifier","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("ContentState").createFromText("");while(a){var d=b("MessengerSupportedEmojiUtils").getEmojiMatchObj(a);if(d){var e=d.offset+d.length,f=a.substr(0,d.is_supported?d.offset:e);e=a.substr(e);c=b("DraftModifier").insertText(c,c.getSelectionAfter(),f);d.is_supported&&(c=b("insertMessengerEmojiIntoContentState")(d.emoji_key,c,c.getSelectionAfter(),c.getFirstBlock().getInlineStyleAt(0)));a=e}else break}a&&(c=b("DraftModifier").insertText(c,c.getSelectionAfter(),a));return c}e.exports=a}),null);
__d("handlePastedTextForMessengerEmoji",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){c=c-a;a=e.getSelection();a.isCollapsed()||(c+=1+a.getEndOffset()-a.getStartOffset());if(c<=0)return e;d=d.slice(0,c);c=a.isCollapsed()?b("DraftModifier").insertText(e.getCurrentContent(),a,d,e.getCurrentInlineStyle()):b("DraftModifier").replaceText(e.getCurrentContent(),a,d,e.getCurrentInlineStyle());return b("EditorState").push(e,c,"insert-characters")}e.exports=a}),null);
__d("MessengerTextWithEmojiInput.react",["cx","CompositeDraftDecorator","DraftEditor.react","EditorState","MessengerEmojiSpan.react","React","XUICloseButton.react","createContentStateForTextWithMessengerEmoji","getEntityMatcher","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handlePastedTextForMessengerEmoji","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$6=function(a){if(a!==this.state.editorState){var b=!a.getCurrentContent().hasText();this.setState({editorState:a,isEmpty:b});this.props.onChange&&this.props.onChange(a)}}.bind(this),this.$2=function(){return new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"}),component:b("MessengerEmojiSpan.react")}])},this.focusInput=function(){this.refs.input.focus(),this.$6(b("EditorState").moveFocusToEnd(this.state.editorState))}.bind(this),this.$3=function(a,c){if(this.props.maxLength&&this.props.maxLength<=this.getValue().length&&c.getSelection().isCollapsed())return"handled";a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return"not-handled";this.setState({editorState:a});return"handled"}.bind(this),this.$4=function(a,c,d){c=this.props.maxLength;if(c){c=b("handlePastedTextForMessengerEmoji")(this.getValue().length,c,a,d);this.setState({editorState:c});return"handled"}return"not-handled"}.bind(this),this.$5=function(a,b){if(this.props.onReturn){this.props.onReturn(a,b);return"handled"}return"not-handled"}.bind(this),this.$8=function(){this.setState({editorState:this.$1("")})}.bind(this),this.state={editorState:this.$1(this.props.initialValue),isEmpty:!this.props.initialValue||this.props.initialValue.length===0},c}a.prototype.$1=function(a){return b("EditorState").createWithContent(b("createContentStateForTextWithMessengerEmoji")(a||""),this.$2())};a.prototype.componentDidMount=function(){this.focusInput()};a.prototype.render=function(){var a=this.props.placeholder&&this.props.placeholder.toString();return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_30e7")},b("React").createElement("div",{className:"_5j5f _3oh-"},b("React").createElement(b("DraftEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$3,handlePastedText:this.$4,handleReturn:this.$5,onChange:this.$6,placeholder:a,ref:"input",spellCheck:!1,stripPastedStyles:!0,textAlignment:"left"})),this.props.showLengthIndicator&&this.props.maxLength?this.$7():null,b("React").createElement(b("XUICloseButton.react"),{size:"small",onMouseDown:this.$8,className:(this.state.isEmpty?"hidden_elem":"")+" _5j5l"}))};a.prototype.$7=function(){return this.getValue().length!==0?b("React").createElement("div",{className:"_32y6"},this.getValue().length,"/",this.props.maxLength):b("React").createElement("div",{className:"_32y6"})};a.prototype.getValue=function(){var a=this.state.editorState.getCurrentContent();return b("getVisibleValueForContentStateWithMessengerEmoji")(a)};a.propTypes={onReturn:c.func,maxLength:c.number,onChange:c.func,placeholder:c.node,initialValue:c.string,showLengthIndicator:c.bool};e.exports=a}),null);
__d("MessengerTextWithEmojiInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmojiInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmojiInput.react"),{className:b("bs_js_null_undefined").fromOption(a),onReturn:b("bs_js_null_undefined").fromOption(c),maxLength:b("bs_js_null_undefined").fromOption(d),onChange:b("bs_js_null_undefined").fromOption(e),placeholder:b("bs_js_null_undefined").fromOption(f),initialValue:b("bs_js_null_undefined").fromOption(g),showLengthIndicator:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerEditGroupThreadDescriptionDialogReact.bs",["cx","fbt","bs_curry","React","bs_string","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MercuryGenericConstants","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerEditGroupThreadDescriptionDialogReact");function j(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{d&&b("bs_curry")._1(d[0],0);return b("MessengerDialogs.bs").removeDialog(0)}},g=function(d,e){d=e[1][0][0];if(d){e=b("bs_string").trim(d[0].getValue());d=e===a;d||c&&b("bs_curry")._1(c[0],e)}return f(!1)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){var d=b("ReasonReact.bs").element(0,[b("bs_curry")._1(c[0],j)],b("MessengerTextWithEmojiInputReact.bs").make(["_1n7c"],0,[b("MercuryGenericConstants").MAX_GROUP_THREAD_DESCRIPTION_LENGTH],0,[h._("What's this group about?")],[a],[!0],[]));return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_1cyb"],f,0,0,0,0,[500],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,h._("Edit Group Description"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(["_3yb4"],[b("React").createElement("div",{className:"_1cyc"},h._("Anyone with the group link will be able to see this description.")),d])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Save")],0,0,[b("bs_curry")._1(c[0],g)],[0],0,0,[]))]))]))},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setDescriptionInputRef=j;f.make=a}),null);
__d("MessengerTextWithEmoticonsReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmoticons.react"),{renderEmoji:b("bs_js_null_undefined").fromOption(a),renderEmoticons:b("bs_js_null_undefined").fromOption(c),text:b("bs_js_null_undefined").fromOption(d),customSize:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs",["cx","fbt","Keys.bs","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs","LitestandEllipsis","MessengerTextWithEmoticonsReact.bs","MessengerEditGroupThreadDescriptionDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelGroupThreadDescriptionSectionReact");function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}function l(a,b){b[1][1][0]=a==null?0:[a];return 0}function a(a,c,d,e){__p&&__p();e=d.description;var f=e==null?"":e,g=function(a){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditGroupThreadDescriptionDialogReact.bs").make(f,[c],[b("bs_curry")._1(a,j)],[]))})},m=function(a,b){a.preventDefault();return g(b[0])},n=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return g(c[0])}else return 0};e=d.description;d=e==null?[h._("What's this group about?"),!0]:[b("ReasonReact.bs").element(0,0,b("MessengerTextWithEmoticonsReact.bs").make(0,0,[e],0,[])),!1];var o=d[1],p=d[0];return[i[0],i[1],i[2],i[3],i[4],function(a){a=a[1][1][1][0];if(a){b("LitestandEllipsis").add(a[0],65,null);return 0}else return 0},i[6],i[7],function(c){return b("React").createElement("div",{className:"_69d_"},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:"_69e0"+(a?"":" disabled"),role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],n),onClick:b("bs_curry")._1(c[0],m)},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],l),className:"_69e1 _69e2"+(o?" _69e3":"")},p)))},function(){return[[0],[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.handleDialogClose=j;f.setDescriptionRef=k;f.setDescriptionTextRef=l;f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelSectionReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelGroupThreadDescriptionSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelGroupThreadDescriptionContainerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(f){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var g=b("MessengerAdminGroupUtils").canUpdateThreadDescription(d,e),i=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeGroupThreadDescription(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}};g=b("React").createElement("div",{className:"_4izw"},b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs").make(g,b("bs_curry")._1(f[0],i),d,[])));return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(d.solid_color),[!0],[a],[c],[h._("Group Description")],[g]))}},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.isCollapsed,a.onToggle,a.thread,a.viewer,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerInfoPanelContactNameSectionReact.bs",["cx","React","ReasonReact.bs","bs_js_primitive","MessengerProfileLink.bs","MessengerLocalTimeReact.bs","MessengerPresenceStatusReact.bs","MessengerProfileLinkLocation"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelContactNameSectionReact");function a(a,c,d,e,f,g){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var g=a.title;return b("React").createElement("div",{className:"_2jnq"},f,b("React").createElement("div",{className:"_2jnt"},b("React").createElement("div",{className:"_3eur"},b("React").createElement("span",{className:"_3oh-"},b("ReasonReact.bs").element(0,0,b("MessengerProfileLink.bs").make(b("bs_js_primitive").null_undefined_to_opt(a.href),b("MessengerProfileLinkLocation").INFOPANEL,a.name,a.fbid,[])))),g==null?null:b("React").createElement("span",{className:"_3eus"},g),b("React").createElement("div",{className:"_3eus"},b("ReasonReact.bs").element(0,0,b("MessengerPresenceStatusReact.bs").make(0,c,d,e,[]))),b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("MessengerLocalTimeReact.bs").make("_5uh",b("bs_js_primitive").null_undefined_to_opt(a.timezone),[])))))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","FileInput","FileInputUploader","Link.react","MercuryConfig","React","ReactDOM","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:a.func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a=h._("Click to change the image");return b("React").createElement("form",{action:this.props.uri,method:"post",ref:"form"},b("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),b("React").createElement("input",{type:"hidden",name:"images_only",value:"true"}),b("React").createElement("div",{className:"_m _4q60 _2lyy"},b("React").createElement(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton"},h._("edit")),b("React").createElement("input",{type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:a})))},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerThreadPhotoUploaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerThreadPhotoUploader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadPhotoUploader.react"),{onComplete:a,onFail:b("bs_js_null_undefined").fromOption(c),onStart:b("bs_js_null_undefined").fromOption(d),uri:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerInfoPanelThreadNameSectionReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","bs_string","ReasonReact.bs","setImmediate","MessengerButtonReact.bs","MessengerSpinnerReact.bs","MercuryGenericConstants","MercuryThreadTitleReact.bs","MessengerTextWithEmojiInputReact.bs","MessengerThreadPhotoUploaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,b){a=b[1][1][0];if(a)return a[0].focusInput();else return 0}function j(){return b("React").createElement("div",{className:"_2jnw"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])))}function k(a,b){a=b[1][2][0];if(a)return a[0].focus();else return 0}function l(a,b){b[1][1][0]=a==null?0:[a];return 0}function m(a,b){b[1][2][0]=a==null?0:[a];return 0}var n=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelThreadNameSectionReact");function a(a,c,d,e,f,g,o,p,q){__p&&__p();var r=function(a,d){a.stopPropagation();a=d[1][1][0];a&&b("bs_curry")._1(c,b("bs_string").trim(a[0].getValue()));return b("setImmediate")(b("bs_curry")._1(d[0],k))},s=function(c,a){if(c.currentTarget.contains(c.relatedTarget)){c.stopPropagation();return 0}else if(o>=2)return b("bs_curry")._1(g,0);else return b("bs_curry")._1(g,1)},t=function(a){return b("React").createElement("div",{className:"_2jnx",onBlur:b("bs_curry")._1(a[0],s)},b("React").createElement("div",{className:"_2jny"},b("ReasonReact.bs").element(0,[b("bs_curry")._1(a[0],l)],b("MessengerTextWithEmojiInputReact.bs").make(["_2jnz"],[b("bs_curry")._1(a[0],r)],[b("MercuryGenericConstants").MAX_THREAD_NAME_LENGTH],0,[h._("Name This Conversation")],[f.name],0,[]))),b("React").createElement("div",{className:"_2jn-"},b("ReasonReact.bs").element(0,0,b("MessengerButtonReact.bs").make(0,["button"],0,0,[b("bs_curry")._1(a[0],r)],0,0,0,0,h._("Done"),0,0,0,0,0,[]))))},u=function(d,c){d.stopPropagation();if(a&&o===1)return b("bs_curry")._1(g,0);else return 0},v=function(d,c){c=d.charCode;if(o!==1||!(c===b("Keys.bs").$$return||c===b("Keys.bs").space))return 0;else{d.preventDefault();d.stopPropagation();if(a)return b("bs_curry")._1(g,0);else return 0}};return[n[0],n[1],n[2],function(a){var b=a[5]!==f;if(b)return[!1,a[1],a[2],a[3],a[4],a[5]];else return a},n[4],function(a){a=a[0];var c=a[1][4];if(c!==1||o===1)return 0;else{setTimeout(b("bs_curry")._1(a[0],i),1);return 0}},n[6],n[7],function(c){var g=c[3],h=c[1],i=c[0],k=o!==1,l=h[0];return b("React").createElement("div",{className:"_2jnq"},b("React").createElement("div",{className:"_2jnr"+(h[0]?" _2jns":"")},e,l?j(0):null,a?b("ReasonReact.bs").element(0,0,b("MessengerThreadPhotoUploaderReact.bs").make(b("bs_curry")._1(c[0],function(c,a){a=a[1][3];a&&b("bs_curry")._1(d,[a[0],c]);return b("bs_curry")._1(g,0)}),[function(){return b("bs_curry")._1(g,1)}],[function(){return b("bs_curry")._1(g,[f.thread_id])}],0,[])):null),b("React").createElement("div",{ref:b("bs_curry")._1(i,m),className:"_2jnt"+(k?"":" _1sw_")+(a?"":" disabled"),role:k?"":"button",tabIndex:0,onKeyPress:b("bs_curry")._1(i,v),onClick:b("bs_curry")._1(i,u)},b("React").createElement("div",{className:"_2jnu"},k?t(c):b("ReasonReact.bs").element(0,0,b("MercuryThreadTitleReact.bs").make(["_2jnv"],0,f,p,0,[!1],[!1],0,[])))))},function(){return[!1,[0],[0],0,o,f]},n[10],function(a){if(typeof a==="number")return function(a){return b("bs_block").__(0,[[!1,a[1],a[2],0,a[4],a[5]]])};else{var c=a[0];return function(a){return b("bs_block").__(0,[[!0,a[1],a[2],[c],a[4],a[5]]])}}},n[12]]}f.focusThreadNameInput=i;f.renderSpinner=j;f.focusEditThreadNameButton=k;f.setRefThreadNameInput=l;f.setRefEditThreadNameButton=m;f.component=n;f.make=a}),null);
__d("MessengerInfoPanelNameSectionReact.bs",["cx","bs_block","bs_curry","React","bs_caml_obj","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessengerAdminGroupUtils","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerInfoPanelThreadNameSectionReact.bs","MessengerInfoPanelContactNameSectionReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNameSectionReact");function i(a,b){b[1][2][0]=a==null?0:[a];return 0}function j(a,c,d){return b("React").createElement("div",{className:"_1jt8"},b("ReasonReact.bs").element(0,0,b("MessengerThreadImageReact.bs").make(0,0,0,0,[50],a,c,d,[])))}function k(a,c,d,e,f,g,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){__p&&__p();var F=function(c){var e=c[3],h=C.is_subscribed&&!C.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(C,D);return b("React").createElement("div",{className:"_3-ne"},b("ReasonReact.bs").element(0,0,b("MessengerThreadlistRowActionsReact.bs").make(0,a,b("MessengerAdminGroupUtils").isGroupChat(C),b("MessengerAdminGroupUtils").isJoinableThread(C),b("MercuryThreadInfo").isMuted(C),c[1][0],C.unread_count>0,d,C.is_pinned,p,f,g,k,l,m,n,[o],[function(){return b("bs_curry")._1(e,0)}],function(a){return b("bs_curry")._1(e,b("bs_block").__(1,[a]))},s,[w],t,u,v,A,x,[h],[B],0,C,[])))},G=function(a){return b("bs_curry")._2(r,a[0],a[1])};return[h[0],h[1],h[2],function(a){var c=b("bs_caml_obj").caml_equal(a[3].thread_id,C.thread_id);if(c)return a;else return[a[0],1,a[2],a[3]]},h[4],h[5],h[6],h[7],function(d){__p&&__p();var f=C.is_subscribed||C.is_canonical,g;if(a)g=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelContactNameSectionReact.bs").make(a[0],c,e,z,j(y,C,D),[]));else{var h=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(C,D);g=b("ReasonReact.bs").element(0,[b("bs_curry")._1(d[0],i)],b("MessengerInfoPanelThreadNameSectionReact.bs").make(h,function(a){a!==C.name&&b("bs_curry")._1(q,a);return b("bs_curry")._1(d[3],1)},G,j(y,C,D),C,function(a){return b("bs_curry")._1(d[3],b("bs_block").__(0,[a]))},d[1][1],D,[]))}return b("React").createElement("div",{className:"_1jt6"},g,f?F(d):null)},function(){return[!1,1,[0],C]},h[10],function(a,c){__p&&__p();if(typeof a==="number")if(a===0){var d=c[2][0];if(d)return b("bs_block").__(0,[[c[0],0,c[2],c[3]]]);else return 0}else return b("bs_block").__(0,[[c[0],1,c[2],c[3]]]);else if(a.tag)return b("bs_block").__(0,[[a[0],c[1],c[2],c[3]]]);else return b("bs_block").__(0,[[c[0],a[0],c[2],c[3]]])},h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return k(b("bs_js_primitive").null_undefined_to_opt(a.contact),a.isUserActive,a.isBlocked,b("bs_js_primitive").null_undefined_to_opt(a.lastActive),a.onDelete,b("bs_js_primitive").null_undefined_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkSpam,a.onMarkUnread,a.onMute,a.onPin,a.onArchive,a.onThreadNameChange,a.onThreadPhotoChange,a.onUnmute,a.onIgnore,a.onBlock,a.onUnblock,a.onUnpin,a.showBlock,a.participants,b("bs_js_primitive").null_undefined_to_opt(a.platform),a.showLeaveGroup,a.showReport,a.thread,a.viewer,[])});c=50;f.component=h;f.imageSize=c;f.setThreadSectionRef=i;f.renderImage=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerMakeAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMakeAsOwnerDialogReact");function h(a,c,d,e,f,h){var i=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getMakeOwnerTitleText(f,e),g=b("MessengerAdminGroupUtils").getMakeOwnerBodyText(f,e,d),h=b("MessengerAdminGroupUtils").getMakeOwnerButtonText(f,e);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,c,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,a)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h],0,["danger"],[i],[0],0,0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").null_undefined_to_opt(a.onMakeOwner),a.onToggle,a.name,a.isUserViewer,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerRemoveAsOwnerDialogReact");function h(a,c,d,e,f,h,i){var j=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getRemoveOwnerTitleText(h),g=b("MessengerAdminGroupUtils").getRemoveOwnerBodyText(h,e,f,d),i=b("MessengerAdminGroupUtils").getRemoveOwnerButtonText(h);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,c,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,a)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[i],0,["danger"],[j],[0],0,0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").null_undefined_to_opt(a.onRemove),a.onToggle,a.name,a.isUserViewer,a.isLastAdminInThread,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveFromGroupDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerRemoveFromGroupDialogReact");function i(a,c,d){var e=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,c,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Remove from Group"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g._("Are you sure you want to remove this person from the group? They will no longer be able to send or receive new messages")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("Remove")],0,["danger"],[e],[0],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").null_undefined_to_opt(a.onRemove),a.onToggle,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MercuryThreads","MessengerAdminGroupUtils","MessengerContactActions.bs","MessengerDialogs.bs","MessengerMakeAsOwnerDialogReact.bs","MessengerMenu.react","MessengerParticipants.bs","MessengerPopoverMenu.react","MessengerRemoveAsOwnerDialogReact.bs","MessengerRemoveFromGroupDialogReact.bs","MessengerURIStore","React","ReactComponentWithPureRenderMixin","ShimButton.react","StoreAndPropBasedStateMixin","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactActions.bs").actions,j=b("MessengerMakeAsOwnerDialogReact.bs").jsComponent,k=b("MessengerRemoveAsOwnerDialogReact.bs").jsComponent,l=b("MessengerRemoveFromGroupDialogReact.bs").jsComponent,m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerURIStore"))],propTypes:{adminIds:a.arrayOf(a.string),extrasEnabled:a.bool.isRequired,contact:a.instanceOf(b("ImmutableObject")).isRequired,isAdminRequired:a.bool.isRequired,isOpen:a.bool,onAction:a.func.isRequired,onToggle:a.func.isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){a=b("MercuryThreads").getForFBID(a.viewer);var c=b("MessengerURIStore").getState().activeThreadID;a=c?a.getOrFetch(c):null;return{thread:a}}},render:function(){__p&&__p();var a=this._isViewerAdmin(),c=b("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.contact.uid),d=this._isUserViewer(),e=b("MessengerAdminGroupUtils").canRemoveAdmin(a,c,this.state.thread)?b("React").createElement(m,{label:h._("Remove As Admin"),onclick:this._handleRemoveAsOwnerClick}):null,f=null;a=b("MessengerAdminGroupUtils").canMakeOthersAdmins(a,c,this.state.thread);c=b("MessengerAdminGroupUtils").canMakeSelfAdmin(d,this.state.thread);(a||c)&&(f=b("React").createElement(m,{label:h._("Make Admin"),onclick:this._hanleMakeOwnerClick}));a=void 0;if(d)if(f||e)a=b("React").createElement(b("MessengerMenu.react"),null,f,e);else return null;else a=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(m,{label:h._("Message"),onclick:this._makeActionHandler(i.MESSAGE)}),this.props.contact.href?b("React").createElement(m,{label:h._("View Profile"),onclick:this._makeActionHandler(i.PROFILE)}):null,f,e,this._renderExtras());return b("React").createElement(b("MessengerPopoverMenu.react"),{menu:a,onHide:function(){return this.props.onToggle(!1)}.bind(this),onShow:function(){return this.props.onToggle(!0)}.bind(this)},b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function(){if(!this.props.extrasEnabled)return null;var a=[b("React").createElement(n,{key:"separator"})],c=this._isViewerAdmin();b("MessengerAdminGroupUtils").canRemoveFromGroup(c,this.state.thread)&&a.push(b("React").createElement(m,{key:"remove-from-group",label:h._("Remove from Group"),onclick:this._handleRemoveClick}));return a.length>=2?a:null},_handleClick:function(a){a.stopPropagation(),a.preventDefault()},_makeActionHandler:function(a){return function(b){this._handleClick(b),this.props.onAction(a,b)}.bind(this)},_handleRemoveClick:function(a){this._handleClick(a),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick})}.bind(this))},_handleRemoveAsOwnerClick:function(a){this._handleClick(a);var c=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{isAdminRequired:this.props.isAdminRequired,isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1,isUserViewer:this._isUserViewer(),name:c&&c.name,onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick})}.bind(this))},_handleDialogRemoveClick:function(a){this.props.onAction(i.REMOVE,a)},_handleOwnerRemoveClick:function(a){this.props.onAction(i.REMOVE_OWNER,a)},_hanleMakeOwnerClick:function(a){this._handleClick(a);var c=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:c&&c.name,isAdminRequired:this.props.isAdminRequired,isUserViewer:this._isUserViewer()})}.bind(this))},_handleOwnerAddClick:function(a){this.props.onAction(i.ADD_OWNER,a)},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()},_isUserViewer:function(){return b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isViewerAdmin:function(){return b("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.viewer)}});e.exports=c}),null);
__d("MessengerInfoPanelPeopleSection.react",["ix","cssVar","cx","fbt","CurrentUser","Image.react","immutable","ImmutableObject","Link.react","MessageRequestUtils","MessengerAddIconSVG.react","MessengerAdminGroupUtils","MessengerContactList.react","MessengerInfoPanelContactActions.react","MessengerInfoPanelSectionReact.bs","MessengerSortParticipants","React","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=b("React").PropTypes;k=babelHelpers.inherits(a,b("React").PureComponent);k&&k.prototype;a.prototype.render=function(){var a=this.props,c=a.adminIds,d=a.contactAdapter,e=a.isCollapsed,f=a.isViewerSubscribed,g=a.onContactAction,h=a.onContactSelect,i=a.onToggle,k=a.participants,m=a.thread;a=a.viewer;return b("React").createElement(l,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:e,onToggle:i,title:j._("People")},this.$1(),b("React").createElement(b("MessengerContactList.react"),{actionsClass:b("MessengerInfoPanelContactActions.react"),className:"_4wc-",contactAdapter:d,disableRole:!0,extraActionsEnabled:f,listSections:b("immutable").OrderedMap([[null,b("MessengerSortParticipants").sortAlphabeticalWithAdmins(c,k)]]),onSelect:h,onAction:g,viewer:a,adminIds:c,thread:m}))};a.prototype.$1=function(){if(!this.props.canViewerReply||b("MessageRequestUtils").isMessageRequest(this.props.thread))return null;var a=b("MessengerAdminGroupUtils").shouldInvite(this.props.thread)?j._("Invite"):j._("Add People"),c=this.props.thread.solid_color||(b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff");c=b("CurrentUser").isWorkUser()?b("React").createElement("div",{className:"_3-8n _3-8u"},b("React").createElement(b("Image.react"),{src:g("461758")})):b("React").createElement(b("MessengerAddIconSVG.react"),{className:"_4rpi",customColor:c});return b("React").createElement(b("Link.react"),{className:"_4rph",onClick:this.props.onAddPeopleClick},c,b("React").createElement("div",{className:"_4rpj"},a))};function a(){k.apply(this,arguments)}a.propTypes={adminIds:c.arrayOf(c.string),canViewerReply:c.bool.isRequired,contactAdapter:c.func.isRequired,isCollapsed:c.bool.isRequired,isViewerSubscribed:c.bool.isRequired,onAddPeopleClick:c.func.isRequired,onContactAction:c.func.isRequired,onContactSelect:c.func.isRequired,onToggle:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("GridReact.bs",["Grid.react","ReasonReact.bs","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("Grid.react"),{className:b("bs_js_null_undefined").fromOption(a),cols:c,fixed:b("bs_js_null_undefined").fromOption(d),alignv:b("bs_js_null_undefined").fromOption(e),alignh:b("bs_js_null_undefined").fromOption(f),spacing:b("bs_js_null_undefined").fromOption(g),style:b("bs_js_null_undefined").fromOption(h)},i)}d=[a];function c(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("Grid.react").GridItem,{className:b("bs_js_null_undefined").fromOption(a),alignv:b("bs_js_null_undefined").fromOption(c),alignh:b("bs_js_null_undefined").fromOption(d)},e)}e=[c];f.Grid=d;f.Item=e}),null);
__d("MessengerCustomThreadColorButtonReact.bs",["cx","Keys.bs","bs_curry","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerCustomThreadColorButton");function i(a,c,d,e,f){__p&&__p();var g=function(d,c){d.preventDefault();return b("bs_curry")._1(e,a)},i=function(d,c){if(d.keyCode===b("Keys.bs").$$return){d.preventDefault();return b("bs_curry")._1(e,a)}else return 0};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(e){return b("React").cloneElement(b("React").createElement("div",{"aria-label":c,className:"_5dr3",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(e[0],i),onClick:b("bs_curry")._1(e[0],g)},b("React").createElement("div",{className:"_5dr4",style:{backgroundColor:a}})),{"aria-pressed":d})},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.colorChoice,a.colorName,a.isSelected,a.onChoose,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerChangeColorDialogReact.bs",["ix","cx","fbt","cssVar","bs_array","bs_curry","React","bs_string","GridReact.bs","ImageReact.bs","fbglyph","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessagingThreadCustomizationConfig","MessengerCustomThreadColorButtonReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").statelessComponent("MessengerChangeColorDialogReact"),l="Unknown Color";function a(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{d&&b("bs_curry")._1(d[0],0);return b("MessengerDialogs.bs").removeDialog(0)}},h=function(d){var e=d===a;e||c&&b("bs_curry")._1(c[0],d);return f(!1)};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(){var c=b("bs_array").concat([["#0084ff"],[b("MessagingThreadCustomizationConfig").colorChoices,0]]);c=b("bs_array").map(function(c){var d=b("MessagingThreadCustomizationConfig").colorNames[c];d=d!==undefined?d:l;var e=b("bs_string").lowercase(c)===b("bs_string").lowercase(a);return b("ReasonReact.bs").element([c],0,b("GridReact.bs").Item[0](["_gs0"],0,0,[b("React").createElement("div",undefined,e?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_gs2"],0,0,0,[g("140201")],0,0,0,0,[])):null,b("ReasonReact.bs").element(0,0,b("MessengerCustomThreadColorButtonReact.bs").make(c,d,c===a,h,[])))]))},c);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_gs3"],f,0,0,0,0,[335],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,i._("Pick a color for this conversation"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_28he"},i._("Everyone in this conversation will see this.")),b("ReasonReact.bs").element(0,0,b("GridReact.bs").Grid[0](["_gs4"],5,0,0,0,0,0,c))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[]))]))]))},k[9],k[10],k[11],k[12]]}f.component=k;f.unknownColor=l;f.make=a}),null);
__d("MessengerChangeColorIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-1 -1 47 47"},b("React").createElement("title",undefined,"colors@2x"),b("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})))}f.make=a}),null);
__d("MessengerInfoPanelCustomColorReact.bs",["cx","fbt","Keys.bs","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerChangeColorDialogReact.bs","MessengerChangeColorIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelCustomColorReact");function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d){__p&&__p();var e=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerChangeColorDialogReact.bs").make(b("MessengerCustomColorUtils.bs").customColorOrBlue(a),[c],[b("bs_curry")._1(d,j)],[]))})},f=function(a,b){a.preventDefault();return e(b[0])},g=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return e(c[0])}else return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){if(a.customization_enabled){var d=b("MessengerCustomColorUtils.bs").customColorOrBlue(a);return b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:"_3szn _3szo",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],g),onClick:b("bs_curry")._1(c[0],f)},b("React").createElement("div",{className:"_3szp"},b("MessengerChangeColorIconSVGReact.bs").make("_17vc",d)),b("React").createElement("div",{className:"_3szq"},h._("Change Color")))}else return null},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.handleDialogClose=j;f.setTheRef=k;f.make=a}),null);
__d("MessengerInfoPanelEmoji.react",["ix","cx","fbt","Bootloader","CurrentUser","EmojiLikeConstants","Image.react","ImmutableObject","Keys","MercuryShareAttachmentRenderLocations","MessengerDialogs.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$2=function(event){event.preventDefault(),this.$5()}.bind(this),this.$3=function(event){event.keyCode===b("Keys").RETURN&&(event.preventDefault(),this.$5())}.bind(this),this.$6=function(){this.$1&&this.$1.focus()}.bind(this),this.$4=function(a){this.$1=a}.bind(this),c}a.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var a=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?b("MessengerSupportedEmojiUtils").getNewEmojiData(this.props.thread.custom_like_icon.emoji,b("EmojiLikeConstants").size.SMALL):null;a=a&&a.url?b("React").createElement(b("Image.react"),{src:a.url,className:"_12cp"}):b("CurrentUser").isWorkUser()?b("React").createElement(b("Image.react"),{src:g("470537")}):b("React").createElement(b("MessengerHotLikeOutlineSVG.react"),{className:"_12cq",color:this.props.thread.solid_color?this.props.thread.solid_color:"",height:"60%",location:b("MercuryShareAttachmentRenderLocations").MESSENGER});return b("React").createElement("div",{className:"_3szn _3szo",onClick:this.$2,onKeyDown:this.$3,ref:this.$4,role:"button",tabIndex:"0"},b("React").createElement("div",{className:"_3szp"},a),b("React").createElement("div",{className:"_3szq"},i._("Change Emoji")))};a.prototype.$5=function(){b("Bootloader").loadModules(["MessengerChangeEmojiDialogReact.bs"],function(a){var c=a.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI),onClose:this.$6,onSave:this.props.onChange})}.bind(this))}.bind(this),"MessengerInfoPanelEmoji.react")};a.propTypes={thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired,onChange:c.func.isRequired};e.exports=a}),null);
__d("MessengerInfoPanelEmojiReact.bs",["ReasonReact.bs","MessengerInfoPanelEmoji.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelEmoji.react"),{thread:a,viewer:c,onChange:d},e)}f.make=a}),null);
__d("MNCommercePromotionManageBlockDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MNCommercePromotionManageBlockDialogContainer.react").__setRef("MNCommercePromotionManageBlockDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ShimButtonReact.bs",["ReasonReact.bs","ShimButton.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("ShimButton.react"),{className:b("bs_js_null_undefined").fromOption(a),inline:b("bs_js_null_undefined").fromOption(c),onClick:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("MessengerInfoPanelManageMessagesReact.bs",["cx","fbt","React","MercuryIDs","ReasonReact.bs","ShimButtonReact.bs","MessengerParticipants.bs","MNCommerceDialogStateActions","MNCommercePromotionManageBlockDialogBootloader.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelManageMessagesReact");function j(a){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return!1;else{a=b("MessengerParticipants.bs").getNow(a);if(a==null)return!1;else return a.is_business_enabled}}function a(a,c,d){var e=function(c){c.preventDefault();c.stopPropagation();b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogBootloader.react"),{pageID:a.other_user_fbid});return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){if(j(a))return b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szp"}),b("ReasonReact.bs").element(0,0,b("ShimButtonReact.bs").make(["_3szq"],[!0],[e],[h._("Manage Messages")])));else return null},i[9],i[10],i[11],i[12]]}f.component=i;f.isBusinessEnabled=j;f.make=a}),null);
__d("MessengerInfoPanelManageReview.react",["cx","fbt","Bootloader","ImmutableObject","MercuryIDs","MessengerParticipants.bs","MNCommerceDialogStateActions","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(event){event.preventDefault(),b("Bootloader").loadModules(["MNCommerceReviewDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$3})}.bind(this),"MessengerInfoPanelManageReview.react")}.bind(this),c}a.prototype.render=function(){return!this.$1()?null:b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szp"}),b("React").createElement(b("ShimButton.react"),{className:"_3szq",inline:!0,onClick:this.$2},h._("Leave Feedback")))};a.prototype.$1=function(){var a=b("MercuryIDs").getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!a)return!1;a=b("MessengerParticipants.bs").getNow(a);return!!(a&&a.accepts_messenger_user_feedback)};a.prototype.$3=function(a,c,d){if(c===0)return;b("Bootloader").loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(b){b.review(a,c,d.trim())},"MessengerInfoPanelManageReview.react")};a.propTypes={thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerInfoPanelManageReviewReact.bs",["ReasonReact.bs","MessengerInfoPanelManageReview.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelManageReview.react"),{thread:a,viewer:c},d)}f.make=a}),null);
__d("MessengerContactListReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerContactList.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerContactList.react"),{contactAdapter:b("bs_js_null_undefined").fromOption(a),disableRole:b("bs_js_null_undefined").fromOption(c),listSections:d,onSelect:b("bs_js_null_undefined").fromOption(e),rowClassName:b("bs_js_null_undefined").fromOption(f),viewer:g,thread:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerEditNicknameDialogReact.bs",["cx","fbt","bs_curry","React","MercuryIDs","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs","MessagingThreadCustomizationConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerEditNicknameDialogReact");function j(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d,e,f,g){__p&&__p();var k=function(f,g){f=g[1][0][0];g=f?[f[0].getValue()]:0;f=0;g&&(g[0]===""?c&&(f=1):f=1);if(f===1&&g!==c){f=b("MercuryIDs").getUserIDFromParticipantID(a.id);f==null||b("bs_curry")._1(d,[f,g[0]])}return b("bs_curry")._1(e,!1)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(d){var g=a.name,i=b("MercuryIDs").getUserIDFromParticipantID(a.id),l,m=0;!(i==null)&&i===f?l=h._("Edit Your Nickname"):m=1;m===1&&(l=h._("Edit Nickname for {personName}",[h._param("personName",g)]));return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_2c1u"],e,0,0,0,0,[400],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,l)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_-bo"},h._("Everyone in this conversation will see this.")),b("ReasonReact.bs").element(0,[b("bs_curry")._1(d[0],j)],b("MessengerTextWithEmojiInputReact.bs").make(["_2c1v"],[b("bs_curry")._1(d[0],k)],[b("MessagingThreadCustomizationConfig").maxNicknameLength],0,[g],c,0,[]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Save")],0,0,[b("bs_curry")._1(d[0],k)],[0],0,0,[]))]))]))},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setInput=j;f.make=a}),null);
__d("MessengerEditNicknamesDialogReact.bs",["cx","fbt","bs_curry","immutable","MercuryIDs","ReasonReact.bs","bs_js_primitive","ImmutableObject","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs","MessengerContactListReact.bs","MessengerScrollableAreaReact.bs","MessengerEditNicknameDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){var d=b("MercuryIDs").getUserIDFromParticipantID(c.id),e;if(d==null)e=[c.name,""];else if(a==null)e=[c.name,""];else{a=a[d];e=a!==undefined?[a,c.name]:[c.name,""]}return new(b("ImmutableObject"))({alias:c.vanity,uid:c.id,photo:c.image_src,title:e[0],subtitle:e[1],type:c.type,isMessengerUser:c.is_messenger_user,href:c.href,isWorkUser:undefined,timezone:undefined,participants:undefined,thread:undefined})}var j=b("ReasonReact.bs").statelessComponent("MessengerEditNicknamesDialogReact");function a(a,c,d,e,f,g){__p&&__p();var k=function(a){if(a)return 0;else{b("bs_curry")._1(e,0);return b("MessengerDialogs.bs").removeAllDialogs(0)}},l=function(e,a){a=b("MercuryIDs").getUserIDFromParticipantID(e.id);var g=c.custom_nickname,h=!(a==null)&&!(g==null)?b("bs_js_primitive").undefined_to_opt(g[a]):0;return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditNicknameDialogReact.bs").make(e,h,d,k,f,[]))})};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var d=a.filter(function(d,a,e){__p&&__p();if(d==null)return!1;else{a=b("MessengerAdminGroupUtils").isJoinableThread(c);e=b("MercuryIDs").getUserIDFromParticipantID(d.id);if(a)if(e==null)return!1;else return e===f;else return!0}}).toArray(),e=c.custom_nickname;return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_4h9n"],k,0,0,0,["default"],[350],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[h._("Edit Nicknames")]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(["_4h9o"],[b("ReasonReact.bs").element(0,0,b("MessengerScrollableAreaReact.bs").make(["100%"],[b("ReasonReact.bs").element(0,0,b("MessengerContactListReact.bs").make([function(a){return i(e,a)}],[!0],b("immutable").OrderedMap([[null,d]]),[l],["_44kr"],f,[c],[]))]))]))]))},j[9],j[10],j[11],j[12]]}f.fromMercuryParticipant=i;f.component=j;f.make=a}),null);
__d("MessengerEditNicknamesIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"0 0 38 37.01"},b("React").createElement("title",undefined,"nicknames"),b("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})))}f.make=a}),null);
__d("MessengerInfoPanelNicknamesReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerEditNicknamesDialogReact.bs","MessengerEditNicknamesIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}var l=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNicknamesReact");function a(a,c,d,e,f){__p&&__p();var h=function(f){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditNicknamesDialogReact.bs").make(a,c,e,b("bs_curry")._1(f[0],j),d,[]))})},m=function(a,b){a.preventDefault();return h(b)},n=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return h(c)}else return 0};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(a){if(c.customization_enabled){var d=b("MessengerCustomColorUtils.bs").customColorOrBlue(c),e=b("CurrentUser").isWorkUser();return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(a[0],n),onClick:b("bs_curry")._1(a[0],m)},b("React").createElement("div",{className:"_3szp"},e?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("461749")],0,0,0,0,[])):b("MessengerEditNicknamesIconSVGReact.bs").make("_5odt",d)),b("React").createElement("div",{className:"_3szq"},i._("Edit Nicknames")))}else return null},function(){return[[0]]},l[10],function(a,b){return 0},l[12]]}f.handleDialogClose=j;f.setHandleRef=k;f.component=l;f.make=a}),null);
__d("MessengerInfoPanelPinningThreadReact.bs",["ix","cx","fbt","bs_curry","React","gkx","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","MercuryThreadActions","MercuryOrderedThreadlist","ChatPinnedThreadsEntryPoint","WorkChatNewBadgeReactBootloader.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelPinningThreadReact");function a(a,c,d){__p&&__p();var e=function(d,e){d=a.is_pinned;if(d){b("MercuryThreadActions").getForFBID(c).unpin(a.thread_id,b("ChatPinnedThreadsEntryPoint").INFO_PANEL_SECTION_ITEM);return 0}else{b("MercuryThreadActions").getForFBID(c).pin(a.thread_id,b("ChatPinnedThreadsEntryPoint").INFO_PANEL_SECTION_ITEM);return 0}};d=a.is_pinned;var f=d?i._("Unpin Conversation"):i._("Pin Conversation"),h=b("CurrentUser").isWorkUser()&&b("gkx")("AT4P8EeNU5psOznhIbc1cKhXCwNU-1iAmabZ7iBm-dOcgmsCEibyLc1ZZsOZGGQul_RlmIVlMxa-s5x-yiJ5uaFE"),k=b("MercuryOrderedThreadlist").getForFBID(c).getPinnedThreadlist().length!==0;return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(a){if(h)return b("React").createElement("div",{className:"_3szn _3szo",role:"button",onClick:b("bs_curry")._1(a[0],e)},b("React").createElement("div",{className:"_3szp"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("571563")],0,0,0,0,[]))),b("React").createElement("div",{className:"_3szq"},f),k?null:b("ReasonReact.bs").element(0,0,b("WorkChatNewBadgeReactBootloader.bs").make([])));else return null},j[9],j[10],j[11],j[12]]}f.component=j;f.make=a}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:b}}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,h=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,i=null,j=0,k=0,l=new Set(),m=0,n=0;function a(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=null,j=0,k=0,n=0,l.clear(),m=Date.now(),b("FunnelLogger").startFunnel(g),c&&b("FunnelLogger").addFunnelTag(g,c),b("FunnelLogger").setFunnelTimeout(g,86400),b("FunnelLogger").appendActionWithPayloadIfNew(g,h.INITIATE_CONTENT_SEARCH,{query:a})}function c(a){b("FunnelLogger").appendActionWithPayload(g,h.CHANGE_QUERY,{query:a})}function d(a){b("FunnelLogger").appendActionWithPayload(g,h.THREAD_IMPRESSIONS,{impressionList:a,latency:Date.now()-m})}function f(a,c){b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MORE_THREADS,{impressionList:a,latency:c})}function o(){n+=1}function p(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=a,j=0,n=0,l.clear(),b("FunnelLogger").appendActionWithPayload(g,h.SELECT_THREAD,{thread_id:a,has_results:c})}function q(a){j+=1,k+=1}function r(a,c,d){i=c,l.add(a),b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MESSAGE_IN_THREAD,{latency:d})}function s(a){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),a?b("FunnelLogger").appendActionWithTagAndPayloadIfNew(g,h.END_CONTENT_SEARCH,a,{totalBrowseActions:k}):b("FunnelLogger").appendActionWithPayloadIfNew(g,h.END_CONTENT_SEARCH,{totalBrowseActions:k}),b("FunnelLogger").endFunnel(g)}e.exports={browseMessageInThread:q,endFunnel:s,loadMessageInThread:r,logContextBrowse:o,logChangeQuery:c,logLoadMoreThreads:f,logThreadImpressions:d,logThreadSelect:p,startFunnel:a}}),null);
__d("MessengerThreadSearchIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"8 8 48 48"},b("React").createElement("title",undefined,"search conversation"),b("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:c,strokeMiterlimit:"10",strokeWidth:"2"}),b("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}f.make=a}),null);
__d("MessengerInfoPanelSearchReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","Bootload.bs","asset","Bootloader","ImageReact.bs","CurrentUser","ReasonReact.bs","MessengerActions","MessengerURIStore","MessengerCustomColorUtils.bs","MessengerThreadSearchIconSVGReact.bs","MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSearchReact");function a(a){b("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLogger.bs"],a,"MessengerInfoPanelSearchReact.bs");return 0}d=[a];var k=b("Bootload.bs").Create(d);function l(a,c){b("MessengerContentSearchFunnelLogger").startFunnel(a,b("MessengerContentSearchFunnelLoggerConstants").SEARCH_WITHIN_THREAD);return 0}function m(){var a=b("MessengerURIStore").getState().query;a=a==null;b("MessengerActions").changeQuery(a?"":undefined);return 0}function n(a){var c=b("MessengerURIStore").getState().query,d=c==null?"":c;a.preventDefault();b("bs_curry")._1(k[0],function(a){return l(d,a)});return m(0)}function o(a){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return m(0)}else return 0}function c(a,c){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){var c=b("MessengerCustomColorUtils.bs").customColorOrBlue(a),d=b("CurrentUser").isWorkUser();return b("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:o,onClick:n},b("React").createElement("div",{className:"_3szp"},d?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("465522")],0,0,0,0,[])):b("MessengerThreadSearchIconSVGReact.bs").make("_5odt",c)),b("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))},j[9],j[10],j[11],j[12]]}f.component=j;f.BootloadableMessengerContentSearchFunnelLogger=d;f.LoadableMessengerContentSearchFunnelLoggerRe=k;f.handleLoggerLoad=l;f.showQuery=m;f.handleSearchThreadClick=n;f.handleSearchThreadKeyDown=o;f.make=c}),null);
__d("LeftRightReact.bs",["ReasonReact.bs","LeftRight.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("LeftRight.react"),{className:b("bs_js_null_undefined").fromOption(a)},c)}f.make=a}),null);
__d("MessengerCompositeMuteSettingsDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerCompositeMuteSettingsDialogReactComponent").__setRef("MessengerCompositeMuteSettingsDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerCompositeMuteSettingsDialogBootloaderReact.bs",["ReasonReact.bs","MessengerCompositeMuteSettingsDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerCompositeMuteSettingsDialogBootloader.react"),{isMuted:a,mentionsMuted:c,reactionsMuted:d,showMentions:e,onMentionsMute:f,onReactionsMute:g,onMute:h,onToggle:i},j)}f.make=a}),null);
__d("MessengerNotificationsIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},b("React").createElement("defs",undefined,b("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),b("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:c}),b("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:c}))))}f.make=a}),null);
__d("MessengerNotificationsButtonReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","asset","ImageReact.bs","formatDate","CurrentUser","ReasonReact.bs","LeftRightReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerNotificationsIconSVGReact.bs","MessengerCompositeMuteSettingsDialogBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c){if(a)return 0;else{b("MessengerDialogs.bs").removeDialog(0);a=c[1][0][0];if(a)return a[0].focus();else return 0}}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}var l=b("ReasonReact.bs").reducerComponent("MessengerNotificationsButtonReact");function a(a,c,d,e,f,h,m,n,o){__p&&__p();var p=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerCompositeMuteSettingsDialogBootloaderReact.bs").make(a,c,e,!n.is_canonical,f,m,h,b("bs_curry")._1(d[0],j),[]))})},q=function(a,b){a.preventDefault();a.stopPropagation();return p(b)},r=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();a.stopPropagation();return p(c)}else return 0},s=function(){__p&&__p();if(d){var a=d[0];if(a!==0){var c;if(a>0)if(a<86401)c=0;else{var e=new Date(a*1e3).getDay()===new Date().getDay();c=e?[i._("Off until {time}",[i._param("time",b("formatDate")(a,"g:ia"))])]:[i._("Off until {time} tomorrow",[i._param("time",b("formatDate")(a,"g:ia"))])]}else c=a===-1?[i._("Off indefinitely")]:0;if(c)return b("React").createElement("span",{className:"_3x6v"},c[0]);else return null}else return null}else return null};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(a){var c=i._("Notifications"),d=b("MessengerCustomColorUtils.bs").customColorOrBlue(n),e=b("CurrentUser").isWorkUser();return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(a[0],r),onClick:b("bs_curry")._1(a[0],q)},b("React").createElement("div",{className:"_3szp"},e?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("470464")],0,0,0,0,[])):b("MessengerNotificationsIconSVGReact.bs").make("_3wh2",d)),b("ReasonReact.bs").element(0,0,b("LeftRightReact.bs").make(["_3szq"],[c,s(0)])))},function(){return[[0]]},l[10],function(a,b){return 0},l[12]]}f.handleDialogToggle=j;f.setRef=k;f.component=l;f.make=a}),null);
__d("MessengerMuteButtonContainerReact.bs",["bs_curry","ReasonReact.bs","MercuryThreadInfo","MercuryThreadActions","MessengerNotificationsButtonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMuteButtonContainerReact");function a(a,c,d){__p&&__p();var e=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMuteSetting(a.thread_id,e);return 0},f=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMentionsMuteSetting(a.thread_id,e);return 0},h=function(e,d){b("MercuryThreadActions").getForFBID(c).updateReactionsMuteSetting(a.thread_id,e);return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var d=b("MercuryThreadInfo").isMuted(a),g=b("MercuryThreadInfo").getMuteSetting(a);return b("ReasonReact.bs").element(0,0,b("MessengerNotificationsButtonReact.bs").make(d,b("MercuryThreadInfo").areMentionsMuted(a),g==null?0:[g],b("MercuryThreadInfo").areReactionsMuted(a),b("bs_curry")._1(c[0],f),b("bs_curry")._1(c[0],e),b("bs_curry")._1(c[0],h),a,[]))},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("MessengerInfoPanelThreadOptionsContainerReact.bs",["fbt","bs_curry","WorkGKs","CurrentUser","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelEmojiReact.bs","MessengerInfoPanelSearchReact.bs","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelNicknamesReact.bs","MessengerMuteButtonContainerReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelCustomColorReact.bs","MessengerPlatformUserControlConfig","MessengerInfoPanelManageReviewReact.bs","MessengerInfoPanelPinningThreadReact.bs","MessengerInfoPanelManageMessagesReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelThreadOptionsContainerReact");function i(a,c,d,e,f,i){__p&&__p();var j=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadColor(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}},k=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadEmoji(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}},l=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadNicknames(d.thread_id,c[0],c[1],b("MessagingThreadCustomizationSource").SETTINGS);return 0}};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(h){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var i=b("CurrentUser").isWorkUser(),m=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(d,e),n=m&&(!i||b("WorkGKs").workchat_thread_color_customization);n=n?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelCustomColorReact.bs").make(d,b("bs_curry")._1(h[0],j),[])):null;m=m&&(!i||b("WorkGKs").workchat_thread_emoji_customization);m=m?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelEmojiReact.bs").make(d,e,b("bs_curry")._1(h[0],k),[])):null;var o=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSearchReact.bs").make(d,[]));i=!i||b("WorkGKs").workchat_thread_nickname_customization;i=i?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelNicknamesReact.bs").make(c,d,e,b("bs_curry")._1(h[0],l),[])):null;h=b("MessengerPlatformUserControlConfig").v2_enabled;h=h?null:b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelManageMessagesReact.bs").make(d,e,[]));var p=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelManageReviewReact.bs").make(d,e,[])),q=b("ReasonReact.bs").element(0,0,b("MessengerMuteButtonContainerReact.bs").make(d,e,[])),r=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelPinningThreadReact.bs").make(d,e,[]));return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(d.solid_color),[!0],[a],[f],[g._("Options")],[o,i,n,m,h,p,q,r]))}},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.isCollapsed,a.participants,a.thread,a.viewer,a.onToggle,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("Number.bs",["ReasonReact.bs","Number.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("Number.react"),{value:a},c)}f.make=a}),null);
__d("MessengerMessageCountReact.bs",["cx","fbt","bs_block","bs_curry","React","Number.bs","ReasonReact.bs","bs_js_primitive","MercuryThreadInformer"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerMessageCountReact");function j(a,c){if(a==null)return 0;else return b("bs_js_primitive").undefined_to_opt(a[c])}function k(a,c,d){__p&&__p();return[i[0],i[1],i[2],function(b){var c=b[0]===a.thread_id;if(c)return b;else return[a.thread_id,a.message_count]},function(a){var d=b("MercuryThreadInformer").getForFBID(c),e=d.subscribe("messages-received",function(c,d){return b("bs_curry")._1(a[3],b("bs_block").__(0,[d]))}),f=d.subscribe("messages-reordered",function(c,d){return b("bs_curry")._1(a[3],b("bs_block").__(1,[d]))});return b("bs_curry")._1(a[4],function(){e.unsubscribe();f.unsubscribe();return 0})},i[5],i[6],i[7],function(a){return b("React").createElement("div",{className:"_60oa"},h._("Messages Sent:"),b("React").createElement("div",{className:"_397l"},b("ReasonReact.bs").element(0,0,b("Number.bs").make(a[1][1],[]))))},function(){return[a.thread_id,a.message_count]},i[10],function(c,d){__p&&__p();if(c.tag){var e=j(c[0],a.thread_id);if(e&&e[0].source==="client_delete_messages")return b("bs_block").__(0,[[d[0],d[1]-1|0]]);else return 0}else{e=j(c[0],a.thread_id);if(e)return b("bs_block").__(0,[[d[0],d[1]+e[0].length|0]]);else return 0}},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(a.thread,a.viewer,[])});f.component=i;f.getThreadPayloadFromInform=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerInfoPanelThreadStatsContainerReact.bs",["fbt","ReasonReact.bs","bs_js_primitive","MessengerConfig","MessengerMessageCountReact.bs","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelThreadStatsContainerReact");function a(a){return a.message_count<10}function i(a,c,d,e,f){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){if(!c.is_subscribed||c.message_count<10||!b("MessengerConfig").ThreadStatsMessageCount)return null;else{var f=b("MessengerConfig").ThreadStatsMessageCount;f=f?b("ReasonReact.bs").element(0,0,b("MessengerMessageCountReact.bs").make(c,d,[])):null;return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(c.solid_color),[!0],[a],[e],[g._("Conversation Details")],[f]))}},h[9],h[10],h[11],h[12]]}c=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.isCollapsed,a.thread,a.viewer,a.onToggle,[])});f.component=h;f.isNewThread=a;f.make=i;f.jsComponent=c}),null);
__d("MessengerInfoPanelWorkContextContainerReact.bs",["cx","fbt","bs_block","bs_curry","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","SubscriptionsHandler","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger","MercuryWorkContextInformation","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryWorkContextInformation").get(),j=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelWorkContextContainerReact"),k={phone:undefined,email:undefined,location:undefined};function l(a,c,d,e,f){__p&&__p();return[j[0],j[1],j[2],function(){var a=c.other_user_fbid;if(a==null)return k;else{a=i.getOrFetch(a);if(a==null)return k;else return a}},function(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("MercuryWorkContextInformation").addListener("change",function(){return b("bs_curry")._1(a[3],0)}));b("bs_curry")._1(a[4],function(){c.release();return 0});return b("bs_curry")._1(a[3],0)},j[5],j[6],j[7],function(f){__p&&__p();var g=f[1].phone,i=f[1].email,j=f[1].location;if(g==null&&i==null&&j==null)return null;else g=1;if(g===1){i=f[1].phone;j=f[1].email;g=f[1].location;return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(c.solid_color),[!0],[a],[d],[h._("About")],[b("React").createElement("table",{className:"_2dwl"},b("React").createElement("tbody",undefined,i==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Phone")),b("React").createElement("td",undefined,i)),j==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Email")),b("React").createElement("td",undefined,j)),g==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Location")),b("React").createElement("td",undefined,g)))),b("React").createElement("div",{className:"_3-8z"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_2dwm"],0,0,0,0,0,[e],0,[function(){new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(2)).log();return 0}],0,0,0,0,0,["_blank"],0,h._("View Profile"))))]))}},function(){return{phone:undefined,email:undefined,location:undefined}},j[10],function(a,d){a=c.other_user_fbid;if(a==null)return 0;else{d=i.getOrFetch(a);if(d==null)return 0;else return b("bs_block").__(0,[d])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return l(a.isCollapsed,a.thread,a.onToggle,a.href,[])});f.mercuryWorkContextInformation=i;f.component=j;f.nullInfo=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerSharedFileReact.bs",["cx","React","LinkReact.bs","ReasonReact.bs","joinClasses","MercuryAttachment"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerSharedFile");function a(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var e=b("MercuryAttachment").getAttachIconClassByMime(d);return b("React").createElement("li",{className:"_2a42"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,[b("joinClasses")("_2a43",e)],0,0,0,0,0,[c],0,0,0,0,0,0,0,["_blank"],0,[b("React").createElement("div",{className:"_2a44"},b("React").createElement("i",{className:"img"}),b("React").createElement("span",{className:"_2a45 _fy2"},a))])))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerThreadSharedFilesWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1509212465873777"};c.getQueryID=function(){"use strict";return"580743575640108"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerSharedFilesReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_caml_obj","LinkReact.bs","bs_caml_array","WebGraphQL","ReasonReact.bs","promiseDone","bs_js_primitive","MercuryAttachment","MercuryMessageStore","MessengerSpinnerReact.bs","MessengerSharedFileReact.bs","MessengerInfoPanelSectionReact.bs","MessengerThreadSharedFilesWebGraphQLQuery"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){__p&&__p();a=a.message_thread;if(a==null)return!1;else{a=a.message_shared_media;if(a==null)return!1;else{a=a.page_info;if(a==null)return!1;else{a=a.has_next_page;if(a==null)return!1;else return a}}}}function j(a){a=a.page_info;if(a==null)return!1;else{a=a.end_cursor;return!(a==null)}}var k=b("React").createElement("div",{className:"_omn"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[]))),l=b("ReasonReact.bs").reducerComponent("MessengerSharedFilesReact");function m(a,c,d,e,f){__p&&__p();var g=function(a,d){if(c){var e={threadFBID:c[0]};a&&(e.count=a[0]);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedFilesWebGraphQLQuery"))(e)),function(a){return b("bs_curry")._1(d[3],[a])},undefined);return 0}else return 0},m=function(a,c){__p&&__p();a=c[1][1];var d=c[1][2];if(a||!d)return 0;else{a=d[0].message_shared_media;if(a==null)return 0;else{b("bs_curry")._1(c[3],0);d=a.count;return g(d==null?0:[d],c)}}},n=function(a,c){__p&&__p();return a.subscribe(function(a){__p&&__p();var d=a.eventType,e=d===b("MercuryMessageStore").MESSAGES_RECEIVED;d=d===b("MercuryMessageStore").MESSAGES_CHANGED;a=a.messages;if(a.length!==0&&(e||d))e=1;else return 0;if(e===1){d=b("bs_caml_array").caml_array_get(a,a.length-1|0);e=d.attachments.some(function(a){return b("MercuryAttachment").isFileAttachment(a)});if(e){var f=setTimeout(function(){return g(0,c)},1e3);return b("bs_curry")._1(c[4],function(){clearTimeout(f);return 0})}else return 0}})},o=function(a){var c=a[1][1];c=c?k:null;return b("React").createElement("li",{className:"_2a42 _omo"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_2a43"],0,0,0,0,0,0,0,[b("bs_curry")._1(a[0],m)],0,0,0,0,0,0,0,[b("React").createElement("div",{className:"_2a44"},c,h._("Show All"))])))},p=function(a,c){a=a.edges;var d=c[1][0];d=d?o(c):null;return b("React").createElement("ul",{className:"_2o39"},a.map(function(a){a=a.node;return b("ReasonReact.bs").element([a.legacy_attachment_id],0,b("MessengerSharedFileReact.bs").make(a.filename,a.url,a.mimetype,[]))}),d)};return[l[0],l[1],l[2],function(a){return[a[0],a[1],a[2],c]},function(c){g(0,c);var d=new(b("MercuryMessageStore"))(a);n(d,c);return b("bs_curry")._1(c[4],function(){d.destroy();return 0})},function(a){a=a[0];if(b("bs_caml_obj").caml_notequal(a[1][3],c))return b("bs_curry")._1(a[3],1);else return 0},l[6],l[7],function(a){__p&&__p();var f=a[1][2];if(f&&c&&c[0]!==""){f=a[1][2];if(f){f=f[0].message_shared_media;if(!(f==null)&&j(f))return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(0,[!0],[d],[e],[h._("Shared Files")],[p(f,a)]));else return null}else return null}else return null},function(){return[!1,!1,0,c]},l[10],function(a,c){if(typeof a==="number")if(a!==0)return b("bs_block").__(2,[[c[0],c[1],0,c[3]],function(a){return g(0,a)}]);else return b("bs_block").__(0,[[c[0],!0,c[2],c[3]]]);else{a=a[0];return b("bs_block").__(0,[[i(a),!1,b("bs_js_primitive").null_undefined_to_opt(a.message_thread),c[3]]])}},l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.threadID,b("bs_js_primitive").null_undefined_to_opt(a.threadFBID),a.isCollapsed,a.onToggle,[])});f.hasNextPage=i;f.hasFiles=j;f.spinner=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Promise","Bootloader","Image.react","Layout.react","Link.react","MessengerSpinner.react","MercuryThreadTimestampReact.bs","MercuryTimestamp","promiseDone","React","RelayClassic_DEPRECATED","isLinkshimURI","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("Layout.react").Column,k=b("Layout.react").FillColumn,l=b("MercuryThreadTimestampReact.bs").jsComponent,m=36;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.componentDidMount=function(){this.$2(this.props.sharedLinks.length)};a.prototype.render=function(){return b("React").createElement("div",{className:"_2wjt"},this.props.sharedLinks.map(function(a,b){return this.$3(a,b)}.bind(this)),this.$4())};a.prototype.$3=function(a,c){var d=a.media&&a.media.image&&a.media.image.uri?b("React").createElement(j,null,b("React").createElement(b("Image.react"),{className:"_2wjy",src:a.media.image.uri,style:{height:m,width:m}})):null,e=null;a.sharer&&a.sharer.name?e=b("React").createElement("div",{className:"_2wj_"},h._("Sent by {sender_name}",[h._param("sender_name",a.sharer.name)])):a.description&&a.description.text?e=b("React").createElement("div",{className:"_2wj_"},a.description.text):e=b("React").createElement("div",{className:"_2wj_"},this.$5(a.url));return b("React").createElement("li",{key:c},b("React").createElement(b("Link.react"),{className:"_2pit _2wju",style:{color:this.props.customColor},target:"_blank",onClick:function(){return this.$6()}.bind(this),href:a.url},b("React").createElement(b("Layout.react"),{className:"_2wjz clearfix"},d,b("React").createElement(k,{className:"_653d _159d"},b("React").createElement("div",{className:"_2wj-"},a.title_with_entities.text),e),b("React").createElement(j,null,a.creation_time?this.$7(a.creation_time*1e3):null))))};a.prototype.$6=function(){b("promiseDone")(this.$8(),function(a){var b=a.logger;a=a.actions;b.clear();b.setEvent(a.SHARED_LINKS_CLICK).log()})};a.prototype.$2=function(a){b("promiseDone")(this.$8(),function(b){var c=b.logger;b=b.actions;c.clear();c.setEvent(b.SHARED_LINKS_IMPRESSION).addToExtraData("itemCount",String(a)).log()})};a.prototype.$8=function(){this.$1||(this.$1=new(b("Promise"))(function(a,c){b("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(b,c){b=new b();a({logger:b,actions:c})},"MessengerSharedLinks.react")}));return this.$1};a.prototype.$7=function(a){return b("React").createElement(l,{className:"_1ht7 _159e",time:a,title:b("MercuryTimestamp").getAbsoluteTimestamp(a),text:b("MercuryTimestamp").getRelativeTimestamp(a)})};a.prototype.$5=function(a){if(a==null)return"";var c=new(b("URI"))(a);if(!b("isLinkshimURI")(c))return a;c=c.getQueryData().u;return!c?a:c};a.prototype.$4=function(){if(!this.props.canShowMore)return null;return this.props.isFetchingMore?b("React").createElement("div",{className:"_2n20",style:{flex:0}},b("React").createElement(b("MessengerSpinner.react"),null)):b("React").createElement(b("Link.react"),{className:"_3oh- _2wjv",style:{color:this.props.customColor},onClick:this.props.onClickShowMore},h._("Show More..."))};a.getShareLinkFragment=function(){return function(){return{children:[{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"title_with_entities",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{children:[{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"sharer",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"User"},{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"description",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{fieldName:"url",kind:"Field",metadata:{},type:"Url"},{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:80}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:80}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],fieldName:"media",kind:"Field",metadata:{canHaveSubselections:!0,isAbstract:!0},type:"Media"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"MessengerSharedLinksRelayQL",type:"StoryAttachment"}}()};function a(){i.apply(this,arguments)}a.propTypes={customColor:c.string,isFetchingMore:c.bool.isRequired,sharedLinks:c.array.isRequired,threadFBID:c.string.isRequired,onClickShowMore:c.func.isRequired};e.exports=a}),null);
__d("MessengerSharedLinksContainer.react",["fbt","MessengerInfoPanelSectionReact.bs","MessengerSharedLinks.react","React","RelayClassic_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=b("React").PropTypes;var j=5;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(a){h.constructor.call(this,a),this.state={canShowMore:!1,isFetchingMore:!1,numLinks:0,fetchCount:j},this.$1=function(){this.props.relay.setVariables({count:this.props.relay.variables.count+j},function(a){(a.done||a.aborted)&&(this.setState({isFetchingMore:!1}),a.done&&this.setState({canShowMore:this.props.sharedLinks.shared_links.length>=this.state.fetchCount}))}.bind(this)),this.setState({isFetchingMore:!0,fetchCount:this.state.fetchCount+j})}.bind(this)}a.prototype.UNSAFE_componentWillUpdate=function(a){if(a.sharedLinks&&this.state.numLinks!==a.sharedLinks.shared_links.length){a=a.sharedLinks.shared_links.length;this.setState({canShowMore:a>=this.state.fetchCount,isFetchingMore:!1,numLinks:a})}};a.prototype.componentDidMount=function(){var a=this.props.sharedLinks;a=a&&a.shared_links?a.shared_links.length:0;this.setState({canShowMore:a>=this.state.fetchCount,isFetchingMore:!1,numLinks:a})};a.prototype.render=function(){return!this.props.threadFBID||!this.props.sharedLinks||!this.props.sharedLinks.shared_links||this.props.sharedLinks.shared_links.length===0?null:b("React").createElement(i,{isCollapsible:!0,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:g._("Shared Links")},b("React").createElement(b("MessengerSharedLinks.react"),{canShowMore:this.state.canShowMore,customColor:this.props.customColor,isFetchingMore:this.state.isFetchingMore,sharedLinks:this.props.sharedLinks.shared_links,threadFBID:this.props.threadFBID,onClickShowMore:this.$1}))};a.propTypes={customColor:c.string,isCollapsed:c.bool.isRequired,sharedLinks:c.object,threadFBID:c.string,onToggle:c.func.isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{count:j},fragments:{sharedLinks:function(){return function(a){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[b("RelayClassic_DEPRECATED").QL.__frag(a)]),fieldName:"shared_links",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"StoryAttachment"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"MessengerSharedLinksContainer_SharedLinksRelayQL",type:"MessageThread"}}(b("MessengerSharedLinks.react").getShareLinkFragment())}}})}),null);
__d("MessengerSharedLinksContainerRoute",["RelayClassic_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("RelayClassic_DEPRECATED").Route);g&&g.prototype;function a(){g.apply(this,arguments)}a.routeName="MessengerSharedLinksContainerRoute";a.paramDefinitions={threadFBID:{type:"String",required:!0}};a.queries={sharedLinks:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},b("RelayClassic_DEPRECATED").QL.__frag(a)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MessengerSharedLinksContainerRoute",type:"MessageThread"}}(a.getFragment("sharedLinks"))}};e.exports=a}),null);
__d("MessengerSharedPhotoReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerSharedPhoto.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSharedPhoto.react"),{className:a,fbid:c,onClick:d,uri:b("bs_js_null_undefined").fromOption(e),isSpherical:f},[])}f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewContainerReact.bs",["ReasonReact.bs","MessengerSharedPhotosAlbumViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:a,onCloseSharedPhotos:c,threadID:d,viewedPhoto:e},[])}f.make=a}),null);
__d("MessengerSharedPhotosVideosData.bs",["bs_curry","bs_js_dict","bs_belt_Array","bs_js_primitive","MessengerThreadSharedMediaHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){return b("bs_js_primitive").undefined_to_opt(g[a])}function h(a,b){g[a]=b;return 0}function i(a){a=b("bs_belt_Array").get(b("bs_js_dict").values(a),0);if(a){a=a[0];if(a==null)return 0;else return[a.message_shared_media]}else return 0}function j(a,c,d,e){__p&&__p();a=i(a);if(a){a=a[0];var f=d[0];f=f[1];f=[1,f];d=d[1];if(d){d=d[0];var g=a.edges;g=g.length!==0?[f,[[g.concat(d[0]),[a.page_info.start_cursor],d[2],a.page_info.has_next_page]]]:[f,[[d[0],d[1],d[2],a.page_info.has_next_page]]]}else g=[f,[[a.edges,[a.page_info.start_cursor],[a.page_info.end_cursor],a.page_info.has_next_page]]];h(e,g);return b("bs_curry")._1(c,0)}else return 0}function k(a,c,d,e){__p&&__p();a=i(a);if(a){a=a[0];var f=d[0];f=f[0];f=[f,1];d=d[1];if(d){d=d[0];var g=a.edges;g=g.length!==0?[f,[[d[0].concat(g),d[1],[a.page_info.end_cursor],a.page_info.has_next_page]]]:[f,[[d[0],d[1],d[2],a.page_info.has_next_page]]]}else g=[f,[[a.edges,[a.page_info.start_cursor],[a.page_info.end_cursor],a.page_info.has_next_page]]];h(e,g);return b("bs_curry")._1(c,0)}else return 0}function l(a,c,d,e,f,i){__p&&__p();var j=a[0];j=[j[0],0];a=a[1];j=[j,a];h(c,j);b("MessengerThreadSharedMediaHelper").loadMorePrevious(d,f?f[0]:undefined,e,function(a){var b=g[c];if(b!==undefined)return k(a,i,b,c);else return 0});return 0}function m(a,c,d,e,f,i){__p&&__p();var k=a[0];k=[0,k[1]];a=a[1];k=[k,a];h(c,k);b("MessengerThreadSharedMediaHelper").loadMoreLatest(d,f?f[0]:undefined,e,function(a){var b=g[c];if(b!==undefined)return j(a,i,b,c);else return 0});return 0}function c(a,b,c,d){__p&&__p();var e=g[c];if(e!==undefined)if(e[0][0]){var f=e[1];if(f){f=f[0];if(f[0].length!==0)return m(e,c,b,a,f[1],d);else f=1}else f=1;if(f===1)return l(e,c,b,a,0,d)}else return 0;else return l([[1,1],0],c,b,a,0,d)}function d(a,b,c,d){__p&&__p();var e=g[c];if(e!==undefined)if(e[0][1]){var f=e[1];if(f){f=f[0];if(f[3])if(f[0].length!==0)return l(e,c,b,a,f[2],d);else f=1;else return 0}else f=1;if(f===1)return l(e,c,b,a,0,d)}else return 0;else return l([[1,1],0],c,b,a,0,d)}function e(a,b){__p&&__p();var c=g[a];if(c!==undefined){var d=c[1];if(d){d=d[0];var e=d[0];if(e.length!==0){e=e.filter(function(a){return!b.some(function(b){return b===a.node.legacy_attachment_id})});c=c[0];e=[[e,d[1],d[2],d[3]]];d=[c,e];return h(a,d)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.convertPayload=i;f.onFetchNewerDone=j;f.onFetchOlderDone=k;f.mutateDataThenLoadMoreFromRecentToOld=l;f.mutateDataThenLoadMoreFromOldToRecent=m;f.fetchNewer=c;f.fetchOlder=d;f.localRemove=e}),null);
__d("SpotlightMessengerSharedMediaViewerContainerReact.bs",["ReasonReact.bs","SpotlightMessengerSharedMediaViewerContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightMessengerSharedMediaViewerContainer.react"),{onClosePhotoView:a,openAlbum:c,photoID:d,rootClassName:e,threadID:f,disableForward:g},[])}f.make=a}),null);
__d("SpotlightViewerReact.bs",["ReasonReact.bs","SpotlightViewer"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightViewer"),{className:a,onHide:c,open:d},e)}f.make=a}),null);
__d("MessengerSharedPhotosReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_belt_Array","MercuryIDs","ReasonReact.bs","bs_js_primitive","MercuryMessages","MercuryAttachment","MercuryDispatcher","SphericalPhotoUtils","MercuryPayloadSource","SpotlightViewerReact.bs","MessengerSharedPhotoReact.bs","MessengerInfoPanelSectionReact.bs","MessengerSharedPhotosVideosData.bs","MessengerSharedPhotosAlbumViewContainerReact.bs","SpotlightMessengerSharedMediaViewerContainerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").createElement("div",{className:"_4dfu"}),j=b("ReasonReact.bs").reducerComponent("MessengerSharedPhotosReact");function k(a,c,d,e,f,g,k,l){__p&&__p();var m=function(a){__p&&__p();var f=b("MessengerSharedPhotosVideosData.bs").get(g);if(k){var h=k[0];if(f)if(f[0][0][1]&&!(e||!b("bs_curry")._1(c,0)||b("bs_curry")._1(d,0)===0))return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)});else return 0;else return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)})}else return 0};return[j[0],j[1],j[2],j[3],function(c){__p&&__p();var d=b("MercuryDispatcher").getForFBID(a),e=d.subscribe("update-messages",function(d,e){__p&&__p();if(e==null)return 0;else if(e.payload_source===b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE){d=e.actions;if(d.length!==1)return 0;else{d=d[0];var f=d.thread_id,g=b("MercuryIDs").getThreadFBIDFromThreadID(f);d=d.attachments;if(d==null)return 0;else{var h=d.some(function(a){if(b("MercuryAttachment").isPhotoAttachment(a))return!0;else return b("MercuryAttachment").isVideoAttachment(a)});if(h)return b("MessengerSharedPhotosVideosData.bs").fetchNewer(Math.max(d.length,10),g,f,function(){return b("bs_curry")._1(c[3],0)});else return 0}}}else if(e.payload_source===b("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET){h=e.actions;if(h.length!==1)return 0;else{d=h[0];var i=d.thread_id;g=b("MercuryMessages").getForFBID(a);f=b("bs_belt_Array").some(g.getMessagesFromIDs(d.deleted_ids),function(a){__p&&__p();if(a==null)return!1;else{a=a.attachments;a=a==null?[]:b("bs_belt_Array").keepMap(a,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return 0;else return b("bs_js_primitive").null_undefined_to_opt(a.fbid)}else return 0});if(a.length!==0){b("MessengerSharedPhotosVideosData.bs").localRemove(i,a);return!0}else return!1}});if(f)return b("bs_curry")._1(c[3],0);else return 0}}else return 0});b("bs_curry")._1(c[4],function(){e.unsubscribe();return 0});return m(c)},function(a){return m(a[0])},j[6],j[7],function(a){__p&&__p();var c=b("MessengerSharedPhotosVideosData.bs").get(g);if(k&&c){var d=c[0][1];if(d&&d[0][0].length!==0){d=c[0];c=d[1][0];var j=k[0],l=a[1][1];l=l?b("ReasonReact.bs").element(0,0,b("SpotlightMessengerSharedMediaViewerContainerReact.bs").make(function(){return b("bs_curry")._1(a[3],1)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},l[0],"",j,!1,[])):null;var m=a[1][0];j=m?b("ReasonReact.bs").element(0,["spotlightViewer"],b("SpotlightViewerReact.bs").make("_3ode",function(){return b("bs_curry")._1(a[3],2)},!0,[b("ReasonReact.bs").element(0,0,b("MessengerSharedPhotosAlbumViewContainerReact.bs").make(function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))},function(){return b("bs_curry")._1(a[3],2)},j,m[0],[]))])):null;m=h._("Shared Photos");return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(0,[!0],[e],[f],[m],[l,j,b("React").createElement("div",{className:"_40jj _5l-3"},b("bs_belt_Array").map(c[0],function(e){__p&&__p();var c=e.node.image;c=c==null?["_3m31 _ooh",0]:["_3m31",[c.uri]];var f=c[1];e=e.node;var g=e.photo_encodings,d;if(g==null)d=[!1,f];else if(g.length!==0){g=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings(g).smallThumbnail;g=g==null?f:[g];d=[!0,g]}else d=[!1,f];return b("ReasonReact.bs").element([e.legacy_attachment_id],0,b("MessengerSharedPhotoReact.bs").make(c[0],e.legacy_attachment_id,function(c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))},d[1],d[0],[]))})),d[0][1]&&!c[3]?i:null]))}else return null}else return null},function(){return[0,0]},j[10],function(a,c){if(typeof a==="number")switch(a){case 0:return b("bs_block").__(0,[c]);case 1:return b("bs_block").__(0,[[c[0],0]]);case 2:return b("bs_block").__(0,[[0,c[1]]])}else switch(a.tag|0){case 0:return b("bs_block").__(0,[[[a[0]],0]]);case 1:return b("bs_block").__(0,[[0,[a[0]]]]);case 2:return b("bs_block").__(0,[[c[0],[a[0]]]])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.viewer,a.getIsScrolledToBottom,a.getScrollableHeight,a.isCollapsed,a.onToggle,a.threadID,b("bs_js_primitive").null_undefined_to_opt(a.threadFBID),[])});f.endOfMediaIndicator=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerThreadInfoPanel.react",["cx","fbt","BootloadOnRender.react","CurrentUser","MercuryMessages","MessageRequestUtils","immutable","ImmutableObject","JSResource","LazyComponent.react","MercuryMessageStore","MercuryThreadInfo","MessageThreadAssociatedObjectUtils","MessengerAddToConversationDialogReact.bs","MessengerAdminGroupUtils","MessengerConfig","MessengerContactAdapters","MessengerDialogs.bs","MessengerDomIDs.bs","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","MessengerInfoPanelNameSectionReact.bs","MessengerInfoPanelPeopleSection.react","MessengerInfoPanelGroupThreadDescriptionContainerReact.bs","MessengerInfoPanelThreadOptionsContainerReact.bs","MessengerInfoPanelThreadStatsContainerReact.bs","MessengerInfoPanelWorkContextContainerReact.bs","MessengerMessage.bs","MessengerSharedFilesReact.bs","MessengerSharedLinksContainer.react","MessengerSharedLinksContainerRoute","MessengerSharedPhotosReact.bs","MercuryIgnoredBlockedParticipants.bs","React","react-relay/classic/container/RelayRootContainer","SubscriptionsHandler","WorkModeConfig","gkx","idx","MarketplaceWWWFeatureGating"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerAddToConversationDialogReact.bs").jsComponent,k=b("MessengerDomIDs.bs").ids,l=b("MessengerInfoPanelNameSectionReact.bs").jsComponent,m=b("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent,n=b("MessengerInfoPanelThreadOptionsContainerReact.bs").jsComponent,o=b("MessengerInfoPanelThreadStatsContainerReact.bs").jsComponent,p=b("MessengerInfoPanelWorkContextContainerReact.bs").jsComponent,q=b("MessengerSharedFilesReact.bs").jsComponent,r=b("MessengerSharedPhotosReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=undefined,this.$3=!1,this.state={sharedLinksSection:null},this.$14=function(){this.$3=!1}.bind(this),this.$17=function(a,event){this.props.onContactSelect(b("MessengerContactAdapters").fromMercuryParticipant(a))}.bind(this),this.$16=function(a,c){this.props.onContactAction(a,b("MessengerContactAdapters").fromMercuryParticipant(c))}.bind(this),this.$15=function(event){event.preventDefault(),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{thread:this.props.thread,viewer:this.props.viewer})}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.thread.thread_id!==this.props.thread.thread_id||a.photosSectionCollapsed!==this.props.photosSectionCollapsed||a.filesSectionCollapsed!==this.props.filesSectionCollapsed||a.linksSectionCollapsed!==this.props.linksSectionCollapsed)&&(this.$2&&this.$2.release(),this.subscribeStoreUpdate(a.thread.thread_id),this.$3=!0,setTimeout(function(){return this.setState({sharedLinksSection:this.$4(!0)})}.bind(this),1e3))};a.prototype.subscribeStoreUpdate=function(a){this.$1=new(b("MercuryMessageStore"))(a),this.$2=new(b("SubscriptionsHandler"))(),this.$2.addSubscriptions(this.$1.subscribe(function(a){if(a.messages.length<1)return;var c=a.eventType==b("MercuryMessageStore").MESSAGES_RECEIVED,d=a.eventType==b("MercuryMessageStore").MESSAGES_CHANGED;a=a.messages[a.messages.length-1];if(!c&&!d)return;a.attachments&&a.attachments.length>0&&(this.$3=!0,setTimeout(function(){return this.setState({sharedLinksSection:this.$4(!0)})}.bind(this),1e3))}.bind(this)))};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.release()};a.prototype.componentDidUpdate=function(){this.$3||this.setState({sharedLinksSection:null})};a.prototype.render=function(){var a=this.props,c=a.viewer;a=a.thread;var d=a.thread_fbid||a.other_user_fbid,e=this.$3?this.state.sharedLinksSection:this.$4(!1),f=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIds,a);return b("React").createElement("div",{className:"_3tkv",id:k.THREAD_INFO_PANEL},b("React").createElement("h3",{className:"accessible_elem"},h._("Conversation Information")),b("React").createElement(l,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:f,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onPin:this.props.onPin,onUnpin:this.props.onUnpin,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showIgnoreGroup:b("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$5(),this.$6(),this.$7(),b("React").createElement(n,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),b("MessengerConfig").IGDE?this.$8():null,this.$9(),b("MessengerAdminGroupUtils").canSeeGroupOptionsSection(a,c)?this.$10():null,this.$11(),this.props.thread.is_canonical?null:this.$12(),b("MessengerConfig").canSaveMessages?this.$13():null,e,b("React").createElement(q,{threadID:a.thread_id,threadFBID:d,isCollapsed:this.props.filesSectionCollapsed,onToggle:this.props.onFilesSectionToggle}),b("React").createElement(r,{getIsScrolledToBottom:this.props.getIsScrolledToBottom,getScrollableHeight:this.props.getScrollableHeight,isCollapsed:this.props.photosSectionCollapsed,onToggle:this.props.onPhotosSectionToggle,threadID:a.thread_id,threadFBID:d,viewer:this.props.viewer}))};a.prototype.$4=function(a){if(!b("gkx")("AT67ptDj-ZaeW3Tyo9vbms2vYK1iy8t_jMuVqoEuGQXOqT3WIH9DEYXNBElJniUDVETCVboaIbfUes068dlrYLZO"))return null;var c=this.props.thread.thread_fbid||this.props.thread.other_user_fbid,d=new(b("MessengerSharedLinksContainerRoute"))({threadFBID:c});return b("React").createElement(b("react-relay/classic/container/RelayRootContainer"),{Component:b("MessengerSharedLinksContainer.react"),renderLoading:function(){return null},route:d,forceFetch:a,renderFetched:function(a){return b("React").createElement(b("MessengerSharedLinksContainer.react"),babelHelpers["extends"]({},a,{customColor:this.props.thread.solid_color,clearForceFetch:this.$14,getIsScrolledToBottom:this.props.getIsScrolledToBottom,getScrollableHeight:this.props.getScrollableHeight,isCollapsed:this.props.linksSectionCollapsed,threadFBID:c,onToggle:this.props.onLinksSectionToggle}))}.bind(this)})};a.prototype.$5=function(){var a=b("MessageThreadAssociatedObjectUtils").shouldRender(this.props.thread.associated_object);return!a?null:b("React").createElement(b("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.solid_color,associatedObject:this.props.thread.associated_object})};a.prototype.$7=function(){var a,c,d;a=(a=this.props.thread)!=null?a.marketplace_thread_data:a;c=(c=a)!=null?c.for_sale_item:c;d=(d=a)!=null?d.buyer_fbid:d;a=(a=a)!=null?a.seller_fbid:a;if(!c||!d||!a)return null;var e=b("MarketplaceWWWFeatureGating").marketplaceWWWMessengerBanner;return e?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("MessengerThreadInfoPanel.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:d,forSaleItem:c,renderLocation:"messenger",sellerID:a})}):null};a.prototype.$8=function(){var a;a=this.props.thread.marketplace_thread_data&&(((a=this.props.thread.marketplace_thread_data)!=null?a.for_sale_item:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.buyer_fbid:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.seller_fbid:a));a=a||this.props.thread.is_canonical||b("MessageRequestUtils").isMessageRequest(this.props.thread)||this.props.thread.associated_object;return a?null:b("React").createElement(m,{isCollapsed:this.props.groupThreadDescriptionSectionCollapsed,onToggle:this.props.onGroupThreadDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer})};a.prototype.$10=function(){return b("React").createElement(b("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})};a.prototype.$6=function(){var a=this.props.contact;return!b("CurrentUser").isWorkUser()||!a||!a.href||!b("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5")||b("WorkModeConfig").hide_email_address||a.type!=="user"&&a.type!=="fb4c"?null:b("React").createElement(p,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,onToggle:this.props.onThreadStatsSectionToggle,href:a.href})};a.prototype.$9=function(){return b("gkx")("AT5MgEQ2BX9EoYtDecXLd_H4PLe0dbm4AiKTfhaDnASNmsTXiM4GP6YZuoppqRP_9-lprti-5sdwbLUtVdnK9mMY")?b("React").createElement(o,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadStatsSectionToggle}):null};a.prototype.$12=function(){return b("React").createElement(b("MessengerInfoPanelPeopleSection.react"),{canViewerReply:b("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:b("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$15,onContactAction:this.$16,onContactSelect:this.$17,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread})};a.prototype.$13=function(){var a=h._("Saved Messages"),c=this.props,d=c.thread;c=c.viewer;var e=d.thread_id,f=b("MercuryMessages").getForFBID(c),g=b("MessengerMessage.bs").getSavedMessages(f.getThreadMessagesRangeNow(e,0,5));return!g||g.length===0?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerInfoPanelSavedMessageSection.react").__setRef("MessengerThreadInfoPanel.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{title:a,thread:d,viewer:c,onToggle:this.props.onSavedMessageSectionToggle,isSectionCollapsed:this.props.savedMessageSectionCollapsed,messages:b("MessengerMessage.bs").getSavedMessages(f.getThreadMessagesRangeNow(e,0,5))})})};a.prototype.$11=function(){return b("gkx")("AT6PPN9XdosR0Rgf7ysDaWH9yG554xZ0Vp0wqH9FcQWKWHefu3Fidk1XtmEfDBRdDx5TzVERt26C_olGYNMPgXP_hfHFkXphabtXKhBOj4fIqw")?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerInfoPanelGamesSection.react").__setRef("MessengerThreadInfoPanel.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{thread:this.props.thread})}):null};a.propTypes={blockedIds:c.instanceOf(Set).isRequired,contact:c.instanceOf(b("ImmutableObject")),getIsScrolledToBottom:c.func.isRequired,getScrollableHeight:c.func.isRequired,isUserActive:c.bool.isRequired,isBusinessEnabled:c.bool,lastActive:c.string,linksSectionCollapsed:c.bool.isRequired,onArchive:c.func.isRequired,onContactAction:c.func.isRequired,onContactSelect:c.func.isRequired,onDelete:c.func.isRequired,onLeaveGroup:c.func,onLinksSectionToggle:c.func.isRequired,onMarkRead:c.func.isRequired,onMarkSpam:c.func.isRequired,onMarkUnread:c.func.isRequired,onMute:c.func.isRequired,onAssociatedObjectSectionToggle:c.func.isRequired,onPeopleSectionToggle:c.func.isRequired,onPhotosSectionToggle:c.func.isRequired,onFilesSectionToggle:c.func.isRequired,onGroupThreadDescriptionSectionToggle:c.func.isRequired,onThreadOptionsSectionToggle:c.func.isRequired,onThreadStatsSectionToggle:c.func.isRequired,onGroupOptionsSectionToggle:c.func.isRequired,onGroupApprovalOptionsSectionToggle:c.func.isRequired,onSavedMessageSectionToggle:c.func.isRequired,onThreadNameChange:c.func.isRequired,onThreadPhotoChange:c.func.isRequired,onPin:c.func.isRequired,onUnpin:c.func.isRequired,onUnmute:c.func.isRequired,onIgnore:c.func.isRequired,onBlock:c.func.isRequired,onUnblock:c.func.isRequired,showBlock:c.bool.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,associatedObjectSectionCollapsed:c.bool.isRequired,peopleSectionCollapsed:c.bool.isRequired,photosSectionCollapsed:c.bool.isRequired,filesSectionCollapsed:c.bool.isRequired,platform:c.string,prevIsScrolledToBottom:c.bool.isRequired,prevScrollableHeight:c.number.isRequired,showLeaveGroup:c.bool.isRequired,thread:c.instanceOf(b("ImmutableObject")).isRequired,groupThreadDescriptionSectionCollapsed:c.bool.isRequired,threadOptionsSectionCollapsed:c.bool.isRequired,threadStatsSectionCollapsed:c.bool.isRequired,groupOptionsSectionCollapsed:c.bool.isRequired,groupOptionsApprovalsSectionCollapsed:c.bool.isRequired,savedMessageSectionCollapsed:c.bool.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={prevHeight:-1,prevIsScrolledToBottom:!1},this.$1=null,this.isScrolledToBottom=function(){if(this.refs.scrollable)return this.refs.scrollable.isScrolledToBottom();else return!0}.bind(this),this.getHeight=function(){if(this.refs.scrollable)return b("ReactDOM").findDOMNode(this.refs.scrollable).offsetHeight;else return 0}.bind(this),this.$2=function(){var a=this.isScrolledToBottom(),b=this.getHeight();(this.state.prevIsScrolledToBottom!==a||this.state.prevHeight!==b)&&this.setState({prevHeight:b,prevIsScrolledToBottom:a})}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2},b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable"},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};a.propTypes={children:c.func.isRequired};e.exports=a}),null);
__d("XMessagingSetThreadImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_image/",{})}),null);
__d("XMessagingSetThreadNameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_name/",{})}),null);
__d("MessengerThreadInfoPanelContainer.react",["fbt","AsyncRequest","ChatPinnedThreadsEntryPoint","IgnoreMessagesTypedLogger","immutable","ImmutableObject","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerContactActions.bs","MessengerDialogs.bs","MessengerLeaveGroupAction","MessengerMessageRequestsTypedLogger","MessengerSettingsActions","MessengerSettingsStore","MessengerThreadInfoPanel.react","MessengerThreadInfoPanelScrollableArea.react","React","ReactComponentWithPureRenderMixin","StoreAndPropBasedStateMixin","URI","XMessagingSetThreadImageController","XMessagingSetThreadNameController","getPageIDFromThreadID","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,i=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,j=b("MessengerContactActions.bs").actions;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadInfoPanelContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerSettingsStore"))],propTypes:{blockedIds:a.instanceOf(Set).isRequired,contactData:a.object,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},statics:{calculateState:function(){var a=b("MessengerSettingsStore").getSettings(),c=a.links_section_collapsed,d=a.associated_object_section_collapsed,e=a.people_section_collapsed,f=a.photos_section_collapsed,g=a.files_section_collapsed,h=a.thread_section_collapsed,i=a.thread_stats_section_collapsed,j=a.group_section_collapsed,k=a.group_approval_section_collapsed,l=a.description_section_collapsed;a=a.saved_message_section_collapsed;return{links_section_collapsed:c,associated_object_section_collapsed:d,people_section_collapsed:e,photos_section_collapsed:f,files_section_collapsed:g,thread_section_collapsed:h,thread_stats_section_collapsed:i,group_section_collapsed:j,group_approval_section_collapsed:k,description_section_collapsed:l,saved_message_section_collapsed:a}}},render:function(){var a=this.props.contactData||{},c=this.state,d=c.links_section_collapsed,e=c.associated_object_section_collapsed,f=c.people_section_collapsed,g=c.photos_section_collapsed,h=c.files_section_collapsed,i=c.thread_section_collapsed,j=c.thread_stats_section_collapsed,k=c.group_section_collapsed,l=c.group_approval_section_collapsed,m=c.description_section_collapsed,n=c.saved_message_section_collapsed;return b("React").createElement(b("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className},function(c,o,p,q){return b("React").createElement(b("MessengerThreadInfoPanel.react"),{blockedIds:this.props.blockedIds,contact:a.contact,getIsScrolledToBottom:p,getScrollableHeight:q,groupThreadDescriptionSectionCollapsed:m,isUserActive:a.isUserActive||!1,lastActive:a.lastActive,linksSectionCollapsed:d,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onLinksSectionToggle:this._handleLinksSectionToggle,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onGroupThreadDescriptionSectionToggle:this._handleDescriptionSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onThreadStatsSectionToggle:this._handleThreadStatsSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onSavedMessageSectionToggle:this._handleSavedMessageSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onPin:this._handlePin,onUnpin:this._handleUnpin,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:e,peopleSectionCollapsed:f,photosSectionCollapsed:g,filesSectionCollapsed:h,platform:a.platform,prevIsScrolledToBottom:o,prevScrollableHeight:c,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,threadOptionsSectionCollapsed:i,threadStatsSectionCollapsed:j,groupOptionsSectionCollapsed:k,groupOptionsApprovalsSectionCollapsed:l,savedMessageSectionCollapsed:n,viewer:this.props.viewer})}.bind(this))},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleDelete:function(){this._getThreadActions()["delete"](this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other"),b("MessengerActions").selectThread(null),new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function(){var a=this.props.thread;a=a.thread_id;var b=this.props.contactData&&this.props.contactData.contact.short_name||g._("sender");a&&this._getThreadActions().blockIgnoreOnMessengerDotCom(!0,a,function(){this._handleAfterBlock(b)}.bind(this))},_handleAfterBlock:function(a){var c=this.props,d=c.thread;c=c.viewer;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{participantName:a})});c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.thread_id,b("MercuryIDs").getParticipantIDFromUserID(c));d.folder===b("MessagingTag").PENDING&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)).setSurface("thread").setFolderType(b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint("settings").log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleContactSelect:function(a,event){a=b("MercuryIDs").getThreadIDFromParticipantID(a.uid);a&&b("MessengerActions").selectThread(a)},_handleContactAction:function(a,c){__p&&__p();if(b("MercuryIDs").getUserIDFromParticipantID(c.uid)!==this.props.viewer)switch(a){case j.MESSAGE:this._handleContactSelect(c);break;case j.PROFILE:var d=this.props.participants.get(c.uid);d&&d.href?window.open(d.href):this._handleContactSelect(c);break;case j.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){d=new(b("URI"))("/chat/remove_participants/");d.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(c.uid),tid:this.props.thread.thread_fbid});d=new(b("AsyncRequest"))(d);d.send()}break}switch(a){case j.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)||this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(c.uid)],!1);break;case j.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)||this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(c.uid)],!0);break}},_handleLeaveGroup:function(){var a=this;this.props.viewer&&(function(){var c=b("MessengerAdminGroupUtils").isAdmin(a.props.thread.admin_ids,a.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:c,thread:this.props.thread})}.bind(a))})()},_onLeaveGroupConfirm:function(){b("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function(a){var c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:this.props.thread.thread_fbid,thread_name:a}).send()},_handleThreadPhotoChange:function(a,c){c=(c=c)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.image_id:c:c:c;if(!c)return;var d=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(a),thread_image_id:c}).send()},_handleAssociatedObjectSectionToggle:function(){b("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function(){b("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function(){b("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function(){b("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function(){b("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_handleDescriptionSectionToggle:function(){b("MessengerSettingsActions").changeSettings({description_section_collapsed:!this.state.description_section_collapsed})},_handleSavedMessageSectionToggle:function(){var a=!this.state.saved_message_section_collapsed;b("MessengerSettingsActions").changeSettings({saved_message_section_collapsed:a})},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function(){return!!b("getPageIDFromThreadID")(this.props.thread.thread_id)}});e.exports=c}),null);
__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null,UPDATE_THREAD_STATE:null});a={Types:g,selectPrevious:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:1})},selectNext:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function(a,c){b("MessengerDispatcher").dispatch({type:g.GET_MORE_CONTEXT,direction:a,threadID:c})},updateThreadState:function(a,c){b("MessengerDispatcher").dispatch({type:g.UPDATE_THREAD_STATE,threadID:a,mid:c})},loadMoreThreads:function(){b("MessengerDispatcher").dispatch({type:g.GET_MORE_THREADS})}};e.exports=a}),null);
__d("MercurySearchContextResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryThreadlistConstants","MercuryThreadIDMap","RangedCallbackManager","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MessengerMessageTransformer.bs","WebMessengerConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("MercuryServerPayloadPreprocessor").get(),i=new(b("KeyedCallbackManager"))(),j=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,k=b("WebMessengerConstants").MORE_SEARCH_CONTEXT_COUNT;a={getSearchContext:function(a,c,d){__p&&__p();if(a){var e=i.executeOrEnqueue(a,function(b){b=m(b,a);d(b)}),f=i.getUnavailableResources(e);if(f.length){f={message_id:a,limit:j+1};var h=g.getServerIDFromClientIDNow(c);c=b("MercuryIDs").tokenize(c);c.type=="user"?f.other_user_fbid=h:f.thread_fbid=h;n(f)}return e}},getMoreSearchContext:function(a,c,d,e){__p&&__p();if(a){var f=i.getResource(a);if(f){var h=d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?f.up_message_ids:f.down_message_ids,j=h.getCurrentArraySize()+k,l=h.executeOrEnqueue(0,j,function(){var b=m(f,a);e(b)});h=h.getUnavailableResources(l);if(h.length){h={message_id:a,limit:j,direction:d};j=g.getServerIDFromClientIDNow(c);d=b("MercuryIDs").tokenize(c);d.type=="user"?h.other_user_fbid=j:h.thread_fbid=j;n(h)}return l}}},handleUpdate:function(a){__p&&__p();if(a.graphql_payload){var c=a.graphql_payload.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(a.viewer,c,a.thread_data,a.for_page)});h.handleUpdate({actions:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.search_context||{};for(var d in c){var e=c[d],f=e.other_user_fbid||e.thread_fbid;f=g.getClientIDFromServerIDNow(f);var m=!i.getResource(d);f=m?{thread_id:f,up_message_ids:new(b("RangedCallbackManager"))(),down_message_ids:new(b("RangedCallbackManager"))()}:i.getResource(d);var n=m?j+1:k;e.up_message_ids&&(f.up_message_ids.getCurrentArraySize()===0||e.up_message_ids.length>=f.up_message_ids.getCurrentArraySize())&&l(f.up_message_ids,e.up_message_ids,n);e.down_message_ids&&(f.down_message_ids.getCurrentArraySize()===0||e.down_message_ids.length>=f.down_message_ids.getCurrentArraySize())&&l(f.down_message_ids,e.down_message_ids,n);m&&i.setResource(d,f)}},unsubscribe:function(a,c,d){if(c){c=i.getResource(c);c?d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?c.up_message_ids.unsubscribe(a):c.down_message_ids.unsubscribe(a):i.unsubscribe(a)}}};function l(a,b,c){var d=a.getCurrentArraySize();d=b.length<d+c;b.length&&(a.removeAllResources(),a.addResourcesWithoutSorting(b,0));d&&a.setReachedEndOfArray()}function m(a,b){var c=a.up_message_ids.hasReachedEndOfArray(),d=a.up_message_ids.getAllResources();c||d.shift();var e=a.down_message_ids.hasReachedEndOfArray(),f=a.down_message_ids.getAllResources();e||f.pop();return{thread_id:a.thread_id,message_id:b,up_message_ids:d,up_exhausted:c,down_message_ids:f,down_exhausted:e}}function n(a){a.client=b("MercuryAPIArgsSource").WEBMESSENGER,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_context.php",a)}b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_context.php":{mode:b("MercuryServerDispatcher").IMMEDIATE,handler:a.handleUpdate}});e.exports=a}),null);
__d("MessengerThreadSearchStore",["cx","Bootloader","immutable","ImmutableObject","MercuryMessages","MercurySearchContextResults","MercurySearchSnippetResults","MercuryThreads","MessengerActions","MessengerComposerSteps","MessengerComposerStore","MessengerContentSearchFunnelLoggerConstants","MessengerDispatcher","MessengerStore","MessengerThreadSearchActions","MessengerURIStore","MessengerView"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("immutable").List;d=b("immutable").Record;f=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS;var i=f.BROWSE_CONTEXT,j=f.BROWSE_MESSAGE_IN_THREAD,k=f.LOAD_MORE_THREADS,l=f.LOAD_MESSAGE_IN_THREAD,m=f.SELECT_THREAD,n=f.THREAD_IMPRESSIONS,o=d({downExhausted:null,loading:!1,messages:null,query:null,results:c(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});g=babelHelpers.inherits(a,b("MessengerStore"));h=g&&g.prototype;function a(){h.constructor.call(this),this.$MessengerThreadSearchStore3=new o()}a.prototype.getForFBID=function(a){this.$MessengerThreadSearchStore4=new(b("MercurySearchSnippetResults"))(a),this.$MessengerThreadSearchStore1=b("MercuryMessages").getForFBID(a),this.$MessengerThreadSearchStore2=b("MercuryThreads").getForFBID(a)};a.prototype.getState=function(){return this.$MessengerThreadSearchStore3};a.prototype.__onDispatch=function(a){__p&&__p();if(!this.$MessengerThreadSearchStore4)return;b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState(),d=c.activeThreadID,e=c.masterView,f=c.mid,g=c.query;c=e===b("MessengerView").MASTER.SEARCH;switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:if(f!=this.$MessengerThreadSearchStore3.mid&&d!=this.$MessengerThreadSearchStore3.activeThreadID){f&&d?(this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:d,mid:f}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this))):(this.$MessengerThreadSearchStore8(),this.$MessengerThreadSearchStore3=new o());return}else(this.$MessengerThreadSearchStore3.query!==g||this.$MessengerThreadSearchStore3.threadID!==d)&&(g&&!f?b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL?this.$MessengerThreadSearchStore9():(this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",!0),this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(g,d,function(a,b){this.$MessengerThreadSearchStore10({name:m,thread_id:d,has_results:b?b>0:!1}),this.accumulateSearchResultsAndEmitChange(g,d,0,a,b)}.bind(this))):this.$MessengerThreadSearchStore9(),c?(this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",!0),g!==this.$MessengerThreadSearchStore3.query?(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore4.getAllThreadSearchResults(g,function(a,b){this.setAllThreadResults(a,b);b=Object.keys(a);this.$MessengerThreadSearchStore10({name:n,threads:b})}.bind(this))):(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore4.getAllLocalThreadSearchResults(g,function(a,b){return this.setAllThreadResults(a,b)}.bind(this)))):this.$MessengerThreadSearchStore11(),this.emitChange());break;case b("MessengerThreadSearchActions").Types.CHANGE_RESULT_INDEX:var h=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+a.delta),0);if(h===this.$MessengerThreadSearchStore3.selectedIndex)break;h>=this.$MessengerThreadSearchStore3.results.size?(this.$MessengerThreadSearchStore10({name:j,thread_id:this.$MessengerThreadSearchStore3.threadID}),this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",!0),this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(g,d,function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.accumulateSearchResultsAndEmitChange.apply(this,[g,d,h].concat(b))}.bind(this))):(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore10({name:j,thread_id:this.$MessengerThreadSearchStore3.threadID}),this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:!0,selectedIndex:h}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this)));this.emitChange();e=this.$MessengerThreadSearchStore3.results.get(h).toObject();this.$MessengerThreadSearchStore10({name:l,mid:e.message_id,thread_id:this.$MessengerThreadSearchStore3.threadID,latency:Date.now()-this.$MessengerThreadSearchStore6});break;case b("MessengerThreadSearchActions").Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",!0);b("MercurySearchContextResults").getMoreSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,a.direction,function(a){this.setMessages(a),this.$MessengerThreadSearchStore10({name:i})}.bind(this));this.emitChange();break;case b("MessengerThreadSearchActions").Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore5=Date.now();this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",!0);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(g,function(a,b){this.$MessengerThreadSearchStore10({name:k,threads:Object.keys(a),latency:Date.now()-this.$MessengerThreadSearchStore5}),this.setAllThreadResults(a,b)}.bind(this));this.emitChange();break}};a.prototype.setAllThreadResults=function(a,c){__p&&__p();var d=Object.keys(a);d=d.map(function(c){c=this.$MessengerThreadSearchStore2.getThreadMetaNow(c);if(!c)return;var d=a[c.thread_id];if(!d)return;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{snippetCount:d.num_total_snippets}))}.bind(this)).filter(function(a){return a});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:d,threadsExhausted:c,loading:!1});this.emitChange()};a.prototype.$MessengerThreadSearchStore11=function(){this.$MessengerThreadSearchStore12(["threads","threadsExhausted","loading"])};a.prototype.accumulateSearchResultsAndEmitChange=function(a,c,d,e,f){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:a,threadID:c,selectedIndex:d,results:e,totalCount:f});if(this.$MessengerThreadSearchStore3.results.size){b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this));a=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.$MessengerThreadSearchStore10({name:l,mid:a.toObject().message_id,thread_id:this.$MessengerThreadSearchStore3.threadID,latency:Date.now()-this.$MessengerThreadSearchStore6})}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange()};a.prototype.$MessengerThreadSearchStore9=function(){this.$MessengerThreadSearchStore8(),this.$MessengerThreadSearchStore12(["query","threadID","selectedIndex","results","totalCount","downExhausted","loading","messages","upExhausted"])};a.prototype.$MessengerThreadSearchStore12=function(a){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(b){a.forEach(function(a){return b.remove(a)})})};a.prototype.setMessages=function(a){__p&&__p();var c=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(a.up_message_ids,a.message_id,a.down_message_ids)).map(function(c){__p&&__p();var d,e=this;if(c&&c.message_id===a.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var d=function(){var a=e.$MessengerThreadSearchStore3.results.get(e.$MessengerThreadSearchStore3.selectedIndex).toJS(),d=a.matched_keywords,f=c.body.indexOf(a.body);a=Object.keys(a.matched_keywords).map(function(a){return{offset:f+Number(a),length:d[a].length,entity:{url:""},className:"__in"}});return{v:new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{ranges:c.ranges?c.ranges.concat(a):a}))}}();if(typeof d==="object")return d.v}else return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{isSelected:!0}));return c}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:a.down_exhausted,loading:!1,messages:c,upExhausted:a.up_exhausted});this.emitChange()};a.prototype.$MessengerThreadSearchStore7=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,"message_id"])};a.prototype.$MessengerThreadSearchStore8=function(){if(this.$MessengerThreadSearchStore3.messages){var a=this.$MessengerThreadSearchStore3.messages.map(function(a){return a.message_id}).toArray();this.$MessengerThreadSearchStore1.invalidateSearchedMessages(a)}};a.prototype.$MessengerThreadSearchStore10=function(event){__p&&__p();b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){__p&&__p();if(a&&event)switch(event.name){case j:a.browseMessageInThread(event.thread_id);break;case k:a.logLoadMoreThreads(event.threads,event.latency);break;case m:a.logThreadSelect(event.thread_id,event.has_results);break;case l:a.loadMessageInThread(event.mid,event.thread_id,event.latency);break;case n:a.logThreadImpressions(event.threads);break;case i:a.logContextBrowse();break}},"MessengerThreadSearchStore")};e.exports=new a()}),null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;a={start:function(){g||b("PageTransitions").registerHandler(h,6),g=!0},stop:function(){b("PageTransitions").removeHandler(h,6),g=!1}};function h(a){a=b("MessengerURISerializer").deserialize(a);if(a.notMessenger)return!1;b("PageTransitions").transitionComplete();b("MessengerActions").changeState(a);return!0}e.exports=a}),null);
__d("WorkchatAppKeyboardShortcut.react",["cx","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("immutable").List;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_2_xt _4lrb"},b("React").createElement("div",{className:"_4lrc"},this.props.label),b("React").createElement("div",{className:"_4lrl"},this.props.keys.map(function(a){return b("React").createElement("span",{className:"_4lrm",key:a},a)})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("WorkchatAppKeyboardShortcutsDialog.react",["cx","fbt","immutable","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","React","WorkchatAppKeyboardShortcut.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("immutable").List,k=b("MessengerDialogBodyReact.bs").jsComponent,l=function(a){return a==="darwin"?{CmdOrCtrl:"\u2318",Alt:"\u2387",Shift:"\u21e7",Tab:"\u21b9",Up:"\u2191",Down:"\u2193"}:{CmdOrCtrl:"Ctrl",Alt:"Alt",Shift:"Shift",Tab:"Tab",Up:"\u2191",Down:"\u2193"}},m=function(a){a=l(a);return j([{Header:"General",Shortcuts:j([{label:h._("Create new chat"),keys:j([a.CmdOrCtrl,"N"])},{label:h._("Seach chats"),keys:j([a.CmdOrCtrl,"K"])},{label:h._("Show\/hide notifications"),keys:j([a.CmdOrCtrl,"/"])}])},{Header:"Navigation",Shortcuts:j([{label:h._("Go to previous chat"),keys:j([a.Alt,a.Up])},{label:h._("Go to next chat"),keys:j([a.Alt,a.Down])},{label:h._("Go to next element"),keys:j([a.Tab])},{label:h._("Open\/select element"),keys:j(["Spacebar"])}])},{Header:"In a Conversation",Shortcuts:j([{label:h._("Show\/hide information"),keys:j([a.CmdOrCtrl,"."])},{label:h._("Mute\/unmute chat"),keys:j([a.CmdOrCtrl,a.Shift,"M"])},{label:h._("Find in chat"),keys:j([a.CmdOrCtrl,"F"])},{label:h._("Start call"),keys:j([a.CmdOrCtrl,a.Shift,"C"])},{label:h._("Start video call"),keys:j([a.CmdOrCtrl,a.Shift,"V"])}])},{Header:"During a Call",Shortcuts:j([{label:h._("Toggle mute"),keys:j(["M"])},{label:h._("Toggle video"),keys:j(["V"])}])}])};c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={allShortcuts:m(this.props.platform)},b}a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1,type:"default",width:560},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Keyboard Shortcuts")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),type:"primary",use:"default"})),b("React").createElement(k,null,this.$2()))};a.prototype.$2=function(){return b("React").createElement("div",{className:"_4yne"},this.state.allShortcuts.map(function(a,c){return b("React").createElement("div",{className:"_2_xt"+(c!==0?" _4ynf":""),key:a.Header},b("React").createElement("div",{className:"_4ynr"},a.Header),b("React").createElement("div",null,a.Shortcuts.map(function(a){return b("React").createElement(b("WorkchatAppKeyboardShortcut.react"),{key:a.label,keys:a.keys,label:a.label})})))}))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};e.exports=a}),null);
__d("WorkchatAppBridge",["fbt","invariant","Arbiter","CurrentLocale","CurrentUser","immutable","MercuryDispatcher","MercuryIDs","MercuryMessages","MercuryThreadActions","MercuryThreadInfo","MercuryThreads","MercuryUnseenState","MessengerActions","MessengerDialogs.bs","MessengerInfoPanelSearchReact.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerPromotionDataActions","MessengerRTCInvokeHandler","MessengerSettingsActions","MessengerSettingsStore","MessengerURIListener","MessengerURIStore","React","WorkchatAppKeyboardShortcutsDialog.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={TOGGLE_NOTIFICATION_DIALOG:"TOGGLE_NOTIFICATION_DIALOG",getParticipants:function(a,c){var d=b("immutable").Map();return d.withMutations(function(d){a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))}),a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))})},handleStartCall:function(a){var c=b("CurrentUser").getAccountID(),d=b("MessengerURIStore").getState().activeThreadID;d||h(0);var e=b("MercuryThreads").getForFBID(c).getOrFetch(d);e||h(0);var f=i.getParticipants(e,c),g=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(f,e);g=g?g.contact.name:"";var j=b("MessengerRTCInvokeHandler").isCallable(d,e);b("MessengerRTCInvokeHandler").handleStartCall(d,e,a,c,f,g,j)},toggleWorkNotificationJewel:function(){b("Arbiter").inform(i.TOGGLE_NOTIFICATION_DIALOG)},toggleKeyboardShortCutsList:function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("WorkchatAppKeyboardShortcutsDialog.react"),{platform:a})})},toggleInfoPanel:function(){var a=b("MessengerSettingsStore").getSettings().info_sidebar_collapsed;b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!a})},getCurrentUser:function(){return{isWorkUser:b("CurrentUser").isWorkUser,isEmployee:b("CurrentUser").isEmployee,getID:b("CurrentUser").getID}},getCurrentLocale:function(){return b("CurrentLocale").get()},subscribeToUnseenMessageCount:function(a){var c=b("MercuryUnseenState").get(),d=b("MercuryDispatcher").get();d.subscribe("update-unseen",function(){return a(c.getUnseenCount())})},enableDesktopNotifs:function(){b("MessengerSettingsActions").changeDesktopNotifs(!0)},onSampleTextFromThread:function(a){__p&&__p();function c(){var c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;b("MercuryMessages").get().getThreadMessagesRange(c,0,10,function(b){b=b.map(function(a){return a.body}).join("\n");a(b)})}c();b("MessengerURIStore").addListener("change",function(){c()})},selectThread:function(a){b("MessengerActions").selectThread("thread:"+a)},newThread:function(){b("MessengerActions").changeDetailView("detail/compose")},searchInChat:function(){var a={preventDefault:function(){}};b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!1});b("MessengerInfoPanelSearchReact.bs").handleSearchThreadClick(a)},restartURIListener:function(){b("MessengerURIListener").stop(),b("MessengerURIListener").start()},toggleMuteConversation:function(){var a=b("CurrentUser").getID(),c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;var d=b("MercuryThreads").getForFBID(a).getOrFetch(c);if(!d)return;d=b("MercuryThreadInfo").isMuted(d);a=b("MercuryThreadActions").getForFBID(a);d?a.unmute(c):a.updateMuteSetting(c,-1)},showAppUpdateBanner:function(a){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:g._("A new version is available with improvements and fixes."),primaryActionTitle:g._("Click to update"),primaryActionCallback:a})}};e.exports=i}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","EventReminderStateStore","immutable","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MercuryThreads","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerErrorBoundary.react","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","MessengerWebDriverTestIDs","Parent","PresenceStatus","React","SubscriptionsHandler","WorkchatAppBridge","AvailableList","emptyFunction","gkx","ifRequired","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerDomIDs.bs").ids;b("WorkchatAppBridge");b("AvailableList");a=b("React").PropTypes;function k(event,a,c,d){if(!b("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!a)return null;return!event?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,participants:c,viewer:d})})}c=b("React").createClass({displayName:"MessengerDetailView",_composer:undefined,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,propTypes:{activeThreadID:a.string,blockedIds:a.instanceOf(Set).isRequired,deliveryReceipts:a.object,messengerState:a.any,readReceipts:a.object,view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,showMinimalForRTC:a.bool},calculateState:function(a){__p&&__p();var c=a.activeThreadID,d=b("MercuryThreads").getForFBID(a.viewer),e=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!e.recipients&&i(0);var f=e.recipients;f.size===1?c=b("MercuryIDs").getThreadIDFromUserID(f.first().getUniqueID().toString()):f.size>1&&(c=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(f).map(function(a){return a.getUniqueID().toString()})))}var g=c?d.getOrFetch(c):null;f=b("immutable").Map();var h=[];this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);if(g&&c){f=f.withMutations(function(c){g.participants&&g.participants.forEach(function(a){var d=b("MessengerParticipants.bs").getNow(a);c.set(a,d);d||h.push(a)});var d=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),e=b("MessengerParticipants.bs").getNow(d);g.is_subscribed&&c.set(d,e);e||h.push(d)});h.length>0&&(this._participantSubscription=b("MessengerParticipants.bs").getMulti(h,function(c){var d={};g.participants&&g.participants.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);d[a]=c});c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);var e=b("MessengerParticipants.bs").getNow(c);g.is_subscribed&&(d[c]=e);this._participantSubscription=null;this.setState({participants:b("immutable").Map(d)})}.bind(this)));if(b("EventRemindersGating").shouldShowPlansOnMessengerCom){var event=g?g.lightweight_event:null;if(event)b("EventReminderActions").updateEventReminder(c,event);else{d=b("EventReminderStateStore").getEvent(c);d&&d.exists&&b("EventReminderActions").deleteEventReminder(c)}}}d=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var j=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:c,composerState:e,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(f,g),activeThread:g,participants:f,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:d,sharePreivewState:j}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1},this.calculateState(this.props))},componentDidMount:function(){this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscribeToSubscrptionHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("MercuryThreads"),b("PresenceStatus")]),b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(a){this._subscribeToSubscrptionHandler([a])}.bind(this),"MessengerDetailView.react"),b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")&&b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(a){this._subscribeToSubscrptionHandler([a])}.bind(this),"MessengerDetailView.react")},_subscribeToSubscrptionHandler:function(a){var b=function(){this.setState(this.calculateState(this.props))}.bind(this),c=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?c.push(a.addListener(b)):a.subscribe?c.push(a.subscribe("change",b)):a.addListener?c.push(a.addListener("change",b)):i(0)});if(c.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,c)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage()},_renderMessageView:function(a){var c=void 0;this.state.activeThread&&(c=this.props.query==null?k(this.state.activeThread.lightweight_event,a,this.state.participants,this.props.viewer):null);return b("React").createElement("div",{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation"},this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),b("React").createElement("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),(b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")||b("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ"))&&this._renderUploadFiles(a))},render:function(){var a=this.state.activeThreadID;if(this.props.showMinimalForRTC)return this._renderMessageView(a);else{var c=this._getMainLabelDetails();return b("React").createElement("div",{"aria-labelledby":c.labelIDs,className:"_1t2u",role:"main"},b("React").createElement("div",{className:"hidden_elem",id:j.MAIN_LABEL},c.labelText," "),b("React").createElement(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.solid_color},b("React").createElement(b("MessengerDetailViewHeaderContainer.react"),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser}),b("React").createElement("div",{className:"_20bp"},this._renderInfoPanel(),this._renderMessageView(a))))}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.uploadFilesState.get(a)||{},d=this.state.sharePreivewState.get(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,uploadedFiles:c.uploadedFiles,uploadingFiles:c.uploadingFiles,sharePreview:d})})},_renderSearchView:function(a){return a&&!this.props.mid&&this.props.query!=null?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",{className:"_33p7 _5iwm"}),component:b("React").createElement(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a)return b("React").createElement("div",{className:"_1ut7"});var c=this.state.contactData?this.state.contactData.contact:null;return this.state.searchResults.messages?b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversation.react"),{className:"_1wfr",contact:c,deliveryReceipts:this.props.deliveryReceipts,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,participants:this.state.participants,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,isSearchResult:!!this.state.searchResults.query})):b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversationContainer.react"),{className:"_1wfr",contact:c,deliveryReceipts:this.props.deliveryReceipts,messengerState:this.props.messengerState,onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,participants:this.state.participants,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer}))},_renderFooterView:function(a){var c=b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread);return b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer"},b("React").createElement(b("MessengerComposerContainer.react"),{canReply:!!(!c&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return this._composer=a}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreivewState.get(a),showMinimalForRTC:this.props.showMinimalForRTC,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage}))},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed;a=a.participants;var f=this.props.view;return!c||!a||f===b("MessengerView").DETAIL.COMPOSE?null:b("React").createElement("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL},b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information"},b("React").createElement(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:a,thread:c,viewer:this.props.viewer})))},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("New Message"),labelIDs:j.MAIN_LABEL}:{labelText:h._("Conversation with"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){var c=this.props.activeThreadID;c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()&&this._handleMarkRead(c);if(window.getSelection().toString()!=="")return;c=a.target;if(c instanceof Node&&b("Parent").byTag(c,"a")!=null)return;a=this._getComposer();a&&a.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){__p&&__p();this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a})},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_getComposer:function(){return this._composer}});e.exports=c}),null);
__d("MessengerDetailViewReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerDetailView.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDetailView.react"),{activeThreadID:b("bs_js_null_undefined").fromOption(a),blockedIds:c,deliveryReceipts:d,readReceipts:e,messengerState:f,mid:b("bs_js_null_undefined").fromOption(g),query:b("bs_js_null_undefined").fromOption(h),view:b("bs_js_null_undefined").fromOption(i),viewer:j,isWorkUser:k},l)}f.make=a}),null);
__d("MessengerErrorBoundaryReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerErrorBoundary.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerErrorBoundary.react"),{className:b("bs_js_null_undefined").fromOption(a),component:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("P2PBannerStore",["invariant","EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;void 0;var i={},j=!1,k=!1;c=babelHelpers.inherits(a,b("EventEmitter"));h=c&&c.prototype;function a(){h.constructor.call(this),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.type;a=a.data;switch(c){case b("P2PActionConstants").BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(a);this.emit("change");break;case b("P2PActionConstants").BANNER_DISMISSED:this.handleBannerDismissed(a);this.emit("change");break;case b("P2PActionConstants").BANNER_COMPLETED:this.handleBannerCompleted(a);this.emit("change");break}};a.prototype.handleBannerStatesUpdated=function(a){j=!0,i=a};a.prototype.handleBannerDismissed=function(a){a=this.getBannerState(a);a.hasBeenDismissed=!0};a.prototype.shouldShowBanner=function(a){__p&&__p();void 0;if(!k){b("P2PAPI").getBannerStates();k=!0;return!1}if(!j)return!1;a=this.getBannerState(a);return a.eligible&&!a.hasBeenDismissed};a.prototype.handleBannerCompleted=function(a){a=this.getBannerState(a);a.eligible=!1};a.prototype.getBannerState=function(a){a=i[a];a||g(0);return a};e.exports=new a()}),null);
__d("P2PJewelBanner.react",["cx","fbt","ix","Image.react","Layout.react","P2PButton.react","React","TooltipLink.react","URI","XUIGrayText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").FillColumn,l=b("Layout.react").Column;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.handleCloseClick=function(a){a.stopPropagation(),this.props.onClose&&this.props.onClose()}.bind(this),this.handleClick=function(){this.execPrimaryClick()}.bind(this),this.handlePrimaryClick=function(a){a.stopPropagation(),this.execPrimaryClick()}.bind(this),this.execPrimaryClick=function(){this.props.primaryActionConfig.uri&&new(b("URI"))(this.props.primaryActionConfig.uri).go(),this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick()}.bind(this),this.handleSecondaryActionClick=function(a){a.stopPropagation(),this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick()}.bind(this),this.renderCloseButton=function(){return b("React").createElement(b("TooltipLink.react"),{alignH:"center",className:"_47d8",href:"#",onClick:this.handleCloseClick,position:"above",tooltip:h._("Dismiss")},b("React").createElement(b("Image.react"),{className:"_47dg",height:7,src:i("94375"),width:7}))}.bind(this),this.renderActions=function(){var a=this.props.primaryActionConfig,c=void 0,d=this.props.secondaryActionConfig;d&&(c=b("React").createElement(b("P2PButton.react"),{className:"_5d0t",href:"#",label:d.text,onClick:this.handleSecondaryActionClick,size:"large",target:"_blank",type:"primary"}));return b("React").createElement("div",null,c,b("React").createElement(b("P2PButton.react"),{className:"_5d0t",href:a.uri||"#",label:a.text,onClick:this.handlePrimaryClick,size:"large",target:"_blank",type:"primary",use:"confirm"}))}.bind(this),c}a.prototype.render=function(){var a=void 0;this.props.isDismissable&&(a=this.renderCloseButton());return b("React").createElement("div",{className:"_5d0n",onClick:this.handleClick,role:"presentation"},a,b("React").createElement(b("Layout.react"),null,b("React").createElement(l,{className:"_400i"},b("React").createElement("div",{className:"_400j"},b("React").createElement(b("Image.react"),{className:"_5d0q",height:50,src:i("94376"),width:50}))),b("React").createElement(k,{className:"_47di"},b("React").createElement("div",{className:"_400j"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",weight:"bold"},this.props.titleText),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"light"},this.props.bodyText))),b("React").createElement(l,{className:"_400k"},b("React").createElement("div",{className:"_400j"},this.renderActions()))))};a.propTypes={bodyText:c.node,isDismissable:c.bool,onClose:c.func,primaryActionConfig:c.shape({onClick:c.func,text:c.node.isRequired,uri:c.oneOfType([c.string,c.object])}).isRequired,secondaryActionConfig:c.shape({onClick:c.func.isRequired,text:c.node.isRequired}),titleText:c.node.isRequired};a.defaultProps={isDismissable:!1};e.exports=a}),null);
__d("P2PPendingPaymentRequestJewelBanner.react",["fbt","P2PJewelBanner.react","P2PPaymentRequest","P2PPaymentRequestActionHelper","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.handleDeclineClick=function(){b("P2PPaymentRequestActionHelper").initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){b("P2PPaymentRequestActionHelper").initPayForPaymentRequestFlow(this.props.paymentRequest,"banner")}.bind(this),this.renderBodyText=function(){var a=this.props.paymentRequest;a=a.memoText;return!a?null:g._("For {What the user paid for}",[g._param("What the user paid for",a)])}.bind(this),c}a.prototype.render=function(){var a=this.props.paymentRequest;return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:g._("Pay")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:g._("Decline")},titleText:g._("{requester_name} requested {amount}",[g._param("requester_name",a.requester.name),g._param("amount",a.amountWithSymbol)])})};a.propTypes={paymentRequest:c.instanceOf(b("P2PPaymentRequest")).isRequired};e.exports=a}),null);
__d("P2PPendingPushFailJewelBanner.react",["fbt","P2PJewelBanner.react","P2PLinkConstants","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.getActionText=function(){return g._("Learn More")},this.getBodyText=function(){var a=this.props.transfer;return g._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[g._param("currency",a.currency),g._param("amount",a.amount),g._param("sender_name",a.sender.name)])}.bind(this),b}a.prototype.render=function(){return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:b("P2PLinkConstants").helpTransferPushFailURI},titleText:g._("Update Your Card")})};a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PTimeBasedAcceptMessage.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.transfer,c=a.creationTime*1e3,d=1e3*60*60*24,e=Date.now();c=(e-c)/d;e=a.expirationTimestamp*1e3-e;e=Math.round(Math.max(e/d,1));d=void 0;c<=2?d=g._("Add a debit card and it'll go straight to your bank."):c<=4?d=g._("This money will be sent back in {days left} days. Add a debit card to accept it.",[g._param("days left",e)]):c<=5?d=g._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[g._param("days left",e),g._enum(e===1?"day":"days",{day:"day",days:"days"}),g._param("sender_name",a.sender.name)]):d=g._("You have 24 hours to add a debit card before the money is sent back to {sender_name}.",[g._param("sender_name",a.sender.name)]);return b("React").createElement("div",null,d)};function a(){h.apply(this,arguments)}a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PPendingRecipientNUXJewelBanner.react",["fbt","P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PJewelBanner.react","P2PTimeBasedAcceptMessage.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPendingRecipientNUXJewelBanner",propTypes:{transfer:a.object.isRequired},getInitialState:function(){return{creditCards:b("P2PCreditCardStore").getAll()}},creditCardStoreSub:null,componentDidMount:function(){this.creditCardStoreSub=b("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)},componentWillUnmount:function(){this.creditCardStoreSub&&(this.creditCardStoreSub.remove(),this.creditCardStoreSub=null)},onCreditCardStoreChange:function(){var a={creditCards:b("P2PCreditCardStore").getAll()};this.isMounted()&&this.setState(a)},handleClick:function(){this.showAcceptMoneyDialog()},showAcceptMoneyDialog:function(){b("P2PActions").showDialog(b("P2PAcceptMoneyDialog.react"),{creditCards:this.state.creditCards,onClose:b("P2PActions").hideDialog,transfer:this.props.transfer})},renderTimeBasedMessage:function(){return b("React").createElement(b("P2PTimeBasedAcceptMessage.react"),{transfer:this.props.transfer})},render:function(){var a=this.props.transfer;return!b("P2PCreditCardStore").isCreditCardsFetchComplete()?null:b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:g._("Add Card")},titleText:g._("Accept {currency}{amount} from {sender_name}.",[g._param("currency",a.currency),g._param("amount",a.amount),g._param("sender_name",a.sender.name)])})}});e.exports=c}),null);
__d("P2PPendingRecipientVerificationJewelBanner.react",["fbt","P2PJewelBanner.react","P2PTransferParam","P2PVerificationFlowHelper","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.handleClick=function(){b("P2PVerificationFlowHelper").startVerificationFlow(this.props.transfer[b("P2PTransferParam").TRANSFER_ID],!1)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:g._("To accept the money {sender_name} sent you, please confirm your information.",[g._param("sender_name",this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:g._("Confirm Info")},titleText:g._("Please Confirm Your Info")})};a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PJewelBannerContainer.react",["cx","CurrentUser","P2PBannerStore","P2PPaymentRequestsStore","P2PPendingPaymentRequestJewelBanner.react","P2PPendingPushFailJewelBanner.react","P2PPendingRecipientNUXJewelBanner.react","P2PPendingRecipientVerificationJewelBanner.react","P2PTransferParam","P2PTransferStatus","P2PTransferStore","PureStoreBasedStateMixin","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").createClass({displayName:"P2PJewelBannerContainer",mixins:[b("PureStoreBasedStateMixin")(b("P2PBannerStore"),b("P2PPaymentRequestsStore"),b("P2PTransferStore"))],statics:{calculateState:function(){var a=b("P2PTransferStore").getNUXTransfer(),c=b("P2PPaymentRequestsStore").getPendingPaymentRequest(),d=b("gkx")("AT7KSMdBbHFSBSJn1JWZUBa76yZr8D9pobYWWvzliNi0RZQsDI29awNxAAPfpbtiIQHouKzRc3uiaxxHhFXpGQGFiE6SMOOJwNKziF0lagOtKg");return{paymentRequest:c,paymentRequestBannerShown:!!c,transfer:a,transferBannerShown:d&&a&&a.receiver.id===b("CurrentUser").getID()}}},renderTransferBanner:function(){var a=this.state.transfer,c=a[b("P2PTransferParam").STATUS];switch(c){case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:return b("React").createElement(b("P2PPendingRecipientNUXJewelBanner.react"),{transfer:a});case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:return b("React").createElement(b("P2PPendingRecipientVerificationJewelBanner.react"),{transfer:a});case b("P2PTransferStatus").PENDING_PUSH_FAIL:return b("React").createElement(b("P2PPendingPushFailJewelBanner.react"),{transfer:a})}},renderPaymentRequestBanner:function(){return b("React").createElement(b("P2PPendingPaymentRequestJewelBanner.react"),{paymentRequest:this.state.paymentRequest})},render:function(){var a=void 0;this.state.transferBannerShown?a=this.renderTransferBanner():this.state.paymentRequestBannerShown&&(a=this.renderPaymentRequestBanner());return b("React").createElement("div",{className:"_1xfk"},a)}});e.exports=a}),null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryConfig","MercuryFilters","MercuryIDs","MercuryThreadlistConstants","MessagingTag","MessengerMessageRequestsTypedLogger","MessengerURIStore","P2PJewelBannerContainer.react","QE2Logger","React","SubscriptionsHandler","emptyFunction","gkx","setImmediateAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h="search";d=3;var i=5e3,j=b("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+d;f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={aggregatedThreads:null,showAggregation:!1,isLoading:!0,isSearching:!1,unreadMessageRequestThreads:[],threads:b("immutable").Map(),pinnedThreads:b("immutable").List()},this.threadListReqsInFlight=0,this.$13=function(){var a=function(){this.setState({suspended:!1}),this.handleThreadListUpdate()}.bind(this);b("gkx")("AT5Q5FCBY57gPdOe4Xo96r5zTgZZh87GRY--ncB3hM3Ra_B90Pc8SDhcEc8FXtQOATf6BwBTiNdA_hZCDlaZ5sW0DhwFxWZa8AHAo9f71cU_8w")&&(this.setState({suspended:!0}),setTimeout(a,i))}.bind(this),this.$14=function(){this.props.folder!==b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT&&!this.state.isSearching&&!this.state.isLoading&&!this.$1.hasLoadedThreadlist(this.props.folder,this.props.filter)&&this.$7(this.props.folder,this.props.filter,this.$8(this.props.folder)+b("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)}.bind(this),this.$21=function(){if(!this.$1||!this.$2)return;var a=this.$1.getAvailableThreadlistNow(b("MessagingTag").PENDING,b("MercuryFilters").UNREAD);this.$2.getMultiThreadMeta(a,function(b){this.setState({unreadMessageRequestThreads:a.map(function(a){return b[a]})})}.bind(this))}.bind(this),this.$16=function(a,c){this.setState({isLoading:c,searchThreads:[]},function(){return this.$12(h,b("MercuryFilters").ALL,a)}.bind(this))}.bind(this),this.$15=function(a){this.setState({isSearching:!!a})}.bind(this),this.$17=function(a,c){this.setState({showAggregation:!0,aggregatedThreads:c});var d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=[];c=c.map(function(a){e.push(b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("MercuryIDs").tokenize(d).value));return a.thread_id});this.props.onAggregationClick&&this.props.onAggregationClick(a,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_entrypoint_tap").setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").setThreadKeyList(e.filter(function(a){return a}).join(", ")).log()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.setState({showAggregation:b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs!==null})};a.prototype.componentDidMount=function(){__p&&__p();b("Bootloader").loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(a,c,d){__p&&__p();this.props.resetAggregatedThreads&&this.setState({showAggregation:!1,aggregatedThreads:null}),this.$1=a.getForFBID(this.props.viewer),this.$2=d.getForFBID(this.props.viewer),this.$3=function(a){__p&&__p();var c=this.$1.getAvailableThreadlistNow(b("MessagingTag").INBOX,a);if(c.length===0)return c;var d=this.$2.getThreadMetaNow(c[c.length-1]);if(!d)return c;d=d.timestamp;d=this.$1.getThreadlistUntilTimestamp(d,b("MessagingTag").PENDING,a);d.sort(function(a,b){a=this.$2.getThreadMetaNow(a);b=this.$2.getThreadMetaNow(b);return(b&&b.timestamp)-(a&&a.timestamp)}.bind(this));a=b("MercuryConfig").MCMA?this.$4(d):d;return c.concat(a).sort(function(a,b){a=typeof a==="string"?this.$2.getThreadMetaNow(a):this.$2.getThreadMetaNow(a[0]);b=typeof b==="string"?this.$2.getThreadMetaNow(b):this.$2.getThreadMetaNow(b[0]);return(b&&b.timestamp)-(a&&a.timestamp)}.bind(this))}.bind(this),this.$5=c.getForFBID(this.props.viewer),this.$6=new(b("SubscriptionsHandler"))(),this.$6.addSubscriptions(this.$5.subscribe("threadlist-updated",function(a,b){this.state.suspended||this.handleThreadListUpdate()}.bind(this))),b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests&&this.$7(b("MessagingTag").PENDING,this.props.filter,this.$8(b("MessagingTag").PENDING)+b("MercuryThreadlistConstants").CONNECTION_REQUEST),this.$9(this.props.folder,this.props.filter)}.bind(this),"MercuryThreadlistContainer.react")};a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.resetAggregatedThreads!==this.props.resetAggregatedThreads||a.folder!==this.props.folder||a.filter!==this.props.filter||a.folder===b("MessagingTag").INBOX&&this.state.showAggregation==!0)&&this.$9(a.folder,a.filter)};a.prototype.componentDidUpdate=function(){this.props.resetAggregatedThreads&&this.state.showAggregation&&this.setState({showAggregation:!1,aggregatedThreads:null})};a.prototype.componentWillUnmount=function(){this.$10(),this.$11(),this.$6&&this.$6.release()};a.prototype.handleThreadListUpdate=function(){this.$12(this.props.folder,this.props.filter),b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests&&(this.props.folder===b("MessagingTag").INBOX&&this.$12(b("MessagingTag").PENDING,this.props.filter),this.props.folder===b("MessagingTag").PENDING&&this.$12(b("MessagingTag").INBOX,this.props.filter))};a.prototype.render=function(){var a=this.props,c=a.ChildClass,d=a.folder,e=a.filter;a=babelHelpers.objectWithoutProperties(a,["ChildClass","folder","filter"]);var f=this.state.isSearching?this.state.threads.get(h)||[]:this.state.threads.get(d)||[];return b("React").createElement(c,babelHelpers["extends"]({},a,{filter:e,folder:d,isLoaded:d===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT||!!this.$1&&this.$1.hasLoadedThreadlist(d,e),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onRenderThreads:this.props.onRenderThreads,onMessageRequestsClick:this.props.onMessageRequestsClick,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,showAggregation:this.state.showAggregation,threads:this.state.aggregatedThreads||f,pinnedThreads:this.state.pinnedThreads,onLoadMoreRequest:this.$14,onQuery:this.$15,onSearchResults:this.$16,onAggregationClick:this.$17,p2pJewelBannerContainer:this.$18(),maxInitialThreadCount:j,handleChatTabOpen:this.props.source==="jewel"&&b("gkx")("AT5Q5FCBY57gPdOe4Xo96r5zTgZZh87GRY--ncB3hM3Ra_B90Pc8SDhcEc8FXtQOATf6BwBTiNdA_hZCDlaZ5sW0DhwFxWZa8AHAo9f71cU_8w")?this.$13:b("emptyFunction")}))};a.prototype.$4=function(a){__p&&__p();var c=b("MercuryConfig").Unit||3,d=(b("MercuryConfig").Duration||3)*1e3*60*60*24,e=a.map(function(a){return this.$2.getThreadMetaNow(a).timestamp}.bind(this)),f=[];for(var g=0;g<e.length;g++){var h=e[g],i=e[g+c-1];if(i&&h-i<d){i=[a[g]];for(var j=g+1;j<e.length;j++){var k=e[j];if(k&&h-k<d)i.push(a[j]),g++;else break}f.push(i)}else f.push(a[g])}return f};a.prototype.$18=function(){return b("gkx")("AT7KSMdBbHFSBSJn1JWZUBa76yZr8D9pobYWWvzliNi0RZQsDI29awNxAAPfpbtiIQHouKzRc3uiaxxHhFXpGQGFiE6SMOOJwNKziF0lagOtKg")?b("React").createElement(b("P2PJewelBannerContainer.react"),null):null};a.prototype.$9=function(a,c){if(a===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT)return;var d=b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs||this.props.threadIDs;d||this.setState({showAggregation:!1,aggregatedThreads:null});a===b("MessagingTag").INBOX&&(b("gkx")("AT6h5--3KUdxbat1rL4n2mVcPcg9eZ8bwokXjpPZS-_sSShoFlPyHXdioNqIwODAz2vH7270MK0r4x8XFkaYt6-h")||this.props.source!==b("MercuryAPIArgsSource").JEWEL)&&(b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests||this.$19());!this.$20(a,c)?this.$7(a,c,j):this.state.isLoading?this.setState({isLoading:!1},function(){this.$12(a,c)}.bind(this)):this.$12(a,c)};a.prototype.$19=function(){this.$1.getFilteredThreadlist(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,b("MessagingTag").PENDING,b("MercuryFilters").UNREAD,this.$21,!0,this.props.source)};a.prototype.$7=function(a,c,d){if(!this.$1)return;this.$11();this.threadListReqsInFlight++;var e=function(){var e=this.$1.getFilteredThreadlist(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,d,a,c||b("MercuryFilters").ALL,function(a){this.threadListReqsInFlight--,this.threadListReqsInFlight===0&&this.setState({isLoading:!1})}.bind(this),!0,this.props.source);this.$22={subscriberID:e,folder:a,filter:c}}.bind(this);this.state.isLoading?b("setImmediateAcrossTransitions")(e):this.setState({isLoading:!0},e)};a.prototype.$12=function(a,c,d){__p&&__p();if(!this.$1||!this.$2)return;this.$10();var e=void 0;a===b("MessagingTag").INBOX&&b("QE2Logger").logExposureForUser("www_messenger_connections_inbox");b("MercuryConfig").MessengerInboxRequests&&a===b("MessagingTag").INBOX?e=this.$3(c):a===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT||this.state.showAggregation?(e=b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs||this.props.threadIDs,this.$23(e)):e=d||this.$1.getAvailableThreadlistNow(a,c);d=[].concat.apply([],e);this.$24=this.$2.getMultiThreadMeta(d,function(b){this.setState({threads:this.state.threads.set(a,this.$25(e,b))})}.bind(this));this.$26()};a.prototype.$26=function(){var a=this.$1.getPinnedThreadlist();this.$2.getMultiThreadMeta(a,function(b){this.setState({pinnedThreads:this.$25(a,b)})}.bind(this))};a.prototype.$23=function(a){var c=this.$1.getAvailableThreadlistNow(b("MessagingTag").PENDING,this.props.filter);if(a&&a.length>0){a=a.filter(function(a){return c.indexOf(a)!==-1});this.$2.getMultiThreadMeta(a,function(a){Array.isArray(a)||(a=Object.values(a)),this.setState({aggregatedThreads:a})}.bind(this))}else this.setState({aggregatedThreads:null})};a.prototype.$25=function(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})};a.prototype.$20=function(a,b){var c=j;return!!(this.$1&&(this.$1.getThreadCount(a,b)>=c||this.$1.hasLoadedThreadlist(a,b)))};a.prototype.$8=function(a){a=this.state.threads.get(a);return a?a.length:0};a.prototype.$10=function(){this.$2&&this.$24&&this.$2.unsubscribe(this.$24)};a.prototype.$11=function(){this.$1&&this.$22&&this.$1.unsubscribe(this.$22.subscriberID,this.$22.folder,this.$22.filter)};a.propTypes={blockedIds:c.instanceOf(Set),ChildClass:c.func.isRequired,filter:c.string.isRequired,folder:c.string.isRequired,onMessageRequestsClick:c.func,onRenderThreads:c.func,onAggregationClick:c.func,pendingFolderUnseenCount:c.number,showCount:c.bool,showPresence:c.bool,source:c.string,threadCount:c.number,threadIDs:c.array,viewer:c.string.isRequired,onRenderBackArrow:c.func,resetAggregatedThreads:c.bool};a.defaultProps={source:b("MercuryAPIArgsSource").JEWEL};e.exports=a}),null);
__d("MessengerRecentContainer.react",["MercuryAPIArgsSource","MercuryThreadlistContainer.react","MessengerComposerSteps","MessengerComposerStore","MessengerThreadlistReact.bs","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerThreadlistReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRecentContainer",mixins:[b("PureStoreBasedStateMixin")(b("MessengerComposerStore"))],propTypes:{activeThreadID:a.string,blockedIds:a.instanceOf(Set),filter:a.string.isRequired,folder:a.string.isRequired,viewer:a.string.isRequired,onAggregationClick:a.func,onRenderBackArrow:a.func,pendingFolderUnseenCount:a.number,resetAggregatedThreads:a.bool,readReceipts:a.object},statics:{calculateState:function(){return{isComposing:b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL}}},render:function(){return b("React").createElement(b("MercuryThreadlistContainer.react"),{ChildClass:g,activeThreadID:this.props.activeThreadID,blockedIds:this.props.blockedIds,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,onAggregationClick:this.props.onAggregationClick,onRenderBackArrow:this.props.onRenderBackArrow,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,resetAggregatedThreads:this.props.resetAggregatedThreads,isNewMessageActive:this.props.isNewMessageActive,readReceipts:this.props.readReceipts,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:this.props.viewer})}});e.exports=c}),null);
__d("MessengerSearchContainer.react",["cx","fbt","Link.react","MessengerActions","MessengerSpinner.react","MessengerThreadlistReact.bs","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerView","React","StoreAndPropBasedStateMixin","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerThreadlistReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerSearchContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerThreadSearchStore"))],propTypes:{activeThreadID:a.string,blockedIds:a.instanceOf(Set).isRequired,filter:a.string.isRequired,folder:a.string.isRequired,isComposing:a.bool,isLoaded:a.bool,isLoading:a.bool,isNewMessageActive:a.bool,viewer:a.string.isRequired,readReceipts:a.object},statics:{calculateState:function(a){a=b("MessengerThreadSearchStore").getState();return{threads:a.threads?a.threads.toArray():[],threadsExhausted:a.threadsExhausted,loading:a.loading,query:a.query}}},_subscriptions:null,render:function(){return b("React").createElement(i,babelHelpers["extends"]({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:!1,newMessageRequestThreads:[],onLoadMoreRequest:b("MessengerThreadSearchActions").loadMoreThreads,onQuery:b("MessengerActions").changeQueryAll,onSearchResults:b("emptyFunction"),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,readReceipts:this.props.readReceipts,threads:this.state.threads}))},_renderLoadMoreLink:function(){if(this.state.threadsExhausted)return this.state.threads.length>0?null:b("React").createElement("div",{className:"_19hf"},b("React").createElement(b("Link.react"),{href:"#",onClick:this._handleClear},h._("No conversations found")));return this.state.loading?b("React").createElement("div",{className:"_19hf"},b("React").createElement(b("MessengerSpinner.react"),null)):b("React").createElement("div",{className:"_19hf"},b("React").createElement(b("Link.react"),{href:"#",onClick:b("MessengerThreadSearchActions").loadMoreThreads,tabIndex:-1},h._("Load More")))},_handleClear:function(){b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)}});e.exports=c}),null);
__d("XMessagingMarkPendingFolderAsSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/mark_pending_folder_as_seen/",{})}),null);
__d("MessengerMasterView.react",["cx","AsyncRequest","BootloadOnRender.react","JSResource","LazyComponent.react","MessengerActions","MessengerMasterViewHeaderReact.bs","MessengerRecentContainer.react","MessengerSearchContainer.react","MessengerSpinner.react","MessengerURIStore","MessengerView","React","XMessagingMarkPendingFolderAsSeenController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerMasterViewHeaderReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={aggregationView:!1,resetAggregatedThreads:!1,threadIDs:[]},this.$1=function(a,c){new(b("AsyncRequest"))().setURI(b("XMessagingMarkPendingFolderAsSeenController").getURIBuilder().getURI()).send(),this.setState({aggregationView:!0,resetAggregatedThreads:!1,threadIDs:c})}.bind(this),this.$2=function(){this.setState({aggregationView:!1,resetAggregatedThreads:!0},function(){b("MessengerActions").selectAggregation(null)})}.bind(this),this.$3=function(){this.setState({aggregationView:!0,resetAggregatedThreads:!1})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("MessengerURIStore").getState().threadIDs;a&&this.setState({threadIDs:a,aggregationView:!0})};a.prototype.$4=function(){var a=this.props.detailView===b("MessengerView").DETAIL.COMPOSE;switch(this.props.view){case b("MessengerView").MASTER.PEOPLE:return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{activeThreadID:a?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerPeopleList.react").__setRef("MessengerMasterView.react"),placeholder:b("React").createElement("div",{className:"_2pif",style:{textAlign:"center"}},b("React").createElement(b("MessengerSpinner.react"),null))});case b("MessengerView").MASTER.PAYMENT:case b("MessengerView").MASTER.RECENT:return b("React").createElement(b("MessengerRecentContainer.react"),{activeThreadID:this.props.activeThreadID,blockedIds:this.props.blockedIds,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:a,onAggregationClick:this.$1,onRenderBackArrow:this.$3,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,readReceipts:this.props.readReceipts,resetAggregatedThreads:this.state.resetAggregatedThreads,viewer:this.props.viewer});case b("MessengerView").MASTER.SEARCH:return b("React").createElement(b("MessengerSearchContainer.react"),{activeThreadID:this.props.activeThreadID,blockedIds:this.props.blockedIds,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:a,readReceipts:this.props.readReceipts,viewer:this.props.viewer});default:throw new Error("Unknown master view: "+this.props.view)}};a.prototype.render=function(){return b("React").createElement(b("React").Fragment,null,this.props.showHeader?b("React").createElement(i,{aggregationView:this.state.aggregationView,filter:this.props.filter,folder:this.props.folder,onBackToRecent:this.$2,threadIDs:this.state.threadIDs,view:this.props.view,viewer:this.props.viewer}):null,this.$4())};a.propTypes={activeThreadID:c.string,blockedIds:c.instanceOf(Set).isRequired,detailView:c.string,filter:c.string,folder:c.string.isRequired,pendingFolderUnseenCount:c.number,readReceipts:c.object,showHeader:c.bool,view:c.string.isRequired,viewer:c.string.isRequired};a.defaultProps={showHeader:!0};e.exports=a}),null);
__d("MessengerMasterViewReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerMasterView.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMasterView.react"),{activeThreadID:b("bs_js_null_undefined").fromOption(a),blockedIds:c,detailView:b("bs_js_null_undefined").fromOption(d),filter:b("bs_js_null_undefined").fromOption(e),folder:f,pendingFolderUnseenCount:g,readReceipts:h,view:i,viewer:j},k)}f.make=a}),null);
__d("P2PPaymentPickerDialog.react",["cx","fbt","immutable","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerGraphQLTokenizer.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=460,k=b("immutable").Set();d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={entries:b("immutable").Set()},this.$1=function(){var a=this.state.entries;this.props.handleContinue(a)}.bind(this),this.$2=function(){var a=this.state.entries;this.props.handleCancel(a)}.bind(this),this.handleAddEntryAttempt=function(a){this.props.multiSelect?this.setState({entries:this.state.entries.add(a)}):this.setState({entries:b("immutable").Set.of(a)})}.bind(this),this.handleRemoveEntryAttempt=function(a){this.setState({entries:this.state.entries["delete"](a)})}.bind(this),c}a.prototype.renderHeader=function(){return b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Send Money")),b("React").createElement(b("MessengerDialogButton.react"),{disabled:!this.state.entries.size,label:h._("Continue"),type:"primary",onClick:this.$1}))};a.prototype.renderTokenizer=function(){return b("React").createElement(b("MessengerGraphQLTokenizer.react"),{autoFocus:!0,canViewerSendMoneyFilter:!0,className:"_2wsl",context:null,enableMessageSearch:!1,entries:this.state.entries.toList(),excludeGroups:!0,excludePages:!0,forceHideClearButton:!0,hasHoverState:!1,originalEntryIDs:k,placeholder:h._("Type the name of a person"),scrollableViewClassName:"_2wsm",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,useLayer:!1,viewer:this.props.viewer,width:j,onAddEntryAttempt:this.handleAddEntryAttempt,onClear:null,onRemoveEntryAttempt:this.handleRemoveEntryAttempt})};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_2wsn",type:"default",width:j,onToggle:this.$2},this.renderHeader(),this.renderTokenizer())};a.propTypes={viewer:c.string.isRequired,handleContinue:c.func.isRequired,handleCancel:c.func.isRequired,multiSelect:c.bool.isRequired};e.exports=a}),null);
__d("MessengerP2PDialogContainer.react",["Bootloader","immutable","MercuryIDs","MercuryOrderedThreadlist","MessagingTag","MessengerActions","MessengerURIStore","MessengerView","P2PActions","P2PDialogContainer.react","P2PPaymentPickerDialog.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){var a=b("MessengerURIStore").getState();a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();var c=a.extraQueryParams;c&&c.id&&b("Bootloader").loadModules(["P2PSendMoneyDialogStore"],function(){this.$2(c)}.bind(this),"MessengerP2PDialogContainer.react")};a.prototype.componentDidUpdate=function(){var a=b("MessengerURIStore").getState();a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();a=b("MessengerURIStore").getState().extraQueryParams;a&&a.id&&this.$2(a)};a.prototype.$1=function(){var a=function(a){b("P2PActions").hideDialog();a=a.first().getUniqueID();b("MessengerActions").changeID(a)},c=function(a){b("P2PActions").hideDialog(),b("MercuryOrderedThreadlist").getForFBID(this.props.viewer).getThreadlist(0,1,b("MessagingTag").INBOX,function(a){b("MessengerActions").selectThread(a[0])})}.bind(this);b("P2PActions").showDialog(b("P2PPaymentPickerDialog.react"),{viewer:this.props.viewer,handleContinue:a,handleCancel:c,multiSelect:!1})};a.prototype.$2=function(a){var c=b("MercuryIDs").getThreadIDFromUserID(a.id);b("P2PActions").chatSendViewOpened({referrer:"chat",threadID:c,amount:a.a,memoText:a.m})};a.prototype.render=function(){return b("React").createElement(b("P2PDialogContainer.react"),null)};function a(){g.apply(this,arguments)}a.propTypes={viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerP2PDialogContainerReact.bs",["ReasonReact.bs","MessengerP2PDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerP2PDialogContainer.react"),{viewer:a},c)}f.make=a}),null);
__d("MessengerReasonDialogContainerReact.bs",["bs_list","bs_array","bs_block","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerReasonDialogContainer");function h(){__p&&__p();return[g[0],g[1],g[2],g[3],function(a){return b("MessengerDialogs.bs").addHandler(function(c){return b("bs_curry")._1(a[3],[c])})},g[5],g[6],g[7],function(a){a=a[1];if(a)return b("React").createElement("div",undefined,b("bs_array").mapi(function(a,c){return b("React").createElement("span",{key:String(a)},b("bs_curry")._1(c,0))},b("bs_array").of_list(b("bs_list").rev(a[0]))));else return null},function(){return 0},g[10],function(a,c){return b("bs_block").__(0,[a[0]])},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(){return h([])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("PagesPlatformDialogContainerReact.bs",["ReasonReact.bs","PagesPlatformDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("PagesPlatformDialogContainer.react"),{},a)}f.make=a}),null);
__d("MessengerReact.bs",["cx","bs_block","bs_curry","React","Utils.bs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerState.bs","HotReloadConfig","MessengerURIStore","MessengerBannerReact.bs","MessengerBugNubReact.bs","MessengerDetailViewReact.bs","MessengerMasterViewReact.bs","MessengerErrorBoundaryReact.bs","FBPaymentsDialogContainerReact.bs","MNCommerceDialogContainerReact.bs","MessengerP2PDialogContainerReact.bs","PagesPlatformDialogContainerReact.bs","MessengerReasonDialogContainerReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){a.preventDefault();return 0}var i=b("ReasonReact.bs").reducerComponent("MessengerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],function(a){b("MessengerURIStore").addListener("change",function(){return b("bs_curry")._1(a[3],0)});b("bs_curry")._1(a[4],function(){b("MessengerURIStore").destroy();return 0});return b("bs_curry")._1(e,0)},i[5],i[6],i[7],function(e){var f=e[1];return b("ReasonReact.bs").element(0,0,b("bs_curry")._1(b("MessengerState.bs").Provider[0](0,[b("CurrentUser").getID()]),function(e){var g=e[4],i=e[2];return b("React").createElement("div",{className:"_li"},b("ReasonReact.bs").element(0,0,b("MessengerBannerReact.bs").make(c,d,[])),b("React").createElement("div",{className:"_4sp8",onDragEnter:h,onDragOver:h,onDrop:h},b("React").createElement("div",{className:"_1enh"},b("ReasonReact.bs").element(0,0,b("MessengerErrorBoundaryReact.bs").make(0,["conversation list"],[b("ReasonReact.bs").element(0,0,b("MessengerMasterViewReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(f.activeThreadID),g,b("bs_js_primitive").null_undefined_to_opt(f.detailView),[f.filter],f.folder,e[5],i,f.masterView,b("CurrentUser").getID(),[]))])),b("ReasonReact.bs").element(0,0,b("MessengerBugNubReact.bs").make([a?b("Utils.bs").isTruthy(a[0].isBetaEnabled):!1],a?[a[0].unixName]:0,[]))),b("ReasonReact.bs").element(0,0,b("MessengerDetailViewReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(f.activeThreadID),g,e[1],i,e,b("bs_js_primitive").null_undefined_to_opt(f.mid),b("bs_js_primitive").null_undefined_to_opt(f.query),b("bs_js_primitive").null_undefined_to_opt(f.detailView),b("CurrentUser").getID(),b("CurrentUser").isWorkUser(),[]))),b("ReasonReact.bs").element(0,0,b("MessengerReasonDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(0,0,b("MNCommerceDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(0,0,b("MessengerP2PDialogContainerReact.bs").make(b("CurrentUser").getID(),[])),b("ReasonReact.bs").element(0,0,b("PagesPlatformDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(0,0,b("FBPaymentsDialogContainerReact.bs").make([])))}))},function(){return b("MessengerURIStore").getState()},i[10],function(a,c){return b("bs_block").__(0,[b("MessengerURIStore").getState()])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").null_undefined_to_opt(a.employeeData),a.showWorkchatUpsellBanner,b("bs_js_primitive").null_undefined_to_opt(a.isFirstRedirect),a.onMount,[])});f.preventDefault=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerSearchConfirmationDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerSearchConfirmationDialog");function i(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function j(a,c,d){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,i,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Search for \"{term}\"?",[g._param("term",c)]))),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([2],[g._("OK")],0,0,[a],[0],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return j(a.onSearch,a.term,[])});f.component=h;f.handleToggle=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMount",["cx","Bootloader","ChannelConnection","ChannelManager","CSS","CurrentUser","HotLikeSound","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreadIDMap","MercuryThreads","MercuryUnreadState","MercuryUnseenState","MercuryWorkContextInformation","MessengerActions","MessengerAsyncWrapper","MessengerAttributionTagsStore","MessengerBrowserAlerts","MessengerComposerActions","MessengerComposerStore","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerPage","MessengerParticipants.bs","MessengerPromotionDataActions","MessengerReact.bs","MessengerRTCMessageHandler","MessengerSearchConfirmationDialogReact.bs","MessengerSettingsStore","MessengerThreadSearchStore","MessengerURIConstants","MessengerURIListener","MessengerURISerializer","MessengerURIStore","MessengerView","MNPlatformTagsDataManager","React","ReactDOM","URI","gkx","goURI","OrderedFriendsList","PageHooks"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReact.bs").jsComponent,i=b("MessengerSearchConfirmationDialogReact.bs").jsComponent;b("OrderedFriendsList");b("PageHooks");b("ChannelManager").startChannelManager();a={initStoresAndListeners:j,dispatchInitialData:m,mount:function(a,c,d){__p&&__p();b("MessengerEnvironment").setMessengerUI(!0);b("MessengerPage").emit(b("MessengerPage").Events.JS_LOADED);d=b("CurrentUser").getID();var e=b("CurrentUser").isWorkUser();j(d);m(d,c);b("MessengerPage").emit(b("MessengerPage").Events.DATA_INITIALIZED);var f=document.documentElement;f&&b("CSS").addClass(f,"_51l0");if(document.body){f=document.body;b("CSS").addClass(f,"_z4_");b("MessengerConfig").SFFontEnabled&&b("CSS").addClass(f,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(f,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(f,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(b("React").createElement(b("MessengerAsyncWrapper"),null,b("React").createElement(h,{employeeData:c.employeeData,facebookNotificationTokens:c.facebookNotificationTokens,showWorkchatUpsellBanner:c.showWorkchatUpsellBanner,isFirstRedirect:!b("gkx")("AT71LRcbgltkBEoVFCCCdNV29c5_0WezosqmKxl4WEXk8XQNpOgP_oLFicsbGWor0e-3lTCNH9el3cQIDbyD2Ry3"),viewer:d,isWorkUser:e,onMount:function(){return n(c)}})),a)}};function j(a){k(a),l(a)}function k(a){b("MercuryDeliveryState").getForFBID(a),b("MercuryOrderedThreadlist").getForFBID(a),b("MessengerParticipants.bs"),b("MercuryThreads").getForFBID(a),b("MercuryUnreadState").getForFBID(a),b("MercuryUnseenState").getForFBID(a),b("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5")&&b("MercuryWorkContextInformation").getForFBID(a),b("MessengerAttributionTagsStore"),b("MessengerComposerStore"),b("MessengerMDotMeReferralStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore").getForFBID(a)}function l(a){b("MessengerURIListener").start(),b("MercurySyncEnvironment").setUp(),b("MessengerBrowserAlerts").init(a),b("MessengerRTCMessageHandler").init(),b("ChannelConnection")}function m(a,c){__p&&__p();a=b("MercuryServerPayloadPreprocessor").getForFBID(a);var d=c.lastReadThreadKey;if(c.graphqlPayload){var e=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload),f=e[0];d=e[1];f.message_blocked_ids=c.mercuryPayload.message_blocked_ids;f.message_ignored_ids=c.mercuryPayload.message_ignored_ids;a.handleUpdate(f)}else a.handleUpdate(c.mercuryPayload);e=new(b("URI"))(window.location.href);var g=b("MessengerURISerializer").deserialize(e);g.query&&(function(){var a=g.masterView===b("MessengerView").MASTER.SEARCH,c=g.query;g.query=null;g.masterView=b("MessengerView").MASTER.RECENT;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{term:c,onSearch:function(){b("MessengerDialogs.bs").removeAllDialogs(),a?b("MessengerActions").changeQueryAll(c):b("MessengerActions").changeQuery(c)}})})})();b("goURI")(b("MessengerURISerializer").serialize(g),!1,!0);if(e.getPath().match(b("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(g.masterView===b("MessengerView").MASTER.PAYMENT)return;b("MessengerActions").changeMDotMeReferral(c.mDotMeReferral,c.mDotMeReferralThreadKey);f=b("MercuryThreadIDMap").get();a=f.getClientIDFromServerIDNow(d);a?(b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(a)):e.getPath()==="/"&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c.messagingSource,c.mDotMeReferralThreadKey&&c.mDotMeReferralThreadKey.toString())}function n(a){b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED),a.gameData&&a.gameData.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(c,d,e){var f=null,g=d.SOLO;a.gameData.contextSourceID&&(f=a.gameData.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:a.gameData.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount"),b("MessengerPromotionDataActions").setPromotionData(a.promotionData)}e.exports=a}),null);