if (self.CavalryLogger) { CavalryLogger.start_js(["23Ap0"]); }

__d("ChatEmployeeAwayWarning",["MercuryIDs","MercuryViewer","MessengerParticipants.bs"],(function(a,b,c,d,e,f){__p&&__p();a={updateEmployeeAwayWarning:function(a,c,d){__p&&__p();b("MessengerParticipants.bs").get(b("MercuryViewer").getID(),function(e){e=e.employee;e&&b("MessengerParticipants.bs").getMulti(a.participants,function(e){var f=!1,g=b("MercuryIDs").getUserIDFromThreadID(a.thread_id);if(!g)return;g="fbid:"+g;for(var h in e)g==e[h].id&&e[h].is_employee_away&&(f=!0);f?c():d()})})}};e.exports=a}),null);
__d("LinkedMentorshipProgramWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2152739548075248"};c.getQueryID=function(){"use strict";return"231780697410386"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XNativeComponentFlowBookingRequestCountController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/platform/native-component-flow/booking_request_count/",{page_id:{type:"FBID",required:!0},user_id:{type:"FBID",required:!0}})}),null);
__d("FantaReducersTabSheets",["AsyncRequest","Bootloader","ChatEmployeeAwayWarning","ChatPrivacyActionController","CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FBIDCheck","ImmutableObject","MentorshipClientTypedLogger","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercurySheetPolicy","MercuryThreadInfo","MessengerParticipants.bs","MercuryThreads","MercuryViewer","MessageThreadAssociatedObjectUtils","MessengerGroupsSyncStatus","MessengerState.bs","promiseDone","RTCCallState","WebGraphQL","LinkedMentorshipProgramWebGraphQLQuery","XNativeComponentFlowBookingRequestCountController","emptyFunction","idx","ifRequired","setImmediate","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreads").get(),h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types,j=b("FantaMessageActions").Types,k=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({typeahead:null});a=a.setIn(["mercury","tabContents",b],c);return l(a,b)}return a}function l(a,b,c){var d=a.mercury.tabContents.get(b);if(!d)return a;if(c&&d.openSheet!==c)return a;d=d.merge({openSheet:null});a=a.setIn(["mercury","tabContents",b],d);d.thread&&(a=O(a,b,d.thread));return a}function c(a,b){__p&&__p();switch(b.type){case h.CLOSE_ALL_TABS:for(var b=a.mercury.tabContents.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e.id;e=e.merge({typeahead:null});a=a.setIn(["mercury","tabContents",f],e);a=l(a,f)}}return a}function d(a,b){switch(b.type){case i.ON_GET_THREAD_RESPONSE:case i.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=m(a,c,b)}return a}function m(a,c,d){var e=b("MercuryViewer").getID(),f=c.participants.filter(function(a){return a!==e});f.length<1&&!g.isNewEmptyLocalThread(d)&&!b("MessageThreadAssociatedObjectUtils").shouldRender(c.associated_object)?a=q(a,d,b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet):a=l(a,d,b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet);c.participants.length!==0&&(V(a,d),a=O(a,d,c));return a}function f(a,c){switch(c.type){case i.THREADS_UPDATED:c.threads.forEach(function(c){a=m(a,new(b("ImmutableObject"))(c),c.thread_id)})}return a}function n(a,b){switch(b.type){case h.OPEN_TAB:case h.REPLACE_TAB:b=b.tabID;var c=a.mercury.tabContents.get(b).thread;c&&(a=O(a,b,c))}return a}function o(a,c,d){if(b("MercuryThreadInfo").isMuted(d))return q(a,c,b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet);else return l(a,c,b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet)}function p(a,c,d){var e=b("CurrentUser").getID(),f=a;b("MessengerState.bs").compute(e,function(g){g=g.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(e,g,d)?f=q(a,c,b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet):f=l(a,c,b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet)});return f}function q(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function r(a,b){return a}function s(a,c){switch(c.type){case k.OPEN_APPOINTMENT_SHEET:c=c.tabID;return q(a,c,b("MercurySheetPolicy").sheets.ChatAppointmentBanner)}return a}function t(a,c){switch(c.type){case k.OPEN_USER_FOCUS_SHEET:c=c.tabID;return q(a,c,b("MercurySheetPolicy").sheets.ChatUserFocusSheet)}return a}function u(a,c){switch(c.type){case k.CLOSE_USER_FOCUS_AND_BYPASS_SHEET:c=c.tabID;a=l(a,c,b("MercurySheetPolicy").sheets.ChatUserFocusSheet);a=l(a,c,b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet)}return a}function v(a,c){switch(c.type){case k.OPEN_BYPASS_FOCUS_SHEET:c=c.tabID;return q(a,c,b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet)}return a}function w(a,c,d){b("ChatEmployeeAwayWarning").updateEmployeeAwayWarning(d,function(){return b("setImmediate")(function(){b("FantaTabSheetActions").openEmployeeAwaySheet(c)})},b("emptyFunction"));return a}function x(a,c){switch(c.type){case k.OPEN_EMPLOYEE_AWAY_SHEET:c=c.tabID;a=q(a,c,b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet)}return a}function y(a,c){switch(c.type){case k.OPEN_NAME_CONVERSATION_TAB_SHEET:return q(a,c.tabID,b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet)}return a}function z(a,c){switch(c.type){case k.CLOSE_NAME_CONVERSATION_TAB_SHEET:return l(a,c.tabID,b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet)}return a}function A(a,b){return a}function B(a,c){switch(c.type){case k.OPEN_READ_ONLY_PERMANENT_SHEET:return q(a,c.tabID,b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet)}return a}function C(a,c){switch(c.type){case k.CLOSE_READ_ONLY_PERMANENT_SHEET:return l(a,c.tabID,b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet)}return a}function D(a,c){switch(c.type){case k.OPEN_READ_ONLY_SHEET:return q(a,c.tabID,b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet)}return a}function E(a,c){switch(c.type){case k.CLOSE_READ_ONLY_SHEET:return l(a,c.tabID,b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet)}return a}function F(a,b){return a}function G(a,b){return a}function H(a,c){switch(c.type){case k.CLOSE_ADD_FRIENDS_SHEET:c=c.tabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({typeahead:null});a=a.setIn(["mercury","tabContents",c],d);return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}function I(a,c){switch(c.type){case k.CLOSE_ADD_MORE_FRIENDS_SHEET:c=c.tabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({typeahead:null});a=a.setIn(["mercury","tabContents",c],d);return l(a,c,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}return a}function J(a,c){switch(c.type){case j.SEND_GROUP_MESSAGE:c=c.tabID||c.threadID;return l(a,c,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}return a}function K(a,c){switch(c.type){case j.RECEIVED_NEW_MESSAGE:c=c.tabID;var d=a.mercury.tabContents.get(c);d&&!d.isScrolledToBottom?a=q(a,c,b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet):a=l(a,c,b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet)}return a}function L(a,c){switch(c.type){case h.SCROLL_BOTTOM_CHANGED:var d=c.tabID;c=c.isScrolledToBottom;c&&(a=l(a,d,b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet));c=a.mercury.tabContents.get(d);c&&c.thread&&(a=Q(a,d,c.thread))}return a}function M(a,c){__p&&__p();switch(c.type){case i.ON_PRIVACY_STATE_CHANGE:var d=c.threadID;c=c.privacyState;switch(c){case b("ChatPrivacyActionController").OFFLINE:a=l(a,d,b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet);a=q(a,d,b("MercurySheetPolicy").sheets.ChatOfflineTabSheet);break;case b("ChatPrivacyActionController").NORMAL:a=l(a,d,b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet);a=l(a,d,b("MercurySheetPolicy").sheets.ChatOfflineTabSheet);break;case b("ChatPrivacyActionController").BLOCKED:a=l(a,d,b("MercurySheetPolicy").sheets.ChatOfflineTabSheet);c=b("MercuryIDs").getUserIDFromThreadID(d);if(c){c=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c));c&&c.is_friend?a=q(a,d,b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet):a=l(a,d,b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet)}break}}return a}function N(a,b){switch(b.type){case k.ON_IS_PAGE_TAB:var c=b.tabID;b=b.pageIndicator;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({pageIndicator:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function O(a,b,c){__p&&__p();a=p(a,b,c);a=o(a,b,c);a=w(a,b,c);a=R(a,b,c);a=U(a,b,c);a=Q(a,b,c);a=P(a,b,c);a=X(a,b,c);a=Y(a,b,c);return a}function P(a,c,d){var e=d.rtc_call_data;d=d.thread_fbid;e=e&&e.call_state!==b("RTCCallState").NO_ONGOING_CALL&&d;e?a=q(a,c,b("MercurySheetPolicy").sheets.ChatJoinCallSheet):a=l(a,c,b("MercurySheetPolicy").sheets.ChatJoinCallSheet);return a}function Q(a,c,d){d=d.has_montage&&b("MercuryConfig").MontageThreadViewer;var e=a.mercury.tabContents.get(c);e=!!(e&&e.isScrolledToBottom);e&&d?a=q(a,c,b("MercurySheetPolicy").sheets.ChatMontageSheet):a=l(a,c,b("MercurySheetPolicy").sheets.ChatMontageSheet);return a}function R(a,c,d){__p&&__p();b("ifRequired")("EventReminderActions",function(e){var event=void 0;d.associated_object&&d.associated_object.room_type==="EVENT"?(event=d.associated_object,e.updateEventReminder(c,event,d.participants_event_status)):d.lightweight_event&&(event=d.lightweight_event,e.updateEventReminder(c,event));event?a=q(a,c,b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet):b("ifRequired")("EventReminderStateStore",function(d){d=d.getEvent(c);d&&d.exists&&e.deleteEventReminder(c);a=l(a,c,b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet)},function(){return S(c)})},function(){return S(c)});return a}function S(a){b("Bootloader").loadModules(["EventReminderActions","EventReminderStateStore"],function(c,d){b("setImmediate")(function(){b("FantaTabSheetActions").onBootloadEventReminder(a)})},"FantaReducersTabSheets")}function T(a,b){switch(b.type){case k.ON_BOOTLOAD_EVENT_REMINDER:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.thread;c&&(a=R(a,b,c))}return a}function U(a,c,d){d=d.other_user_fbid;if(d&&!b("FBIDCheck").isUser_deprecated(d)&&b("gkx")("AT6lRFQLpQZ6UWlPrB9gInaarooSpaHqBAt5ho6-RghBTrVcE-XKcrf8CtnjJLZJDFVcDhkmvsbKnTVqx76gSACvoOe9JNcrEBY54bqb1L214A")){d=b("XNativeComponentFlowBookingRequestCountController").getURIBuilder().setFBID("page_id",d).setFBID("user_id",b("CurrentUser").getID()).getURI();new(b("AsyncRequest"))().setURI(d).setHandler(function(a){a=a&&a.getPayload();a&&a.confirmed+a.pending>0&&b("FantaTabSheetActions").openAppointmentBannerSheet(c)}).send()}else a=l(a,c,b("MercurySheetPolicy").sheets.ChatAppointmentBanner);return a}function V(a,c){var d=b("MercuryIDs").getUserIDFromThreadID(c);a=a.mercury.tabContents.get(c);a=!a||a&&!a.mentorship;d&&a&&b("promiseDone")(b("WebGraphQL").exec(new(b("LinkedMentorshipProgramWebGraphQLQuery"))({id:d})),function(a){var d;d=(d=a)!=null?(d=d.message_thread)!=null?(d=d.linked_mentorship_programs)!=null?(d=d.edges)!=null?(d=d[0])!=null?(d=d.node)!=null?(d=d.mentorship_group)!=null?d.id:d:d:d:d:d:d:d;a=(a=a)!=null?(a=a.message_thread)!=null?(a=a.linked_mentorship_programs)!=null?(a=a.edges)!=null?(a=a[0])!=null?(a=a.node)!=null?(a=a.mentorship_group)!=null?a.name:a:a:a:a:a:a:a;b("FantaTabSheetActions").onMentorshipProgramResponse(c,a,d)},function(a){new(b("MentorshipClientTypedLogger"))().setClientUserID(d).setError(String(a)).log()})}function W(a,c){switch(c.type){case k.ON_MENTORSHIP_PROGRAM_RESPONSE:var d=c.tabID,e=c.groupID;c=c.programName;var f=a.mercury.tabContents.get(d);if(!f)return a;c&&e&&(f=f.set("mentorship",{programName:c,groupID:e}),a=a.setIn(["mercury","tabContents",d],f),a=q(a,d,b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet));break}return a}function X(a,c,d){d=d.associated_object;b("MessageThreadAssociatedObjectUtils").shouldRender(d)&&(a=q(a,c,b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet));return a}function Y(a,c,d){if(b("gkx")("AT76uJPrd7aouwB_QroadLDPQjoYqjTnZ6JlShuyxmrPn6QOi_fPin1c8OftLiUFB89lVhL5JEgoqRyScwLRyYCk")&&d.groups_sync_status&&d.groups_sync_status===b("MessengerGroupsSyncStatus").OPT_IN)return q(a,c,b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet);else return l(a,c,b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet)}e.exports={closeAddFriends:H,closeAddMoreFriends:I,closeAllTabs:c,closeFocusUserSheet:u,closeNameConversationSheet:z,closePermanentReadOnlySheet:C,closeReadOnlySheet:E,closeTab:a,onBootloadEventReminder:T,onGetThreadResponse:d,onIsPageTab:N,onPrivacyStateChange:M,openAddFriendsSheet:r,openAppointmentBannerSheet:s,openBypassFocusSheet:v,openEmployeeAwaySheet:x,openFocusUserSheet:t,openNameConversationSheet:y,openNewMessagesSheet:A,openPermanentReadOnlySheet:B,openReadOnlySheet:D,openTab:n,openUploadWarningTabSheet:F,openUserFocusSheet:G,receivedNewMessage:K,scrollBottomChanged:L,sendGroupMessage:J,threadsUpdated:f,onMentorshipProgramResponse:W}}),null);