if (self.CavalryLogger) { CavalryLogger.start_js(["yRdt3"]); }

__d("TypeaheadFacepileX.react",["React","joinClasses"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.renderPic=function(a,c){var d="url("+this.props.photos[a]+")";return b("React").createElement("span",{className:b("joinClasses")("splitpic",c),key:a,style:{backgroundImage:d}})}.bind(this),this.renderPics=function(){var a=this.props.size;if(a>=3)return[this.renderPic(0,"leftpic"),this.renderPic(1,"toppic"),this.renderPic(2,"bottompic")];else return[this.renderPic(0,"leftpic"),this.renderPic(1)]}.bind(this),c}a.prototype.render=function(){"use strict";return b("React").createElement("span",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"splitpics clearfix")}),this.renderPics())};e.exports=a}),null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getQueryFeatures:function(a){__p&&__p();var c={};if(b("FacebarGlobalOptions").enableBootstrapRanking){a.raw_text&&(c.FEATURE_QUERY_LENGTH=a.raw_text.length);if(a.tokens){c.FEATURE_QUERY_TOKENS=a.tokens.length;c.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var d=0;d<a.tokens.length;d++)c.FEATURE_QUERY_TOKEN_LENGTH_SUM+=a.tokens[d].length}}return c},addFeatures:function(a,b,c,d,e,f){__p&&__p();if(!a.features)return;a.features={FEATURE_QUERY_LENGTH:d.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:d.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:d.FEATURE_QUERY_TOKEN_LENGTH_SUM};a.features.FEATURE_IS_EXACT_NAME_MATCH=e;a.features.FEATURE_IS_STOP_WORD_MATCH=f;if(b&&b.length>0){d=b.split(" ").length;e=0;for(var f=0;f<a.termMatches.length;++f)b.search(a.termMatches[f])>=0&&e++;a.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=e/d}if(c.tokens&&c.tokens.length>0){f=b.search(c.tokens[0]);a.features.FEATURE_FIRST_TERM_MATCH_POSITION=f;a.features.FEATURE_FIRST_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[0].length).split(" ").length;a.termMatches.some(function(b){if(b.search(c.tokens[0])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1});a.features.FEATURE_IN_ORDER_MATCH=1;c.tokens.length>1&&(f=b.search(c.tokens[1]),a.features.FEATURE_SECOND_TERM_MATCH_POSITION=f,a.features.FEATURE_SECOND_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[1].length).split(" ").length,a.termMatches.some(function(b){if(b.search(c.tokens[1])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1}),a.features.FEATURE_SECOND_TERM_MATCH_TOKEN<a.features.FEATURE_FIRST_TERM_MATCH_POSITION&&(a.features.FEATURE_IN_ORDER_MATCH=0))}return a},processEntityResult:function(a,c,d,e,f,g,h,i,j){a={semantic:c.toString(),structure:[{type:a===b("FacebarJSConstants").keywordType?a:"ent:"+a,text:d,uid:c}],type:a,cost:e,cache_id_length:0,features:[]};a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});b("FacebarGlobalOptions").enableBootstrapRanking&&(a.termMatches=h[c.toString()],a=this.addFeatures(a,d.toLowerCase(),f,g,i,j));return a},getRawTextFromStructured:function(a){a=a.map(function(a){return a.getText()});return a.join("")},getTextFromResult:function(a){a=a.structure;var b="";a.forEach(function(a){b+=a.text});return b}};e.exports=a}),null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=30,i=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function a(a){var b=u(a),c=0,d=0;return j(a).map(function(a){while(c<b.length){var e=b[c],f=e.offset-d;if(f<a.offset)d+=e.token.length-e.name.length,c++;else break}return{marker:a.marker,tag:a.hashtag,rawOffset:a.offset+d,offset:a.offset}})}function c(a){return k(a,p(a))}function j(a){var b=w(a);return k(b,l(a,b))}function k(a,b){return n(a).slice(0,h).filter(function(a){var c=r(a.offset,a.hashtag.length,b);return!c&&a.hashtag.length<=g})}function l(a,b){return q(o(a),p(b))}var m=b("getHashtagRegex")();function n(a){var b=[];a.replace(m,function(a,c,d,e,f){b.push({marker:d,hashtag:e,offset:f+c.length})});return b}function o(a){return x(a).map(function(a){return[a.offset,a.name.length]})}function p(a){var c=[],d,e=0;while(d=b("URLMatcher").permissiveMatch(a)){var f=a.indexOf(d);c.push([e+f,d.length]);a=a.substring(f+d.length);e+=f+d.length}return c}function q(a,b){var c=[],d=0,e=0,f=0;while(d<a.length&&e<b.length)a[d][0]>b[e][0]?c[f++]=b[e++]:c[f++]=a[d++];return c.concat(a.slice(d),b.slice(e))}function r(a,b,c){if(!c)return!1;var d=t(c,a);return s(a,b,c,d)||s(a,b,c,d+1)}function s(a,b,c,d){if(!c[d])return!1;var e=c[d][0];c=c[d][1];return!(a+b-1<e||a>e+c-1)}function t(a,b){var c=0,d=a.length-1;while(c<=d){var e=Math.floor((c+d)/2),f=a[e][0];if(f==b)return e;else f<b?c=e+1:d=e-1}return d}function u(a){var b=[];a.replace(i,function(a,c,d,e,f){b.push({token:a,id:c,type:d,name:e,offset:f})});return b}function v(a){return a?a.replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null}function w(a){return a.replace(i,function(a,b,c,d,e){return v(d)})}function x(a){var b=0,c=0;return u(a).map(function(d){var e=a.indexOf(d.token,c);c=e+1;e-=b;var f=v(d.name);b+=d.token.length-f.length;if(e>=0)return{id:d.id,name:f,type:d.type,offset:e}})}d={};d.parse=a;d.parseWithoutMentions=c;e.exports=d}),null);
__d("HashtagSearchResultUtils",["fbt","FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI"],(function(a,b,c,d,e,f,g){__p&&__p();a={getHashtagFromQuery:function(a){a=b("HashtagParser").parse(a);return a&&a.length===1&&a[0].offset===0?a[0].tag:!1},makeTypeaheadResult:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,rankType:null,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,scaled_score:1,score:0,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarEntry:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarResult:function(a){var c=b("FacebarResultStoreUtils").processEntityResult("hashtag_exact","hashtag:"+a,"#"+a,b("HashtagSearchResultConfig").hashtag_cost);c.parse={display:[{type:"ent:hashtag_exact",uid:"hashtag:"+a}],remTokens:[],suffix:""};c.tags={hashtag:"hashtag"};return c}};e.exports=a}),null);
__d("FacebarFindPeopleAndPages",["cx","fbt","FacebarGlobalOptions","FacebarJSConstants","FacebarStructuredText","FacebarURI","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={insertInto:function(a,b,c){a=this._cleanQuery(a);var d=this._getInsertionIndex(a,b);if(d>-1){a=this._createFindPeopleAndPagesResult(a,c);b.splice(d,0,a)}},_getInsertionIndex:function(a,c){if(!a||!b("FacebarGlobalOptions").findPeopleAndPages)return-1;a=c.some(this._isUserOrPageSuggestion);if(!a)return-1;a=-1;for(var d=0;d<c.length;d++)this._isEntitySuggestion(c[d])&&(a=d+1);return a},_isUserOrPageSuggestion:function(a){return a.type==="user"||a.type==="page"},_isEntitySuggestion:function(a){return a.type!==b("FacebarJSConstants").keywordType&&a.type!==b("FacebarJSConstants").grammarType},_cleanQuery:function(a){return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"")},_createFindPeopleAndPagesResult:function(a,c){var d="str/"+a+"/keywords_entities",e=h._("Find all people and pages named \"{query}\"",[h._param("query",a)]);return{type:"grammar",results_set_type:"browse_type_blended",text:a,id:a,uid:a,query_string:a,icon_class:"_207",isSeeMore:!0,isPeopleAndPagesSuggestion:!0,structure:b("FacebarStructuredText").fromString(e),semantic:d,uri:b("FacebarURI").getQualifiedURI(new(b("URI"))("/search/"+d)),fromCache:c,tags:{displayedSeeMore:!0}}}};e.exports=a}),null);
__d("FacebarGSv2Echo",["cx","fbt","CurrentUser","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={insertInto:function(a,c,d,e,f,g){__p&&__p();var h=i.normalizeValue(a);if(!this._shouldInsert(a,c))return;var j=c.findIndex(function(a){return a.isSpecialIntent&&this._isKeywordSuggestion(a)&&h===i.normalizeValue(a.text)}.bind(this),this);j=b("FacebarGlobalOptions").showEcho&&(!b("FacebarGlobalOptions").renderKeywordSnippets||j<0);if(!j)return;j=this._removeExactMatchAndReturnSubtext(a,c);a=this._createEchoResult(a,d,j,e,f,g);e?a!=null&&c.unshift(a):a!=null&&(b("FacebarGlobalOptions").hasEchoOnTop?c.unshift(a):c.push(a))},_shouldInsert:function(a,c){__p&&__p();a=i.normalizeValue(a);if(!a||!b("FacebarGlobalOptions").graphSearchV2)return!1;for(var d=0;d<c.length;d++){var e=c[d],f=b("FacebarStructuredText").fromStruct(e.structure).toString().toLowerCase();if((b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&e.type!==b("FacebarJSConstants").keywordType||e.type===b("FacebarJSConstants").keywordType)&&a.toLowerCase()===f){b("FacebarGlobalOptions").hasEchoOnTop&&c.unshift(e);return!1}}return!0},_isKeywordSuggestion:function(a){return a.type===b("FacebarJSConstants").keywordType||a.type===b("FacebarJSConstants").grammarType},_removeExactMatchAndReturnSubtext:function(a,b){__p&&__p();var c="";a=i.normalizeValue(a);for(var d=0;d<b.length;d++){var e=b[d];if(this._isKeywordSuggestion(e)&&a===i.normalizeValue(e.text)){e.subtext&&(c=e.subtext);b.splice(d,1);return c}}return c},normalizeValue:function(a){return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"").toLowerCase()},_createEchoResult:function(a,c,d,e,f,g){var j=i.normalizeValue(a);f=e&&f&&b("FacebarGlobalOptions").showLocalPinkKwsSingleState&&a instanceof b("FacebarStructuredText")&&a.getFragment(0)&&a.getFragment(0).isLocal();if(f&&b("FacebarGlobalOptions").singleStateAsyncLocalPlaceEcho)return null;var k=f?b("FacebarKeywordSearchUtils").makeFacebarEntryForLocalPage(a):b("FacebarKeywordSearchUtils").makeFacebarEntry(j),l=f?b("FacebarJSConstants").keywordTypes.local:b("FacebarJSConstants").keywordTypes.keyword,m={};b("FacebarGlobalOptions").renderKeywordSnippets&&(f?(m.subtext=d||h._("See photos, posts and info about this place"),g!==null&&(m.boldedSubtext=h._("{categoryName}",[h._param("categoryName",g)]))):e&&b("FacebarGlobalOptions").singleStateClientInjections?m.boldedSubtext=d||h._("Posts"):b("CurrentUser").isWorkUser()?m.subtext=d||h._("Search Workplace"):m.subtext=d||h._("Search Facebook"));return babelHelpers["extends"]({type:b("FacebarJSConstants").keywordType,results_set_type:b("FacebarJSConstants").browseTypes.keyword,text:a,id:j,uid:j,query_string:j,icon_class:"_5b1w",isSingleState:e,isLocal:f,exactMatchKeyword:!0,structure:b("FacebarStructuredText").fromString(String(a)),semantic:k.semantic,uri:k.uri,keywordType:l,keywordSource:b("FacebarJSConstants").keywordTypes.echo,fromCache:c,tags:{}},m)}};e.exports=i}),null);
__d("FacebarInviteCoworkers",["cx","fbt","FacebarGlobalOptions","FacebarStructuredText","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={insertInto:function(a,b,c){a=this._cleanQuery(a);var d=this._getInsertionIndex(a,b);if(d>-1){a=this._createInviteCoworkersResult(a,c);b.splice(d,0,a)}},_getInsertionIndex:function(a,c){return!a||!b("FacebarGlobalOptions").inviteCoworkers?-1:c.length},_cleanQuery:function(a){return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"")},_createInviteCoworkersResult:function(a,c){var d=h._("Invite \"{query}\" to Workplace",[h._param("query",a)]),e=b("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",b("WorkInviteSource").SEARCH_TYPEAHEAD).getURI();return{uid:a,icon_class:"_5yiv",isAsync:!1,isInviteCoworkers:!0,structure:b("FacebarStructuredText").fromString(d),asyncURI:e,fromCache:c}}};e.exports=a}),null);
__d("SearchPivotType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"photo",PHOTO_EXPERIMENTAL:"photo_experimental",VIDEO:"video",FEED_SEARCH_KEYWORDS:"feed_search_keywords",SEARCH_AWARENESS_KEYWORDS:"search_awareness_keywords",ARTICLE_CLICK_ACTION:"ARTICLE_CLICK_ACTION",STORY_CLICK_ACTION:"STORY_CLICK_ACTION",STORY_LIKE_ACTION:"STORY_LIKE_ACTION",STORY_UNLIKE_ACTION:"STORY_UNLIKE_ACTION",STORY_COMMENT_DELETE_ACTION:"STORY_COMMENT_DELETE_ACTION",COMPOSER_PUBLISH_ACTION:"COMPOSER_PUBLISH_ACTION",FAN_PAGE_ACTION:"FAN_PAGE_ACTION",TRENDING_SERP_LOAD:"TRENDING_SERP_LOAD",PHOTOS_SERP_LOAD:"PHOTOS_SERP_LOAD",STORY_COMMENT_ACTION:"STORY_COMMENT_ACTION",SCROLL_ACTION:"SCROLL_ACTION",NEWS_FEED:"NEWS_FEED",PAGE:"PAGE",GROUP:"GROUP",NEWS_FEED_SECONDARY:"NEWS_FEED_SECONDARY",POST_SEARCH_SERP:"POST_SEARCH_SERP",LEARNING_NUX:"LEARNING_NUX",LEARNING_NUX_SECOND_STEP:"LEARNING_NUX_SECOND_STEP",MOBILE_STORY_LIKE_ACTION:"MOBILE_STORY_LIKE_ACTION",MOBILE_STORY_COMMENT_ACTION:"MOBILE_STORY_COMMENT_ACTION",MOBILE_COMMENT_LIKE_ACTION:"MOBILE_COMMENT_LIKE_ACTION",TIMELINE:"TIMELINE",NEXT_TRENDING:"NEXT_TRENDING",LEARNING_NUX_STANDALONE:"LEARNING_NUX_STANDALONE",TUTORIAL_NUX:"TUTORIAL_NUX",FEED_READ_ACTION:"FEED_READ_ACTION",NON_TRIGGERED_LEARNING_NUX:"NON_TRIGGERED_LEARNING_NUX",TYPEAHEAD_TOOLTIP:"TYPEAHEAD_TOOLTIP",TRIGGERED_LEARNING_NUX:"TRIGGERED_LEARNING_NUX",S19N_NUX:"S19N_NUX"})}),null);
__d("FacebarResultStore",["cx","fbt","Arbiter","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStoreUtils","FacebarStructuredText","KeywordsSearchResultConfig","SearchI18nMatch","SearchPivotType","TokenizeUtil","concatMap"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=3;function j(a,c,d,e){__p&&__p();this._extractStructure=function(a){__p&&__p();function c(a,b,c,d,e){return{type:a==="ent:extend_string"?"text":a,text:b,uid:c||null,isLocal:d?d:!1,categoryName:e?e:null}}function d(b,d){b.split(" ").forEach(function(b){b!==""&&(d&&a.chunks.push(a.structure.length),a.structure.push(c("text",b))),a.structure.push(c("text"," "))}),a.structure.pop()}function e(c){return a.structure.length!==0||b("FacebarJSConstants").nonGrammarTypes[a.type]?c:c.charAt(0).toUpperCase()+c.substr(1)}a.structure=[];a.chunks=[];a.parse.display.forEach(function(b){__p&&__p();if(typeof b==="string")d(e(b),!0);else if(b.type==="ent:extend_string")d(b.text,!0);else if(b.uid){var f=this.getEntry(b.uid,b.fetchType);a.chunks.push(a.structure.length);if(f==null)throw new Error('No entry found for uid "'+b.uid+'", type "'+b.fetchType+'" and piece text "'+b.text+'"');if(f.grammar_like)d(e(f.text),!1);else{var g=b.type;b.fetchType&&(g+=":"+b.fetchType);a.structure.push(c(g,f.text,b.uid,a.isLocal,a.categoryName))}}else b.type=="blank"&&(a.chunks.push(a.structure.length),a.structure.push(c(b.type,"...")))},this);return a}.bind(this),this._processBackendResult=function(a){__p&&__p();if(a.semantic==null)throw new Error("Facebar can't process empty semantic "+JSON.stringify(a));a.semantic=a.semantic.toString();a.backendCost=a.cost;this._extractStructure(a);a.type.match(/^\{.*\}$/)&&(a.useExtendedIndex=!0);a.alternateSemantic&&(a.alternateSemantic=a.alternateSemantic.toLowerCase().replace(/\[(\d*)\]/g,"$1"));if(a.semantic.match(/\[\d*\]/)){var b=a.parse,c=b.pos;if(c===undefined)a.semantic=a.semantic.replace(/\[(\d*)\]/g,"$1");else{var d=b.remTokens[b.remTokens.length-1];b.remTokens.length&&a.structure[a.chunks[d]]&&a.structure[a.chunks[d]].uid&&(c=b.remTokens[b.remTokens.length-1],a.completed=!0);var e=a.structure[a.chunks[c]].uid;if(e===null)a.semantic=a.semantic.replace(/\[(\d*)\]/g,"$1");else{var f=new RegExp("\\["+e+"\\]","g");a.unsubstituted_semantic=a.semantic;a.semantic=a.semantic.replace(f,e);b&&b.disambiguation&&b.disambiguation.length>0&&(b.disambiguation=b.disambiguation.filter(function(a){return a.indexOf("["+e+"]")!==-1}),b.unsubstituted_disambiguation=b.disambiguation.splice(0),b.disambiguation=b.disambiguation.map(function(a){return a.replace(f,e)}))}}}a.semantic=a.semantic.replace(/\[(.*)\]/g,"$1");a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});return a}.bind(this),this.facebarConfig=a,this.facebarConfig.grammar_stop_words_penalty=this.facebarConfig.grammar_stop_words_penalty||2,this.facebarConfig.grammar_stop_words=this.facebarConfig.grammar_stop_words||{},this.facebarConfig.options=e,this.injectedSuggestionCount=0,this.tokenize=c,this.getEntry=d,this.typeaheadTypeMap=this.facebarConfig.mapped_types,this.facebarConfig.typeahead_types.forEach(function(a){this.typeaheadTypeMap[a]=a},this),this.unicodeMatch=new(b("SearchI18nMatch"))({prefix_hangul_conjoining_jamo:!0}),this.resetCaches()}j.prototype.transformStructured=function(a){__p&&__p();var b=[],c=[],d="",e="";a.forEach(function(a,f){if(a.isType("text"))d+=a.getText(),e=e==null?null:e+a.getText();else{f=d.match(/\"/g);f&&f.length%2&&(d=d.replace(/\s+$/,"")+'"');d.length&&(Array.prototype.push.apply(b,this.tokenize(d)),c.push(d),d="");b.push(a.toStruct());c.push({uid:String(a.getUID()),type:this._getFBObjectType(a.getTypePart(1)),text:a.getText()});e=null}},this);a=!1;var f=d;d.length&&(d[d.length-1]=="'"&&(d=d.substr(0,d.length-1)),d.length>0&&d[0]==="#"?Array.prototype.push.call(b,d):d.length>0&&d[0]==="@"?(a=!0,f=this._convertToAliasKey(d.substring(1)),Array.prototype.push.call(b,f)):(f=this._convertToAliasKey(d),Array.prototype.push.apply(b,this.tokenize(d))),c.push(d),d[d.length-1]==" "&&b.push(""));var g=JSON.stringify(c),h=g.replace(/\]$/,"").replace(/\"$/,"");h=h.replace(/\s{2,}/g," ");return{tokens:b,text_form:g,is_empty:!!g.match(/^\[(\"\s*\")?\]$/),raw_text:e,cache_id:h,is_alias_search:a,potential_alias_term:f}};j.prototype.resetCaches=function(){this.resetBootstrapCache(),this.resetQueryCache()};j.prototype.resetBootstrapCache=function(){this.bootstrapCache={}};j.prototype.resetQueryCache=function(){this.queryCache={"":{tokens:[],results:[]}}};j.prototype.setNullState=function(a){this.facebarConfig.null_state=a.map(this._extractStructure,this)};j.prototype.addEntryToNullState=function(a){if(this.facebarConfig.null_state){var c=this.facebarConfig.entity_cost+a.grammar_costs["{"+a.type+"}"];a=b("FacebarResultStoreUtils").processEntityResult(a.type,a.uid,a.text,c);this.facebarConfig.null_state.unshift(a)}};j.prototype.addRecentEntryToNullState=function(a){if(!this.facebarConfig.null_state||b("FacebarGlobalOptions").hasKeywordOnlyTypeahead)return;this.removeDuplicateInNullstateIfAvailable(a);var c=babelHelpers["extends"]({},a,{isRecent:!0,isNullState:!0,type:b("FacebarJSConstants").keywordType,structure:b("FacebarStructuredText").fromString(a.text.toString()),tuid:JSON.stringify({semantic:a.semantic,structure:a.structure}),keyword_type:a.keywordType});a.icon_class&&(c.iconClass=a.icon_class);a.keywordBootstrapType===b("FacebarJSConstants").keywordBootstrapTypes.recent&&(c.iconClass="_5b1w",delete c.keywordBootstrapType);a.results_set_type&&(c.resultsSetType=a.results_set_type);c.isInjectedSuggestion=!1;this.insertEntryIntoRightPosition(c,!0)};j.prototype.addSuggestionEntryToNullState=function(a,c){__p&&__p();if(!this.facebarConfig.null_state||this.injectedSuggestionCount===i)return;var d=this.removeDuplicateInNullstateIfAvailable(a);switch(c){case b("SearchPivotType").STORY_LIKE_ACTION:this.category=h._("Based on posts you liked");break;case b("SearchPivotType").STORY_COMMENT_ACTION:this.category=h._("Based on posts you commented on");break;default:this.category=h._("Based on posts you interacted with")}c=babelHelpers["extends"]({},a,{isRecent:!1,isSuggestion:!0,isTrending:!1,isNullState:!0,type:b("FacebarJSConstants").keywordType,structure:[{text:a.text,type:"keyword"}],tuid:JSON.stringify({semantic:a.semantic,structure:a.text}),isInjectedSuggestion:!0,category:this.category});b("FacebarGlobalOptions").hasRecentOnTopNullState||(c.null_state_position="top");this.insertEntryIntoRightPosition(c,!1);d||(b("Arbiter").inform("FacebarTypeahead.injectedSuggestion"),++this.injectedSuggestionCount)};j.prototype.removeDuplicateInNullstateIfAvailable=function(a){__p&&__p();var b,c=!1;a.isInjectedSuggestion?b=a.semantic:b=decodeURIComponent(a.semantic);for(var a=0;a<this.facebarConfig.null_state.length;a++){var d=this.facebarConfig.null_state[a];if(d.semantic===b){this.facebarConfig.null_state.splice(a,1);c=!0;break}}return c};j.prototype.clearRecentSearches=function(){if(!this.facebarConfig.null_state)return;this.facebarConfig.null_state=this.facebarConfig.null_state.filter(function(a){return!a.isRecent})};j.prototype.insertEntryIntoRightPosition=function(a,c){var d=c?this.facebarConfig.null_state.findIndex(function(a){return a.isRecent}):this.facebarConfig.null_state.findIndex(function(a){return a.isSuggestion});c=c?b("FacebarGlobalOptions").hasRecentOnTopNullState:!b("FacebarGlobalOptions").hasRecentOnTopNullState;if(d<0){c?this.facebarConfig.null_state.unshift(a):(this.facebarConfig.null_state.length>=b("FacebarGlobalOptions").maxResultCount&&this.facebarConfig.null_state.shift(),this.facebarConfig.null_state.push(a));return}this.facebarConfig.null_state.splice(d,0,a)};j.prototype.setSortFunction=function(a){this._sortFunction=a};j.prototype.addBootstrap=function(a){var b=this.bootstrapCache;a.forEach(function(a){var c=this.getEntry(a);c.bootstrapped=!0;var d=this.tokenize(c.textToIndex,!0);c.tokens&&Array.prototype.push.apply(d,c.tokens.split(" "));Array.prototype.push.apply(d,this.getExtraTokensToIndex(c));d.forEach(function(c){Object.prototype.hasOwnProperty.call(b,c)||(b[c]={}),b[c][a]=!0})},this)};j.prototype._convertToAliasKey=function(a){return a.replace(/\./g,"").toLowerCase()};j.prototype.getExtraTokensToIndex=function(a){var c=[];if(a.alias!=null&&!b("FacebarGlobalOptions").disableAliasMatches){a=this._convertToAliasKey(a.alias);a.length>0&&c.push(a)}return c};j.prototype.addNullStateToQueryCache=function(a){this.saveResults(this.facebarConfig.null_state,a,!0)};j.prototype.getResults=function(a,c){__p&&__p();if(a.tokens.length===0||a.tokens.length==1&&a.tokens[0]==="")return{results:this.facebarConfig.null_state||[],null_state:!0};var d=this._getBestQueryCache(a.cache_id);d=d.results.filter(function(a){return!a.isRecent});var e={},f=this._getBootstrapMatchByType(a,e),g=this._addMatchingBootstrapResults(a,f[0]||{},e,[]);b("FacebarGlobalOptions").limitBootstrapResult&&(g=g.slice(0,b("FacebarGlobalOptions").limitBootstrapResultNum));var h=[],i=[],j=void 0;b("FacebarGlobalOptions").disableBootstrapQueryNormalization&&a.raw_text!=null?j=a.raw_text.toLowerCase():j=a.tokens.map(function(a){return a.text!=null?a.text:a}).join(" ").toLowerCase();b("FacebarGlobalOptions").hasKeywordBootstrap&&(h=g.filter(function(a){return a.type===b("FacebarJSConstants").keywordType&&this.unicodeMatch.prefixMatch(a.structure[0].text.toLowerCase(),j)}.bind(this)),h.sort(this._sortFunction(a.raw_text)),i=g.filter(function(a){return a.type!==b("FacebarJSConstants").keywordType&&this.unicodeMatch.prefixMatch(a.structure[0].text.toLowerCase(),j)}.bind(this)),i.sort(this._sortFunction(a.raw_text)),g=i.concat(h));Array.prototype.push.apply(g,b("concatMap")(this._getResultsFromCache.bind(this,f,a),d));b("FacebarGlobalOptions").hasKeywordBootstrap||(g.sort(this._sortFunction(a.raw_text)),!b("FacebarGlobalOptions").graphSearchV2&&b("FacebarGlobalOptions").keywordSearchEnabled&&b("FacebarKeywordSearchUtils").addExactMatch(a,g,c));var l={},n=[],o=!1,p=0;g.forEach(function(a){__p&&__p();var c=b("FacebarStructuredText").fromStruct(a.structure);if(c.hasType("blank")){n.push(a);return}a.semantic=a.semantic.toLowerCase();a.termMatches||(a.termMatches=e[a.semantic]);c=m(a,a.semantic);var d=m(a,a.alternateSemantic);if(!c)return;var f=l[c]||d!=null&&l[d];if(f){a.isJSBootstrapMatch?(f.isJSBootstrapMatch=!0,f.bootstrapCost=a.bootstrapCost):f.isJSBootstrapMatch&&a.backendCost!==undefined&&f.backendCost===undefined&&(f.backendCost=a.backendCost);a.tags!=null&&Object.assign(f.tags||{},a.tags);b("FacebarGlobalOptions").dedupeLocalResults&&k(a)&&f.keyword_type==="keyword"&&Object.assign(f,a);return}if(o&&a.blankFilled)return;if(a.type.indexOf("browse_type")>=0){p+=1;if(this.facebarConfig.maxGrammarResults!==undefined&&p>this.facebarConfig.maxGrammarResults)return}o=o||!!a.blankFilled;l[c]=a;d&&(l[d]=a);n.push(a)},this);return{results:n}};j.prototype.saveResults=function(a,c,d,e){__p&&__p();a=a.map(this._processBackendResult,this);var f=[],g={},h={};a.forEach(function(a){h[a.semantic]=!0});var i=this._getBestQueryCache(c.cache_id);i.results.forEach(function(a){if(a.type==="websuggestion")return;if(a.exactMatchKeyword)return;if(a.semantic in g)return;var b=this._getDifferenceArrayTokens(a.tokens,c.tokens),d=this._getNumTokensMatching(b,a);d=this._tryMatchingFinalInsertedEntity(b,d,a);(d>0&&d==b.length||(a.type==="shortcut"&&a.termMatches.indexOf(c.tokens[c.tokens.length-1]))>=0)&&(a.cacheOnlyResult=!h[a.semantic],f.push(a))},this);b("FacebarGlobalOptions").limitCacheResult&&(f=f.slice(0,b("FacebarGlobalOptions").limitCacheResultNum));a.forEach(function(a){a.tokens=c.tokens,a.cache_id_length=c.cache_id.length,a.isTypeNamedXBootstrap&&++a.cache_id_length,f.push(a)},this);this.queryCache[c.cache_id]===undefined&&(this.queryCache[c.cache_id]={});Object.assign(this.queryCache[c.cache_id],{tokens:c.tokens,results:f,incomplete:d},e)};j.prototype.alreadyKnown=function(a){return!!this.queryCache[a]&&!this.queryCache[a].incomplete};j.prototype.stripBrackets=function(a){return a.replace(/^[\[\{]/,"").replace(/[\]\}]$/,"")};j.prototype._getDifferenceArrayTokens=function(a,c){if(!a.length)return[""].concat(c);var d=a.length-1,e=a[d];e===""&&(e=a[--d]);a="";typeof e==="string"&&d<c.length&&(a=c[d].substr(e.length));return!b("FacebarGlobalOptions").matchTrailingWhitespace&&(a===""&&d+1<c.length&&c[d+1]==="")?[""]:[a].concat(c.slice(d+1))};j.prototype._sortFunction=function(a){return function(a,b){return(a.cost||0)-(b.cost||0)}};j.prototype._getResultsFromCache=function(a,c,d){a=c.tokens;var e=this._getDifferenceArrayTokens(d.tokens,a),f=[],g=this._getNumTokensMatching(e,d);g=this._tryMatchingFinalInsertedEntity(e,g,d);g>0&&g==e.length&&!(d.type===b("KeywordsSearchResultConfig").result_type&&e.length===1&&e[0]==='"')&&f.push(d);d.type==="shortcut"&&d.termMatches.indexOf(c.tokens[a-1])>=0&&f.push(d);return f};j.prototype._addMatchingBootstrapResults=function(a,c,d,e){__p&&__p();var f=a.tokens;return b("concatMap")(function(g){__p&&__p();var h=c[g];if(h===undefined)return[];var i=[],j=b("FacebarResultStoreUtils").getQueryFeatures(a);h.forEach(function(c){__p&&__p();var h=this.getEntry(c,g);if(a.is_alias_search){if(!this._isAliasMatch(a,h,!1))return}else if(!this._isTitleTermMatch(f,h)&&!this._isAliasMatch(a,h,!1)&&!e.includes(c))return;var k=this._isExactNameMatch(f,h)||this._isAliasMatch(a,h,!0),l=k?0:this.facebarConfig.non_title_term_match_penalty,m=this._isNonGrammarTermMatch(f,h),n=h.grammar_costs?h.grammar_costs["{"+g+"}"]:0,o=g===b("FacebarJSConstants").keywordType?h.cost:0;o=o+n+l+this.facebarConfig.entity_cost+this.facebarConfig.grammar_stop_words_penalty*!m;n=b("FacebarResultStoreUtils").processEntityResult(g,c,h.text,o,a,j,d,k,!m);n.bootstrapCost=o;n.isJSBootstrapMatch=!0;g===b("FacebarJSConstants").keywordType&&(n.iconClass=h.iconClass,n.keywordBootstrapType=h.keywordBootstrapType,n.parse=h.parse,n.subtext=h.subtext,n.boldedSubtext=h.boldedSubtext,n.semantic=h.semantic,n.popularSearchScore=h.popularSearchScore,n.trendingTopicID=h.trendingTopicID,n.photo=h.photo,n.keyword_type=h.keyword_type,n.keywordSource=h.keywordSource,n.item_logging_info=h.item_logging_info,n.item_logging_id=h.item_loggind_id);i.push(n)},this);return i}.bind(this),this.facebarConfig.bootstrap_types)};j.prototype._isTitleTermMatch=function(a,c){var d=a[0]||{};if(typeof d==="object")return!1;c=c.titleToIndex;return a.length===1?this._isTokenizePrefixMatch(d,c):b("TokenizeUtil").isExactMatch(d,c)};j.prototype._isExactNameMatch=function(a,c){var d=a[0]||{};if(typeof d==="object")return!1;d=c.text;for(var c=0;c<a.length-1;++c)if(a[c]!==""&&!b("TokenizeUtil").isExactMatch(a[c],d))return!1;return a.length>0&&this._isTokenizePrefixMatch(a[a.length-1],d)};j.prototype._isAliasMatch=function(a,c,d){if(c.alias==null||a.potential_alias_term==null)return!1;c=this._convertToAliasKey(c.alias);if(d||!a.is_alias_search)return b("TokenizeUtil").isExactMatch(a.potential_alias_term,c);else return b("TokenizeUtil").isPrefixMatch(a.potential_alias_term,c)};j.prototype._isNonGrammarTermMatch=function(a,c){__p&&__p();c=b("TokenizeUtil").parse(c.titleToIndex.toLowerCase());c=c.tokens.filter(function(a){return a!==""&&!this.facebarConfig.grammar_stop_words[a]},this);c=c.join(" ");for(var d=0;d<a.length;++d){if(typeof a[d]==="object")return!0;var e=d===a.length-1?this._isTokenizePrefixMatch(a[d],c):b("TokenizeUtil").isQueryMatch(a[d],c);if(e)return!0}return!1};j.prototype._getBootstrapMatchByType=function(a,b){__p&&__p();var c=arguments.length<=2||arguments[2]===undefined?[]:arguments[2],d=a.tokens.slice();if(d.length===0)return[];var e=d.map(function(){return{}}),f=d[d.length-1]==="",g={},h,i=f?d.length-1:d.length,j=d[i-1];if(i&&j.uid){this._pushBootstrapEntryAtPosition(e,i-1,j.uid,a.is_alias_search);return e}for(var k in this.bootstrapCache)if(i&&this.unicodeMatch.prefixMatch(k,j)&&(!f||k===j))for(h in this.bootstrapCache[k])this._addMatchedTerm(h,k,b),g[h]||(g[h]=1,this._pushBootstrapEntryAtPosition(e,i-1,h,a.is_alias_search));for(var l=i-2;l>=0;l--){if(typeof d[l]==="object")break;if(d[l].length&&d[l][0]=='"')break;for(h in this.bootstrapCache[d[l]])g[h]||(g[h]=0),g[h]+l==i-1&&(++g[h],this._addMatchedTerm(h,d[l],b),this._pushBootstrapEntryAtPosition(e,l,h,a.is_alias_search))}if(!a.is_alias_search&&a.potential_alias_term)for(h in this.bootstrapCache[a.potential_alias_term])this._addMatchedTerm(h,a.potential_alias_term,b),g[h]||(g[h]=1,this._pushBootstrapEntryAtPosition(e,0,h,a.is_alias_search));for(var m=c,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;this.getEntry(q)&&!g[q]&&(g[q]=1,this._pushBootstrapEntryAtPosition(e,0,q,a.is_alias_search))}return e};j.prototype._addMatchedTerm=function(a,b,c){(c[a]=c[a]||[]).push(b);return c};j.prototype._pushBootstrapEntryAtPosition=function(a,c,d,e){__p&&__p();var f=this.getEntry(d);if(!f)return;var g=[];!b("FacebarGlobalOptions").ignoreGrammarCostsForBootstrap&&f.grammar_costs?g=Object.keys(f.grammar_costs).map(function(a){return this.stripBrackets(a)},this):g=[f.type];for(var f=0;f<g.length;f++){var h=g[f];if(e&&h!=="user"&&h!=="page")continue;a[c][h]===undefined&&(a[c][h]=[]);a[c][h].push(d)}};j.prototype._getNumTokensMatching=function(a,b){__p&&__p();var c=0,d=b.parse,e=a.length,f=null,g=null;if(d.pos!==undefined){var h=b.structure[b.chunks[d.pos]];h&&(f=h.uid,g=h.type.split(":")[2])}b.outputTokensUsed=[];b.termMatches=[];if(f){c=this._prefixMatchEntity(a,d,f,b.outputTokensUsed,g,!!b.useExtendedIndex,b.termMatches);if(c===0||c===e)return c}else if(d.suffix&&e==1&&d.suffix.indexOf(a[0])===0)return e;else if(d.suffix==a[0])++c;else return 0;h=[];d.remTokens=d.remTokens||[];for(var f=0;f<d.remTokens.length;f++){if(typeof a[c]!=="string"||b.chunks.length<=d.remTokens[f]||b.structure.length<=b.chunks[d.remTokens[f]]||b.structure[b.chunks[d.remTokens[f]]].uid)break;g=b.structure[b.chunks[d.remTokens[f]]].text;h.push(g.toLowerCase())}c=this._greedyMatchText(h,a,c,d.remTokens,b.outputTokensUsed,b.isNullState);return c==e-1&&a[c]===""?e:c};j.prototype._prefixMatchEntity=function(a,b,c,d,e,f,g){__p&&__p();b.entTokens=b.entTokens||[];if(b.entTokens.length===0){if(a[0]!=="")return 0;if(b.possessive&&a.length>1&&a[1]=="'s"){d.push([b.pos+1]);return 2}else return 1}var h=!1;c=this.getEntry(c,e);if(e!==undefined&&e!==c.fetchType)return 0;e=this.tokenize(f?c.textToIndex:c.text,!0);f=[];for(var c=0;c<a.length+b.entTokens.length-1;c++)c<b.entTokens.length-1?f.push(b.entTokens[c]):c==b.entTokens.length-1?f.push(b.entTokens[c]+a[0]):f.push(a[c-b.entTokens.length+1]);c=-b.entTokens.length+1;for(var i=0;i<f.length;++i){var j=f[i];if(typeof j!=="string")break;if(j===""){c++;continue}var k=!1;for(var l=0;l<e.length;l++)if(e[l]==j||i===f.length-1&&e[l].indexOf(j)===0){g&&g.push(e[l]);e[l]="";k=!0;++c;break}if(k)continue;if(!b.possessive||j.length<=2||j.substr(j.length-2)!="'s")break;k=j.substr(0,j.length-2);for(l=0;l<e.length;l++)if(e[l]==k){++c;d&&(h=!0);break}break}if(c>0){h&&d.push([b.pos+1]);return c}if(d===undefined)return 0;j=a[0];l=j;b.possessive&&j.length>=2&&j.substr(j.length-2)=="'s"&&(l=j.substr(0,j.length-2));b.suffix=b.suffix||"";if(a.length==1&&b.suffix.indexOf(j)===0||b.suffix==l||b.suffix==j){l!=j&&b.suffix==l&&d.push([b.pos+1]);return 1}return 0};j.prototype._tryMatchingFinalInsertedEntity=function(a,b,c){if(!c.completed||b<0)return b;var d=c.parse;d=d.remTokens[d.remTokens.length-1];c=c.structure[c.chunks[d]];d=this.getEntry(c.uid,c.type);c=this.tokenize(d.text,!0);b=this._greedyMatchText(c,a,b);return b==a.length-1&&a[b]===""?a.length:b};j.prototype._greedyMatchText=function(a,b,c,d,e,f){__p&&__p();for(var g=0;g<a.length;g++){var h=a[g];if(h==b[c]){e!==undefined&&e.push(d[g]);++c;continue}if(c===b.length-1&&h.indexOf(b[c])===0){e!==undefined&&(h==b[c]?e.push([d[g]]):e.push([d[g],b[c].length]));return b.length}if(f)break}return c};j.prototype._getBestQueryCache=function(a){for(var b=a.length;b>=0;b--){var c=this.queryCache[a.slice(0,b)];if(c)return c}};j.prototype._getFBObjectType=function(a){if(this.typeaheadTypeMap[a])return this.typeaheadTypeMap[a];else return"page"};j.prototype._isTokenizePrefixMatch=function(a,c){return b("TokenizeUtil").isPrefixMatch(this.unicodeMatch.prefixMatchPrepare(a),this.unicodeMatch.prefixMatchPrepare(c))};j.prototype.getBootstrapMatches=function(a){var b=arguments.length<=1||arguments[1]===undefined?[]:arguments[1],c={},d=this._getBootstrapMatchByType(a,c,b?b:[]);return this._addMatchingBootstrapResults(a,d[0]||{},c,b?b:[])};j.EPSILON=1e-5;j.getUniqueSemantic=function(a){__p&&__p();if(!a)return;var b=[],c=[],d=[];a="("+a+")";var e=a,f=!1;a.replace(/[\(\),]/g,function(g,h){__p&&__p();var i;switch(g){case",":var j=d.length-1;i=e.substr(d[j],h-d[j]);b[j].push(i);d[j]=h+1;break;case"(":d.push(h+1);b.push([]);c.push(h+1);break;case")":if(d.length===0)throw new Error(a+" is not a valid semantic string");j=d.pop();i=e.substr(j,h-j);i=decodeURI(i.replace(/%/g,"%25").replace(/\s/g,"+").trim());j=b.pop();j.push(i);i=j.sort();for(var j=1;j<i.length;j++)i[j]==i[j-1]&&(f=!0);j=i.join(",");e=e.substr(0,c.pop())+j+e.substr(h);break}return g});return f?"":e.replace(/\((.*)\)/,"$1")};var k=function(a){return a.keyword_type==="local"&&a.semantic.match(/[0-9]+\/local/)!=null},l=function(a){if(!b("FacebarGlobalOptions").dedupeLocalResults||!k(a))return null;a=encodeURIComponent(a.name.replace(/\s+/g,"+"));return"str/"+a+"/keywords_search"},m=function(a,c){if(b("FacebarGlobalOptions").hasKeywordOnlyTypeahead)return b("FacebarStructuredText").fromStruct(a.structure).toString().toLowerCase();a=l(a);a=a!=null?a:j.getUniqueSemantic(c);return a!=null?a.toLowerCase():null};e.exports=j}),null);
__d("FacebarSimplifiedNoFlickerResults",["cx","fbt","CurrentUser","FacebarGlobalOptions","FacebarGSv2Echo","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=2;a={insertInto:function(a){var b=a.filter(function(a){return a.type!=="keyword"});b.slice(0,i).forEach(function(b){return this._maybeAddResultFromEntity(a,b)}.bind(this))},_maybeAddResultFromEntity:function(a,b){b=this._createResult(b.text.toLowerCase());this._resultsContainKeywordResult(a,b)||a.push(b)},_createResult:function(a){a=b("FacebarGSv2Echo").normalizeValue(a);var c=b("FacebarKeywordSearchUtils").makeFacebarEntry(a),d=void 0;b("FacebarGlobalOptions").renderKeywordSnippets&&(b("CurrentUser").isWorkUser()?d=h._("Search Workplace"):d=h._("Search Facebook"));return{type:b("FacebarJSConstants").keywordType,results_set_type:b("FacebarJSConstants").browseTypes.keyword,text:a,id:a,uid:a,query_string:a,icon_class:"_5b1w",exactMatchKeyword:!0,structure:b("FacebarStructuredText").fromString(String(a)),semantic:c.semantic,uri:c.uri,subtext:d,tags:{}}},_resultsContainKeywordResult:function(a,c){return a.some(function(a){return a.type==="keyword"&&b("FacebarGSv2Echo").normalizeValue(a.text)===b("FacebarGSv2Echo").normalizeValue(c.text)})}};e.exports=a}),null);
__d("FacebarTimerUtils",[],(function(a,b,c,d,e,f){"use strict";a={getTimestamp:function(){return Date.now()}};e.exports=a}),null);
__d("FacebarTokenizer",["TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a='[^"]';var g=["\\s's","'s",'"'+a+'*"?'],h=[[/\s+$/,""],[/\"\s+/,'"'],[/\s+\"/,'"'],[/\"\"/,""],[/^\"$/,""],[/\s+/," "]];c={tokenize:function(a,c){__p&&__p();var d=[],e=0;a=a.replace(/\s/g," ").toLowerCase();a.replace(new RegExp(g.join("|"),"g"),function(f,g){__p&&__p();if(g>e){var i=a.substr(e,g-e);Array.prototype.push.apply(d,b("TokenizeUtil").parse(i).tokens.slice(0))}i=f;for(var j=0;j<h.length;j++){var k=h[j];i=i.replace(k[0],k[1])}d.length&&i=="'s"?d[d.length-1]+=i:i!==""&&d.push(i);c&&Array.prototype.push.apply(d,b("TokenizeUtil").parse(f).tokens);e=g+f.length});if(e<a.length){var f=a.substr(e,a.length-e);Array.prototype.push.apply(d,b("TokenizeUtil").parse(f).tokens.slice(0))}return d}};e.exports=c}),null);
__d("ResultsBucketizer",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){this.$1=a,this.$2=b}g.trimResults=function(a,b,c){var d=[];a.forEach(function(a,c){a.indexBeforeBuckets>b&&d.push({index:c,originalIndex:a.indexBeforeBuckets})});d.sort(function(a,b){return a.originalIndex-b.originalIndex}).slice(c).sort(function(a,b){return b.index-a.index}).forEach(function(b){a.splice(b.index,1)})};g.mergeBuckets=function(a,b){var c=[];for(var d in b)!b[d].rule.hidden&&(!b[d].rule.xor||!b[b[d].rule.xor])&&c.push(b[d]);c.sort(function(a,b){var c=(a.rule.position||0)-(b.rule.position||0);return c!==0?c:a.results[0].indexBeforeBuckets-b.results[0].indexBeforeBuckets});a.length=0;c.forEach(function(b,d){b.rule.maxPromotions!=null&&d<c.length-1&&g.trimResults(b.results,c[d+1].results[0].indexBeforeBuckets,b.rule.maxPromotions),Array.prototype.push.apply(a,b.results)}.bind(this))};g.prototype.$3=function(a,b){if(b.propertyName==null)return b.bucketName||"default";a=this.$2(a,b.propertyName);return a==null||b.propertyValue!=null&&""+a!==b.propertyValue?!1:b.bucketName||b.propertyName+"."+a};g.prototype.$4=function(a,c,d){__p&&__p();var e={},f=!1;b("FacebarGlobalOptions").renderKeywordsFirst?f=!0:f=a[0]!=null&&a[0].type===b("FacebarJSConstants").keywordType;f&&d==null&&(d=b("FacebarGlobalOptions").default_num_top_results_to_show);a.forEach(function(a,g){__p&&__p();c.some(function(c){__p&&__p();var g=this.$3(a,c);if(g===!1)return!1;e[g]==null&&(e[g]={results:[],rule:c});if(f&&g===b("FacebarJSConstants").keywordType&&e[g].results.length>=d)return!0;if(!!c.maxResults&&e[g].results.length>=c.maxResults)return!0;a.bucketLineage.push({bucketName:g,bucketIndex:e[g].results.length});e[g].results.push(a);return!0}.bind(this))}.bind(this));return e};g.prototype.$5=function(a,b,c){__p&&__p();b=this.$1[b];if(!b)return{};b=this.$4(a,b,c);for(var d in b){var e=b[d].rule.subBucketRules;e&&this.$5(b[d].results,e,c)}g.mergeBuckets(a,b);return b};g.prototype.$6=function(a,b,c){if(b.length<=c)return b.slice();a=b.map(function(a){return a.indexBeforeBuckets});var d=a.sort(function(a,b){return a-b})[c];return d==null?b:b.filter(function(a){return a.indexBeforeBuckets<d})};g.prototype.bucketize=function(a,b,c,d){a.forEach(function(a,b){a.bucketLineage=[],a.indexBeforeBuckets=b});c=c||{};Object.assign(c,this.$5(a,"main",d));d=this.$6(c,a,b);return d};e.exports=g}),null);
__d("SearchBootstrapCache",["AsyncRequest","AsyncResponse","CacheStorage","SearchBootstrapCacheConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=1;a={get:function(a,c,d,e,f){__p&&__p();var g=this.getKey(a,c,d),h=this.getStorage(),i=h.get(g);h=b("SearchBootstrapCacheConstants")[c.type]||36e5;if(i==null||Date.now()-i.timestamp>h)f(d,a,c);else{g=new(b("AsyncRequest"))();g.getData=function(){return i.requestData};h=new(b("AsyncResponse"))(g,i.payload);e(h,c)}},set:function(a,b,c){var d=a.getRequest().getData();this.getStorage().set(this.getKey(d,b,c),{timestamp:Date.now(),payload:a.payload,requestData:d})},getKey:function(a,b,c){return JSON.stringify({filter:a.filter,context:a.context,viewer:a.viewer,lazy:a.lazy,token:a.token,type:b.type,bootstrapEndpoint:c})},getStorage:function(){return new(b("CacheStorage"))("localstorage","_SearchBootstrapCache_"+g)}};e.exports=a}),null);
__d("SearchSingleState",["fbt"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,b,c,d){return{classNames:"grammar",groupIndex:0,indexInGroup:a,path:b,text:c,type:"grammar",uid:d}}a={getSuggestions:function(a,b,c){if(c==="ent:user")return this.getSuggestionsForUser(a,b);else if(c==="ent:page")return this.getSuggestionsForPage(a,b);else if(c==="ent:app")return this.getSuggestionsForApp(a,b);else if(c==="ent:group")return this.getSuggestionsForGroup(a,b)},getSuggestionsForUser:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {full name}",[g._param("full name",b)]),"photos_of_user"),h(1,"/search/"+a+"/friends",g._("friends of {full name}",[g._param("full name",b)]),"friends_of_user"),h(2,"/search/"+a+"/pages-liked",g._("favorite pages of {full name}",[g._param("full name",b)]),"pages_liked_user"),h(3,"/search/str/"+b+"/users-named",g._("find all people named \"{full name}\"",[g._param("full name",b)]),"people_named_text")]},getSuggestionsForPage:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {name of page}",[g._param("name of page",b)]),"photos_of_page"),h(1,"/search/"+a+"/likers",g._("people who like {name of page}",[g._param("name of page",b)]),"page_likers"),h(2,"/search/str/"+b+"/pages-named",g._("find all pages named \"{name of page}\"",[g._param("name of page",b)]),"pages_named_text")]},getSuggestionsForGroup:function(a,b){return[h(0,"/search/"+a+"/members",g._("{name of group} members",[g._param("name of group",b)]),"members_of_group"),h(1,"/search/"+a+"/photos-in",g._("photos in {name of groups}",[g._param("name of groups",b)]),"photos_in_group"),h(2,"/search/"+a+"/creators",g._("{name of group} creators",[g._param("name of group",b)]),"creators_of_group"),h(3,"/search/"+a+"/admins",g._("{name of group} administrators",[g._param("name of group",b)]),"admins_of_group")]},getSuggestionsForApp:function(a,b){return[h(0,"/search/"+a+"/apps-similar-to",g._("apps similar to {name of app}",[g._param("name of app",b)]),"similar_apps"),h(1,"/search/"+a+"/app-users",g._("people who use {name of app}",[g._param("name of app",b)]),"app_users"),h(2,"/search/str/"+b+"/pages-named",g._("find all apps named \"{name of page}\"",[g._param("name of page",b)]),"apps_named_text")]}};e.exports=a}),null);
__d("SearchDataSource",["Arbiter","AsyncResponse","CSRFGuard","CurrentUserInitialData","DataSource","Event","FacebarJSConstants","HashtagSearchResultUtils","PageTransitionsRegistrar","SearchBootstrapCache","SearchRegion","SearchSingleState","UnicodeCJK","XHRRequest","createArrayFromMixed","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=100,i="/typeahead/search/facebar/nullstate/";c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){__p&&__p();a.headerflags=new Map();(b("SearchRegion").sgp_fork_ss_at_proxygen||b("SearchRegion").sgp_fork_gs_at_proxygen)&&a.headerflags.set("X-FB-ForkingType","edge-sgp-search");g.constructor.call(this,a);this._updateMaxResults=function(){var a=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(a-370)/56))))}.bind(this);this._token=a.token||"";this._lazyonload=a.lazyonload!==!1;this._extraTypes=a.extraTypes;this._buckets=a.buckets;this._noMultiFetch=a.noMultiFetch||!1;this._nullStateConfig=a.nullStateConfig||{};var c=a.maxResults||8;this._numResults={min:3,max:c};this.recordingRoute=a.recordingRoute||"non_banzai";this._enabledHashtag=a.enabledHashtag||!1;this.logBackendQueriesWindow=a.logBackendQueriesWindow||25;this._genTime=a.genTime;this._bootstrapError=!1;this._hasKeywordBootstrap=a.hasKeywordBootstrap||!1;this._addJoinedTermsMatching=a.addJoinedTermsMatching||!1;this._useBootstrapCache=a.useBootstrapCache||!1;this._useBrowserCache=a.useBrowserCache||!1;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:!0,prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:a.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:a.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens})}a.prototype.init=function(){__p&&__p();g.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=!0;this._updateMaxResults();var a=b("debounce")(this._updateMaxResults,h,this,!0);b("Event").listen(window,"resize",a);this._nullStateConfig.prefetchNullState&&this.fetchNullState("");this._nullStateConfig.singleState&&b("Arbiter").subscribe("page_transition",this.handlePageTransition.bind(this));(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)&&b("Arbiter").subscribe("search/updateNullState",this.updateNullState.bind(this));this._nullStateConfig.recent&&b("Arbiter").subscribe("search/refreshRecentSearchesNullstate",this.refreshRecentSearches.bind(this))};a.prototype.refreshRecentSearches=function(){this.nullStateData=null};a.prototype.handlePageTransition=function(){this.nullStateParams={}};a.prototype.updateNullState=function(event,a){this.nullStateParams=a,this.fetchNullState()};a.prototype.markResultsAsNullState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isNullState=!0}};a.prototype.markResultsAsSingleState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isSingleState=!0}};a.prototype.fetchNullState=function(a){this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var b=null;this.nullStateParams&&this.nullStateParams.uid?(this.nullStateParams.query=a||"",b=this._fetchDataForSingleState(),this.markResultsAsNullState(b)):(b=this._fetchDataForNullState(),this.markResultsAsSingleState(b));b&&this.inform("respond",{value:this.nullStateParams?this.nullStateParams.query:"",results:b,isAsync:!1,nullState:!0})};a.prototype._fetchDataForSingleState=function(){__p&&__p();if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==="ent:app"||this.nullStateParams.type==="ent:group"||this.nullStateParams.type==="ent:page"){this.fetch(i,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:!0});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return}var a=b("SearchSingleState").getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!a)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:a,profileID:this.nullStateParams.uid};return a};a.prototype._shouldRefreshNullState=function(){if(!this._nullStateConfig.recent)return!1;var a=window.location.href;if(!a)return!1;return a.contains("allactivity")&&a.contains("log_filter=search")?!0:!1};a.prototype._fetchDataForNullState=function(){if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0})}.bind(this),0);return}this.fetchingNullState||(this.fetchingNullState=!0,this.fetch(i,{value:""},{nullState:!0,value:""}));return null};a.prototype.dirty=function(){g.dirty.call(this),this._bootstrapError=!1,this._fetchOnUseRequests=[]};a.prototype.asyncErrorHandler=function(a,b){b.nullState&&(this.fetchingNullState=!1),b.bootstrap&&(this._bootstrapError=!0),this.inform("fetchError",{response:a,fetch_context:b})};a.prototype.fetch=function(a,c,d){d=d||{};d.fetch_start=Date.now();var e=b("PageTransitionsRegistrar").getMostRecentURI().getPath();c=babelHelpers["extends"]({},c,{path:e});g.fetch.call(this,a,c,d)};a.prototype.xhrFetchHandler=function(a,c,d){a=b("CSRFGuard").clean(a);a=JSON.parse(a);return this.fetchHandler(new(b("AsyncResponse"))(null,a.payload),d,c)};a.prototype.fetchHandler=function(a,c){__p&&__p();var d=arguments.length<=2||arguments[2]===undefined?null:arguments[2];if(c.nullState){this.fetchingNullState=!1;this.nullStateData=a.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0});return}if(c.singleState){this.nullStateDataWithProfile.data=a.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform("respond",{results:this.nullStateDataWithProfile.data,isAsync:!0,value:this.nullStateParams?this.nullStateParams.query:"",nullState:!0});return}var e=a.getPayload(),f=babelHelpers["extends"]({fetch_end:Date.now()},c),h=f.value?b("Arbiter").BEHAVIOR_EVENT:b("Arbiter").BEHAVIOR_PERSISTENT;this.inform("beginFetchHandler",{response:a});c.bootstrap&&(this._bootstrapError=!1);var i=d===null?a.getRequest().uri.getPath():d.getURI().getPath();i===this.bootstrapEndpoint&&this._useBootstrapCache&&b("SearchBootstrapCache").set(a,c,this.bootstrapEndpoint);if(c.type=="lean")this._leanPayload=e,this._processLean();else{e.coeff2_ts&&(f.coeff2_ts=e.coeff2_ts);g.fetchHandler.call(this,a,c);var j=d===null?a.getRequest().getData():d.getData();c.bootstrap&&!j.no_cache&&(f.browserCacheHit=e.timestamp<this._genTime);c.bootstrap&&!e.no_data&&this._bootstrapRequestsPending>0&&(c.bootstrap=!1,--this._bootstrapRequestsPending,this._bootstrapRequestsPending||this._bootstrapPostProcess());if(e.no_data||e.stale||e.token!==this._token){var k=babelHelpers["extends"]({},j);k.lazy&&(delete k.lazy,k.token=this._token,this._fetchOnUse(k,c))}}this.inform("endpointStats",{info:f,response:a},h);c&&!!c.value&&this.inform("completeFetch",{response:a,stats:f});var l=this.getResponseHeaderValue("X-FB-ForkingPoolID");l.length>0&&this.inform("logProxygenForkPoolId",{field:"fork_pool_id",value:l})};a.prototype.respond=function(a,b,c){this.inform("respondValidUids",b);this.inform("reorderResults",b);b=this.buildData(b,a);b.forEach(function(a,b){a.origIndex=b,a.fromCache=!c});this.inform("respond",{value:a,results:b,isAsync:!!c});return b};a.prototype.buildData=function(a,b){if(!a||a.length===0)return[];b=a.map(this.getEntry,this);b.length=Math.min(b.length,this._maxResults);return b};a.prototype.fetchLean=function(){this._fetchLean()};a.prototype._isQueryTooShort=function(a){return a.length<this._minQueryLength&&!this._performShortQuery&&!b("UnicodeCJK").hasIdeoOrSyll(a)};a.prototype.shouldFetchMoreResults=function(a){return a.length<this._maxResults};a.prototype._bootstrapPostProcess=function(){var a=0;for(var c in this._data)Object.prototype.hasOwnProperty.call(this._data,c)&&a++;this.inform("bootstrapped",{time:Date.now(),size:a},b("Arbiter").BEHAVIOR_PERSISTENT);this._processLean()};a.prototype._processLean=function(){if(this._leanPayload){var a;void 0;var b=this._leanPayload.entries;for(var c in b)a=this.getEntry(c),a&&(a.index=b[c]);this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}};a.prototype._bootstrapFetch=function(a,b){b=babelHelpers["extends"]({},b,this.bootstrapData);this._criticalOnly&&this._lazyonload&&(b.lazy=1);a={bootstrap:!0,type:a};this._fetchBootstrapMaybeCache(b,a);++this._bootstrapRequestsPending};a.prototype._fetchBootstrapMaybeCache=function(a,c){var d=this;this._useBootstrapCache?b("SearchBootstrapCache").get(a,c,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this)):this._useBrowserCache?(function(){var e=new(b("XHRRequest"))(d.bootstrapEndpoint).setData(babelHelpers["extends"]({},a,{__user:b("CurrentUserInitialData").USER_ID,__a:1})).setMethod("GET").setResponseHandler(function(a){return this.xhrFetchHandler(a,e,c||{})}.bind(d)).setErrorHandler(function(a){return this.asyncErrorHandler(a,c)}.bind(d));d.inform("beforeFetch",{request:e,fetch_context:c});e.send()})():this.fetch(this.bootstrapEndpoint,a,c)};a.prototype._fetchOnUse=function(a,b){for(var c in this.bootstrapData)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=this.bootstrapData[c]);this._criticalOnly?this._fetchOnUseRequests.push({args:a,ctx:b}):this._fetchBootstrapMaybeCache(a,b)};a.prototype._fetchLean=function(){var a={no_cache:1};a.options=b("createArrayFromMixed")(a.options);a.options.push("lean");this._fetchOnUse(a,{type:"lean"})};a.prototype.bootstrap=function(a){__p&&__p();a||(this._criticalOnly=!1,this._flushFetchOnUseRequests());if(this._bootstrapped)return;a={filter:["event"]};this._fetchOnUse(a,{type:"event"});a=["app","page","group","friendlist"];a=a.concat(this._extraTypes||[]);var c=[];this._hasKeywordBootstrap&&c.push(b("FacebarJSConstants").keywordType);if(this._noMultiFetch)a.push("user"),a=a.concat(c),this._bootstrapFetch("user",{filter:a});else{this._bootstrapFetch("other",{filter:a});if(this._buckets)for(var a=0;a<this._buckets.length;++a){var d={filter:["user"],buckets:this._buckets[a]};this._bootstrapFetch("user",d)}else this._bootstrapFetch("user",{filter:["user"]});c.length>0&&this._bootstrapFetch("keyword",{filter:c})}this._fetchLean();this._bootstrapped=!0};a.prototype.getBootstrapError=function(){return this._bootstrapError};a.prototype._flushFetchOnUseRequests=function(){var a=this._fetchOnUseRequests.length;for(var c=0;c<a;++c){var d=this._fetchOnUseRequests[c];this._fetchBootstrapMaybeCache(d.args,d.ctx)}a>0&&this.inform("extra_bootstrap",{time:Date.now()},b("Arbiter").BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[]};a.prototype.onLoad=function(a,c){this.inform("onload",{time:Date.now()},b("Arbiter").BEHAVIOR_PERSISTENT),a&&setTimeout(this.bootstrap.bind(this,c),0)};a.prototype.mergeUids=function(a,b,c,d){__p&&__p();var e=this.getDynamicHashtagResult(d);d&&e&&b.indexOf(e)<=0&&b.unshift(e);e=c[0]?this.getEntry(c[0]):null;var f=b[0]?this.getEntry(b[0]):null;e=e&&e.replace_results?e:null;e=!e&&f&&f.replace_results?f:e;f=g.mergeUids.call(this,a,b,c,d);if(e){this.inform("backend_topreplace",{});return this.deduplicateByKey([e.uid].concat(f))}return f};a.prototype.getTextToIndexFromFields=function(a,b){var c=[],d=a.tokenVersion==="v2";for(var e=0;e<b.length;++e){if(d&&(b[e]==="text"||b[e]==="alias"))continue;var f=a[b[e]];f&&(f=f.join?f.join(" "):f,c.push(f),b[e]=="text"&&this._addJoinedTermsMatching&&(f=f.toLowerCase(),f=f.replace(/ /g,""),c.push(f)))}return c.join(" ")};a.prototype.getDynamicHashtagResult=function(a){if(!a||!this._enabledHashtag)return;var c=b("HashtagSearchResultUtils").getHashtagFromQuery(a);if(!c)return;var d="hashtag:"+c,e=this.getEntry(d);e||this.processEntries([b("HashtagSearchResultUtils").makeTypeaheadResult(c)],a);return d};a.prototype.tokenizeCache=function(a,b){a=this.cacheUnicodeMatch.prefixMatchPrepare(a);a=this._tokenize(a,b);b=a.tokens;b.length>0&&a.value.startsWith("@")&&(b[0]="@"+b[0]);return a};e.exports=a}),null);
__d("FacebarDataSource",["invariant","Arbiter","AsyncRequest","AsyncResponse","CSRFGuard","CurrentUser","FacebarFindPeopleAndPages","FacebarGlobalOptions","FacebarGSv2Echo","FacebarInviteCoworkers","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStore","FacebarResultStoreUtils","FacebarSimplifiedNoFlickerResults","FacebarStructuredText","FacebarTimerUtils","FacebarTokenizer","FacebarURI","ResultsBucketizer","ResultsBucketizerConfig","SearchDataSource","Vector","ViewportBounds","XHRRequest","gkx","queryThenMutateDOM","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=50,j={};c=babelHelpers.inherits(a,b("SearchDataSource"));h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.executeQuery=function(a,c,d){__p&&__p();var e=this;this._curQueryId++;d!=null&&(d.queryId=this._curQueryId,d.startCacheQuery=b("FacebarTimerUtils").getTimestamp());var f=this.getMaxResults();this.setQueryData({qid:this._curQueryId,max_results:f});this.inform("beforeQuery",{value:a,queryId:this._curQueryId});this.value=a;var g=this.buildUids(a,[]);d!=null&&(d.endCacheQuery=b("FacebarTimerUtils").getTimestamp());c&&g.length===0&&g.push(c);b("FacebarGlobalOptions").sendExistingIDs&&(function(){var a=[];g.forEach(function(c){c=this.getEntry(c);c&&c.type in b("FacebarJSConstants").entityTypes&&a.push(c.uid)},e);a.length>0&&e.setQueryData({qid:e._curQueryID,existing_ids:JSON.stringify(a),max_results:f})})();this.inform("query",{value:a,results:g,queryId:this._curQueryId});this.resultStore&&this.respond(a,g,!1,!1,d)}.bind(this),this.sendRemoteQuery=function(a,c,d,e,f,g){__p&&__p();var h=this.getQueryData(a.text_form),i=d!=null?d.queryId:0;if(g){var j=this.globallyCachedKeywordsTTL*60;j=new(b("XHRRequest"))(this.globalKeywordsEndpoint).setData({value:h.value,platform:"desktop",ttl:this.globallyCachedKeywordsTTL,global:this.globallyCachedKeywordsUseCDN,use_dt:this.globallyCachedKeywordsUseDT}).setMethod("GET").setRequestHeader("Cache-Control","max-age="+j).setResponseHandler(function(f,h){h=b("CSRFGuard").clean(h);h=JSON.parse(h);this.handleQueryResponse(new(b("AsyncResponse"))(null,h),f,a,c,d,e,g);this.activityEnd()}.bind(this,i)).setErrorHandler(function(a){return this.activityEnd()}.bind(this));this.inform("sending_global_request",j);this._maxRemoteQueryId=i;d!=null&&(d.waitingQueries=this._waitingQueries,d.inflightRequests=b("AsyncRequest").getInflightCount(),d.startRemoteQuery=b("FacebarTimerUtils").getTimestamp());j.send();this.activityStart()}else{h.gs_prefetch_mode=e;f&&(h.max_results=f);this.globallyCachedKeywordsUseCDN&&!this._single_state&&(h.log_global_hit=!0,h.log_global_ttl=this.globallyCachedKeywordsTTL,h.log_global_platform="desktop",h.log_dt=this.globallyCachedKeywordsUseDT);j=new(b("AsyncRequest"))().setURI(this.queryEndpoint).setData(h).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(b,f){this.handleQueryResponse(f,b,a,c,d,e,g)}.bind(this,i)).setFinallyHandler(function(){this.activityEnd()}.bind(this));for(var f=this._headerflags,h=Array.isArray(f),k=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(h){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;var m=l[0];l=l[1];j.setRequestHeader(m,l)}this.inform("sending_request",j);this._maxRemoteQueryId=i;d!=null&&(d.waitingQueries=this._waitingQueries,d.inflightRequests=b("AsyncRequest").getInflightCount(),d.startRemoteQuery=b("FacebarTimerUtils").getTimestamp());j.send();this.activityStart()}}.bind(this),this.renderResults=function(a,c,d,e,f,g){f!=null?j[String(a)]=f:f=j[String(a)],b("FacebarGSv2Echo").insertInto(a,c,!d,this._single_state,this._is_local,this._categoryName),b("FacebarGlobalOptions").graphSearchV2&&b("FacebarGlobalOptions").renderKeywordsFirst&&a!=null&&b("FacebarGSv2Echo").normalizeValue(a).length>0&&this._single_state!==!0&&!b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&(!b("CurrentUser").isWorkUser()||!b("gkx")("AT7z9jFl-OuVwbqHVG4yUmKP7RD-BfFMVtbTeMxJgJDwti-hDvt8aHlAV4th5WbeKLi4MS0pOq_K62ykg2lVy_QmWQM_F1QXRACJT7ZVjnw9pw"))&&b("FacebarSimplifiedNoFlickerResults").insertInto(c),!!a&&a instanceof b("FacebarStructuredText")&&!a.isEmptyOrWhitespace()&&!this._bypassBucketizer&&(c=this._bucketizeResults(a,c,f)),c.length=Math.min(c.length,this.getMaxResults()),this.injectExtraResults(a,c),e=d&&c.length===0,this.inform("respond",{value:a,results:c,isAsync:!!d,isEmptyResults:e})}.bind(this),this._fetched_null_state=null,this._initialQueryData=null,this._curQueryId=-1,this._maxRemoteQueryId=-1,this._single_state=!1,this._is_local=!1,this._categoryName=null,this._waitingQueries=0,this.mixGrammarAndEntity=a.mixGrammarAndEntity!==undefined?a.mixGrammarAndEntity:!0,this._isInjectedSuggestionFlow=!1,this.grammarVersion=a.grammarVersion||"",a.grammarOptions||(a.grammarOptions={}),this._headerflags=a.headerflags||new Map(),this.recordingRoute="banzai_vital",this._maxGrammarResults=a.grammarOptions.maxGrammarResults,this.nullStateEndpoint=a.nullStateEndpoint||"/ajax/browse/null_state.php",this.setNullStateData(a.nullStateData||{},!0),this._minQueryLength=a.minQueryLength||-1,this._performShortQuery=a.performShortQuery||!1,this._fixProcessLean=a.grammarOptions.fixProcessLean||!1,this.hasGSPreload=b("FacebarGlobalOptions").hasGSPreload,this.gsPreloadOptions=b("FacebarGlobalOptions").gsPreloadParams,this.useGloballyCachedKeywords=b("FacebarGlobalOptions").useGloballyCachedKeywords,this.globallyCachedKeywordsTTL=b("FacebarGlobalOptions").globallyCachedKeywordsTTL,this.globallyCachedKeywordsUseCDN=b("FacebarGlobalOptions").globallyCachedKeywordsUseCDN,this.globallyCachedKeywordsUseDT=b("FacebarGlobalOptions").globallyCachedKeywordsUseDT,this.throttleExecuteQuery(),this.throttleSendRemoteQuery(),this.throttleRenderResults(),this.resultStoreOptions=a.grammarOptions||{},this.resultStoreOptions.useNewExactNameMatch=a.grammarOptions.useNewExactNameMatch==="true",this.defaultQuery=null,this._bypassBucketizer=!1,this._resultsBucketizer=new(b("ResultsBucketizer"))(b("ResultsBucketizerConfig").rules,function(a,b){switch(b){case"isSeeMore":return a.isSeeMore;case"objectType":return a.type;case"resultSetType":return a.results_set_type;case"renderType":return a.render_type||a.type;case"cacheOnlyResult":return a.cacheOnlyResult;case"closeEntity":return a.bootstrapped||(a.tags?a.tags[b]:undefined);default:return a.tags?a.tags[b]:undefined}}),this.fetchNullState(),this.initWithConfig(b("FacebarGlobalOptions").grammarConfig),b("Arbiter").subscribe("FacebarTypeahead.injectSuggestion",function(a,b){return this.addSearchSuggestionToNullState(b)}.bind(this)),this.subscribe("bootstrapped",function(){b("Arbiter").subscribe("FacebarDataSource.getBootstrapMatches",function(b,a){a.callback.call(null,this.getBootstrapMatches(a.query,a.whitelistedEntIds))}.bind(this))}.bind(this))}a.prototype.addSearchSuggestionToNullState=function(a){if(!a.query)return;var c=b("FacebarKeywordSearchUtils").makeFacebarEntry(a.query);this.resultStore.addSuggestionEntryToNullState(c,a.interaction);this._isInjectedSuggestionFlow=!0;this.inform("reloadNullstate",!0);this._isInjectedSuggestionFlow=!1};a.prototype.initWithConfig=function(a){this.facebarConfig=a,this.createResultStore(),this._fetched_null_state&&(this.setNullState(this._fetched_null_state),this._fetched_null_state=null)};a.prototype.throttleExecuteQuery=function(){var a=b("FacebarGlobalOptions").executeQueryThrottleTime;this.executeQueryThrottled=b("throttle").withBlocking(this.executeQuery,a,this)};a.prototype.throttleSendRemoteQuery=function(){var a=this,c=b("FacebarGlobalOptions").sendRemoteQueryThrottleTime;c===0?this.sendRemoteQueryThrottled=this.sendRemoteQuery:b("FacebarGlobalOptions").lazyThrottleRemoteQuery?(function(){var d=Date.now(),e=b("FacebarGlobalOptions").enableSendRemoteQueryDelay,f=b("FacebarGlobalOptions").sendRemoteQueryDelayTime;a.sendRemoteQueryThrottled=function(){for(var a=arguments.length,g=Array(a),h=0;h<a;h++)g[h]=arguments[h];var i=Date.now();d+c<i&&(d=i,e?b("setTimeoutAcrossTransitions")(function(){this.sendRemoteQuery.apply(this,g)}.bind(this),f):this.sendRemoteQuery.apply(this,g))}.bind(a)})():(b("FacebarGlobalOptions").typingSpeedThrottleTime>0&&(c=b("FacebarGlobalOptions").typingSpeedThrottleTime),this.sendRemoteQueryThrottled=b("throttle").withBlocking(this.sendRemoteQuery,c,this))};a.prototype.throttleRenderResults=function(){var a=b("FacebarGlobalOptions").renderThrottleTime;if(a===0){this.renderResultsThrottled=this.renderResults;return}var c=Date.now();this.renderResultsThrottled=function(b,d,e,f,g,h){var i=Date.now();(e||c+a<i)&&(c=i,this.renderResults(b,d,e,f,g,h))}.bind(this)};a.prototype.createResultStore=function(){this.facebarConfig.maxGrammarResults=this._maxGrammarResults,this.resultStore=new(b("FacebarResultStore"))(this.facebarConfig,b("FacebarTokenizer").tokenize,this.getEntry.bind(this),this.resultStoreOptions),this._fixProcessLean&&this._processLean(),this.subscribe("setSortFunction",function(a,b){this.resultStore.setSortFunction(b)}.bind(this))};a.prototype.dirty=function(){this._nullStateFetched=!1,this.resultStore.resetCaches(),h.dirty.call(this)};a.prototype.refreshNullstate=function(){this._nullStateFetched=!1,this.fetchNullState()};a.prototype.addEntries=function(a){this.resultStore.addBootstrap(this.processEntries(a))};a.prototype._processLean=function(){__p&&__p();if(this._fixProcessLean){if(this._leanPayload&&this.resultStore){var a;void 0;var b=this._leanPayload.entries;for(var c in b){a=this.getEntry(c);if(!a)continue;for(var d in b[c])a.grammar_costs||(a.grammar_costs={}),a.grammar_costs["{"+d+"}"]=b[c][d]}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}}else h._processLean.call(this)};a.prototype.setNullStateData=function(a,b){b&&(this.nullStateData={grammar_version:this.grammarVersion});Object.assign(this.nullStateData,a);return this};a.prototype.setNullState=function(a){b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&(function(){var b={};a.queries=a.queries.filter(function(a){a=a.parse.display.join(" ").toLowerCase();if(!b[a]){b[a]=!0;return!0}return!1})})(),this._null_state=a,this.processEntries(this._null_state.entities),this.resultStore.setNullState(this._null_state.queries),this.resultStore.addNullStateToQueryCache(this.getRawStructure(b("FacebarStructuredText").fromString("")))};a.prototype.getNullStateTrending=function(){return this._null_state.trending};a.prototype.setSingleState=function(a){this._single_state=a};a.prototype.getSingleState=function(){return this._single_state};a.prototype.setLocal=function(a){this._is_local=a};a.prototype.setCategoryName=function(a){this._categoryName=a};a.prototype.overrideNullState=function(a){this._null_state!=null||g(0),this._original_null_state=this._original_null_state||this._null_state,this.setNullState(a)};a.prototype.restoreNullState=function(){this._original_null_state&&this.setNullState(this._original_null_state)};a.prototype.fetchNullState=function(){if(this._nullStateFetched){this.activityStart();setTimeout(this.activityEnd.bind(this),0);return}var a=new(b("AsyncRequest"))().setURI(this.nullStateEndpoint).setData(this.nullStateData).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){this.resultStore?(this.setNullState(a.payload),this.inform("nullstateReady",!0)):this._fetched_null_state=a.payload,this._nullStateFetched=!0}.bind(this)).setFinallyHandler(this.activityEnd.bind(this));this.activityStart();a.send()};a.prototype.toTypeaheadEntryUid=function(a,c){__p&&__p();var d=void 0,e=b("FacebarStructuredText").fromStruct(c.structure),f=e.getFragment(0);if(e.getCount()==1&&f.isType("ent")){var g=f.getType().split(":")[2];d=this.getEntry(f.getUID(),g);d.type=this.resultStore.stripBrackets(c.type)}else d=this.getEntry(c.tuid),d||(d={dynamic_cost:c.dynamic_cost,extra_uri_params:c.extra_uri_params,memcache:c.fromMemcache,photo:c.photo,results_set_type:c.resultsSetType,tuid:c.tuid,type:c.type,uid:c.tuid,tags:c.tags},this.processEntries([d]),d=this.getEntry(c.tuid)),d.icon_class=c.iconClass,d.unseen_posts=c.unseen_posts,b("FacebarGlobalOptions").renderKeywordSnippets&&(d.category=c.category,d.subtext=c.subtext,d.boldedSubtext=c.boldedSubtext);d.error_info=c.errorInfo;d.logInfo=c.logInfo;d.itemLoggingInfo=c.item_logging_info;d.itemLoggingId=c.item_logging_id;d.structure=e;d.text=d.structure.toString();d.queryTypeText=c.queryTypeText;d.semantic=!!c.isSingleState&&c.singleStateSemantic?c.singleStateSemantic:c.semantic;d.alternateSemantic=c.alternateSemantic;d.tree=c.tree;d.cost=c.cost;d.isSeeMore=!!c.isSeeMore;d.isNullState=!!c.isNullState;d.isSingleState=!!c.isSingleState;d.keywordSource=c.keywordSource;d.keyword=c.keyword;f=c.keyword_type;d.keywordType=f;d.isTrending=!!c.isTrending||c.keywordBootstrapType===b("FacebarJSConstants").keywordBootstrapTypes.trending||f===b("FacebarJSConstants").keywordTypes.trending;d.isCelebrity=f===b("FacebarJSConstants").keywordTypes.celebrity;d.isFootball=f===b("FacebarJSConstants").keywordTypes.football;d.isPhotos=f===b("FacebarJSConstants").keywordTypes.photos;d.isVideos=f===b("FacebarJSConstants").keywordTypes.videos;d.isHashtag=f===b("FacebarJSConstants").keywordTypes.hashtag;d.isLocal=f===b("FacebarJSConstants").keywordTypes.local||f===b("FacebarJSConstants").keywordTypes.local_category;d.isCompany=f===b("FacebarJSConstants").keywordTypes.company;d.isMovie=f===b("FacebarJSConstants").keywordTypes.movie;d.isHappeningNow=f===b("FacebarJSConstants").keywordTypes.happeningNow;d.isSpecialIntentGeneric=f===b("FacebarJSConstants").keywordTypes.specialIntentGeneric;d.isLink=f===b("FacebarJSConstants").keywordTypes.link;b("FacebarJSConstants").intentKeys.map(function(a){d.isSpecialIntent=d.isSpecialIntent||d[a]});d.isRecent=!!c.isRecent;d.isPrefetched=!!c.isPrefetched;d.isSuggestion=!!c.isSuggestion;d.isInjectedSuggestion=!!c.isInjectedSuggestion;d.isFromGSEF=!!c.isFromGSEF;d.isGloballyCachedKeyword=!!c.isGloballyCachedKeyword;d.entityInfo=c.entityInfo;d.cacheOnlyResult=c.cacheOnlyResult||!1;if(!b("FacebarGlobalOptions").workplaceHybridTypeahead&&b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&(!b("FacebarGlobalOptions").logSERPClickAsRecentSearch||!c.isNullState)){g=b("FacebarStructuredText").fromStruct(c.structure).toString().toLowerCase();e=b("FacebarKeywordSearchUtils").makeFacebarEntry(g);d.uri=e.uri;d.semantic=e.semantic;d.structure=e.structure}else d.uri=d.uri||b("FacebarURI").getURI(this.facebarConfig,d);d.parse=c.parse;d.tags=c.tags||{};d.isKeywordL2=c.isKeywordL2||!1;d.exactMatchKeyword=c.exactMatchKeyword||!1;d.qid=c.qid;d.templateID=c.templateID;c.isJSBootstrapMatch&&(d.isJSBootstrapMatch=c.isJSBootstrapMatch,d.backendCost=c.backendCost,d.bootstrapCost=c.bootstrapCost,d.keywordBootstrapType=c.keywordBootstrapType);this._replaceCategoryWithTermMatches(a,d,c);return d.tuid};a.prototype._replaceCategoryWithTermMatches=function(a,b,c){__p&&__p();if(b.type!=="user"&&b.type!=="page")return;if(!b.term_to_subtitle||!c.termMatches)return;var d=b.alias,e=d==null?"":this.resultStore._convertToAliasKey(d),f=[];c.termMatches.forEach(function(c){var d=b.term_to_subtitle[c];!a.is_alias_search&&c===e&&c!==a.potential_alias_term&&(d=null);d&&f.push(d)},this);b.category===undefined&&(b.category="");b.original_category!==undefined&&(b.category=b.original_category);if(!f||f.length===0)return;b.original_category===undefined&&(b.original_category=b.category);if(!b.original_category)return;d=b.original_category.length>0?b.original_category.split(" \xb7 "):[];d.unshift.apply(d,f);d=d.filter(function(a,b,c){return b==c.indexOf(a)});b.category=d.splice(0,2).join(" \xb7 ")};a.prototype.getRawStructure=function(a){typeof a==="string"&&(a=b("FacebarStructuredText").fromString(a));if(this.resultStore)return this.resultStore.transformStructured(a.toArray())};a.prototype.saveResult=function(a){this._initialQueryData=this.getUID(a.uid,a.fetchType)};a.prototype.isDefaultKeywordQuery=function(a){return a.type===b("FacebarJSConstants").keywordType&&b("FacebarResultStoreUtils").getTextFromResult(a).toLowerCase()===this.value.getHash().trim().toLowerCase()};a.prototype.buildUids=function(a){__p&&__p();if(!a||!this.resultStore)return[];typeof a==="string"&&(a=b("FacebarStructuredText").fromString(a));var c=this.getRawStructure(a);a=this.resultStore.getResults(c,this.getMaxResults());var d=a.results;if(d===undefined)return[];a=a.null_state===!0;var e=0;d=d.filter(function(a,c){return!b("FacebarGlobalOptions").allowGrammar&&a.type=="grammar"?!1:a.semantic!="<blank>"&&(a.type!="unimplemented"||e++===0)},this);var f=[],g=[],h=[];d.forEach(function(a){a.forcedPosition>0?h.push(a):a.isSeeMore?f.push(a):g.push(a)});a?d=this.orderNullState(d,b("FacebarGlobalOptions").maxNullstateResultCount?b("FacebarGlobalOptions").maxNullstateResultCount:this.getMaxResults()):d=g;h.length>0&&(h.sort(function(a,b){return a.forcedPosition-b.forcedPosition}),h.forEach(function(a){d.splice(a.forcedPosition,0,a)}));f.length>0&&d.push.apply(d,f);return d.map(function(a){return this.toTypeaheadEntryUid(c,a)}.bind(this))};a.prototype.orderNullState=function(a,b){var c={top:[],bottom:[],middle:[]},d=function(a){a=a.null_state_position;return Object.prototype.hasOwnProperty.call(c,a)?a:"middle"},e=function(a,b){return a.original_cost-b.original_cost};a&&a.forEach(function(a){c[d(a)].push(a)},this);for(var f in c)c[f]=c[f].sort(e).slice(0,b),b-=c[f].length;return[].concat(c.top,c.middle,c.bottom)};a.prototype.isEntity=function(a){return!a?!1:/^\d+$/.test(a)};a.prototype.handleResponse=function(a,b){a.payload.errors||(this.processEntries(a.payload.entities),a.payload.results.forEach(function(c){c.qid=a.queryId,c.parse||(c.parse={}),c.parse.entTokens=c.parse.entTokens||[],c.parse.remTokens=c.parse.remTokens||[],c.parse.suffix=c.parse.suffix||"",this.isEntity(c.semantic)&&(c=this._buildCommonEntityFields(c,b.tokens))}.bind(this)),this.saveResults(a,b))};a.prototype.saveResults=function(a,b){a.payload.prefetched&&this.processPrefetched(a.payload.prefetched),this.resultStore.saveResults(a.payload.results,b,a.payload.incomplete,{},[])};a.prototype.processPrefetched=function(a){__p&&__p();var c=this,d=function(d){var e=b("FacebarStructuredText").fromString(d),g=c.getRawStructure(e);f=a[d];c.processEntries(f.entities);f.results.forEach(function(a){this.isEntity(a.semantic)&&(a=this._buildCommonEntityFields(a,g.tokens))}.bind(c));c.resultStore.saveResults(f.results,g,f.incomplete)};for(var e in a){var f;d(e)}};a.prototype.processEntries=function(a){__p&&__p();return a.map(function(a,b){__p&&__p();var c=a.uid+="";a.textToIndex=this.getTitleTerms(a);a.titleToIndex=this.getTitleTerms(a);c=this.getUID(c,a.fetchType);var d=this.getEntry(c);!d?(this.setEntry(c,{}),d=this.getEntry(c)):delete a.photo;Object.assign(d,a);d.tuid=c;d.index===undefined&&(d.index=b);return c},this)};a.prototype.getUID=function(a,b){a+="";if(b!==undefined){b=/([^:]+:)?([^:]+)(:.*)?/.exec(b)[2];return JSON.stringify([a,b])}return a};a.prototype.getEntry=function(a,b){void 0;a=""+a;b=b!=null?h.getEntry.call(this,this.getUID(a,b))||h.getEntry.call(this,a):h.getEntry.call(this,a);return b};a.prototype.getEntryForFragment=function(a){return this.getEntry(a.getUID(),a.getTypePart(2))};a.prototype.getMaxResults=function(){return this._numResults.max};a.prototype.query=function(a,c,d){this.executeQueryThrottled(a,this._initialQueryData,{keyPress:b("FacebarTimerUtils").getTimestamp()}),this._initialQueryData=null};a.prototype.shouldFetchMore=function(a,c){__p&&__p();if(!a.is_empty&&b("FacebarGlobalOptions").fetchMoreKeywords){var d=c.filter(function(a){return a.type===b("FacebarJSConstants").keywordType}).length;if(d<b("FacebarGlobalOptions").default_num_top_results_to_show)return!0}if(a.is_empty)return!1;if(this.resultStore.alreadyKnown(a.cache_id))return!1;if(a.raw_text&&this._isQueryTooShort(a.raw_text))return!1;if(b("FacebarGlobalOptions").alwaysFetchMore)return!0;return c.length<this.getMaxResults()||this._performShortQuery?!0:this.countValidResults(c)<this.getMaxResults()||this._performShortQuery};a.prototype.countValidResults=function(a){var b=0;a.forEach(function(a){a&&!a.isNullState&&!a.isSeeMore&&b++},this);return b};a.prototype.handleQueryResponse=function(a,c,d,e,f,g,h){__p&&__p();var i=g||h;if(i&&a.payload.is_user)return;var j=a.payload;a.queryId=c;a.inputQuery=d.text_form;j.results!=null&&j.results.forEach(function(a){a.isSingleState=this._single_state,a.isFromGSEF=g,a.isGloballyCachedKeyword=h}.bind(this));f!=null&&(f.endRemoteQuery=b("FacebarTimerUtils").getTimestamp());this.inform("response_received",a);this.handleResponse(a,d);c=[];j.abandon_cache&&(c=j.results.map(function(a){return this.toTypeaheadEntryUid(d,a)}.bind(this)));var k=j.num_topresults_to_show;b("FacebarGlobalOptions").hasSimplifiedFlickerFix&&(k==null||k<3)&&(k=3);this.respond(e,c,!0,j&&(!j.results||j.results.length===0),f,k,i);this.inform("backend_response",a)};a.prototype.activityStart=function(){this._waitingQueries||this.inform("activity",{activity:!0},b("Arbiter").BEHAVIOR_STATE),this._waitingQueries++};a.prototype.activityEnd=function(){this._waitingQueries--,this._waitingQueries||this.inform("activity",{activity:!1},b("Arbiter").BEHAVIOR_STATE)};a.prototype._bucketizeResults=function(a,b,c){b=this._tagKeywordsSuggestions(b);return this._resultsBucketizer.bucketize(b,i,null,c)};a.prototype._tagKeywordsSuggestions=function(a){__p&&__p();if(!a||a.length===0)return a;var c=a[0];if(c.bootstrapped)return a;return c.type==="grammar"||c.cost<b("FacebarGlobalOptions").closeEntityThreshold&&c.type==="user"?a:a.map(function(a){if(a.type!==b("FacebarJSConstants").keywordType)return a;a=babelHelpers["extends"]({},a);a.tags.topBucket=!0;return a})};a.prototype._buildCommonEntityFields=function(a,c){if(a.queryTypeText)return a;b("FacebarGlobalOptions").unbreakParseDisplay?a.parse.display=[{type:"ent:"+a.type,uid:a.semantic}]:a.parse.display=[{type:"ent:"+a.type,uid:parseInt(a.semantic,10)}];a.parse.fetchType&&(a.parse.display[0].fetchType=a.parse.fetchType);a.parse.entTokens=c;a.parse.pos=0;a.resultsSetType="{"+a.type+"}";a.queryTypeText=b("FacebarJSConstants").defaultQueryTypeText;return a};a.prototype.setBypassBucketizer=function(a){this._bypassBucketizer=a};a.prototype.respond=function(a,c,d,e,f,g,h){__p&&__p();d&&this.value&&(typeof this.value==="string"&&(this.value=b("FacebarStructuredText").fromString(this.value)),this.inform("remote_query_match",{isMatch:this.value.matches(a),queryId:f!=null?f.queryId:0}),a=this.value,(!c||c.length===0)&&(c=this.buildUids(a)));this.inform("reorderResults",c);this.inform("respondValidUids",c);c=c.map(this.getEntry,this);c.forEach(function(a,b){a.fromCache=!d,a.isSingleState=this._single_state},this);if(!d&&(a.getHash().length<512||a.getHash().startsWith("http://")||a.getHash().startsWith("https://"))){var i=this.getRawStructure(a);this.shouldFetchMore(i,c)&&(f!=null&&(f.dispatchRemoteQuery=b("FacebarTimerUtils").getTimestamp()),this.useGloballyCachedKeywords&&!this._single_state?(this.sendRemoteQueryThrottled(i,a,f,!1,null,!0),this.sendRemoteQueryThrottled(i,a,f)):this.hasGSPreload?(this.sendRemoteQueryThrottled(i,a,f,!0,this.gsPreloadOptions.max_entities_to_fetch),this.sendRemoteQueryThrottled(i,a,f)):this.sendRemoteQueryThrottled(i,a,f))}(!d||f==null||f.queryId===this._maxRemoteQueryId)&&this.renderResultsThrottled(a,c,d,e,g,h);f!=null&&this.logLatencies(d,f)};a.prototype.injectExtraResults=function(a,c,d){b("FacebarFindPeopleAndPages").insertInto(a,c,!d,this._single_state),b("FacebarInviteCoworkers").insertInto(a,c,!d,this._single_state)};a.prototype.logLatencies=function(a,c){var d=b("FacebarTimerUtils").getTimestamp();a?this.inform("remote_query_latency",{queryId:c.queryId,latencies:{queryStart:Math.max(c.startRemoteQuery-c.dispatchRemoteQuery,0),queryEnd:Math.max(c.endRemoteQuery-c.startRemoteQuery,0),keyPressToQueryDispatch:Math.max(c.dispatchRemoteQuery-c.keyPress,0),keyPressToQueryStart:Math.max(c.startRemoteQuery-c.keyPress,0),keyPressToQueryEnd:Math.max(c.endRemoteQuery-c.keyPress,0),render:Math.max(d-c.endRemoteQuery,0),inflightRequests:c.inflightRequests,waitingQueries:c.waitingQueries,keyPressToRender:Math.max(d-c.keyPress,0)}}):this.inform("cache_query_latency",{queryId:c.queryId,latencies:{queryStart:Math.max(c.startCacheQuery-c.keyPress,0),queryEnd:Math.max(c.endCacheQuery-c.startCacheQuery,0),keyPressToQueryEnd:Math.max(c.endCacheQuery-c.keyPress,0),render:Math.max(d-c.endCacheQuery,0),keyPressToRender:Math.max(d-c.keyPress,0)}})};a.prototype._updateMaxResults=function(){b("queryThenMutateDOM")(function(){var a=b("Vector").getViewportDimensions().y,c=b("ViewportBounds").getTop()||42,d=56,e=48;a=a-c-e-25;this._maxResults=Math.max(this._numResults.min,Math.min(this._numResults.max,Math.floor(a/d)-1));this.value&&this.query(this.value)}.bind(this))};a.prototype.getCurQueryId=function(){return this._curQueryId};a.prototype.setMinQueryLength=function(a){this._minQueryLength=a};a.prototype.setGrammarOption=function(a){b("FacebarGlobalOptions").allowGrammar=a};a.prototype.getBootstrapMatches=function(a){var c=arguments.length<=1||arguments[1]===undefined?[]:arguments[1],d=this.getRawStructure(b("FacebarStructuredText").fromString(a)),e=this.resultStore.getBootstrapMatches(d,c);return e.map(function(a){return this.getEntry(this.toTypeaheadEntryUid(d,a))}.bind(this))};Object.assign(a.prototype,{events:["query","respond","bootstrapped","activity","ready"]});e.exports=a}),null);
__d("FacebarTypeahead",["Arbiter","Typeahead","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("Typeahead"));g=c&&c.prototype;function a(a,c,d,e,f,h){g.constructor.call(this,a,c,d,e);this.getCore();this.proxyEvents();this.initBehaviors(f||[]);var i=this.core.subscribe("focus",function(){h&&h.init(this),this.core.unsubscribe(i),this.data.bootstrap(!1),this.core.input.focus()}.bind(this));this.data.bootstrap(!0);this.inform("init",this,b("Arbiter").BEHAVIOR_PERSISTENT);b("Arbiter").inform("Facebar/init",this,b("Arbiter").BEHAVIOR_PERSISTENT)}a.prototype.proxyEvents=function(){var a,b=[],c=null,d=function(){while(a=b.shift())this.inform(a[0],a[1]);c=null}.bind(this);[this.data,this.view,this.core].forEach(function(a){a.subscribe(a.events,function(a,e){b.push([a,e]),c=c||setTimeout(d,0)}.bind(this))},this)};Object.assign(a.prototype,{init:b("emptyFunction")});e.exports=a}),null);
__d("StructuredInputDOM",["cx","CSS","DOM","FacebarGlobalOptions","createArrayFromMixed","getElementText","isElementNode","isTextNode"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){return b("FacebarGlobalOptions").graphSearchV2?"_4v1s":"_586o"};var h={ENTITY_CLASS:a(),encodeText:function(a){return a.replace(/ /g,"\xa0")},decodeText:function(a){return a.replace(/\u00a0/g," ")},createIconNode:function(a){if(a&&typeof a==="object"){a=b("DOM").create("i",{className:a.className,style:a.uri&&{backgroundImage:'url("'+a.uri+'")'}});a.setAttribute("data-select","ignore");return a}},createTextNode:function(a){return b("DOM").create("span",{"data-si":!0},h.encodeText(a||""))},createEntityNode:function(a,c){var d=h.encodeText(a.text),e=h.createIconNode(c.icon);e=b("DOM").create("span",{},e?[e,d]:d);var f=(c.className||"").split(/\s+/);f.push(h.ENTITY_CLASS);f.forEach(b("CSS").addClass.bind(b("CSS"),e));f={si:!0,uid:a.uid,type:a.type,text:d,"is-local":a.isLocal,"category-name":a.categoryName,fulltext:d,group:c.group,select:c.select,icon:JSON.stringify(c.icon||null)};for(var g in f)f[g]!=null&&e.setAttribute("data-"+g,f[g]);return e},convertToTextNode:function(a){__p&&__p();a.className="";a.setAttribute("data-type","text");a.removeAttribute("data-group");a.removeAttribute("data-select");a.removeAttribute("data-icon");a.removeAttribute("data-uid");a.removeAttribute("data-is-local");a.removeAttribute("data-category-name");for(var a=a.firstChild;a;a=a.nextSibling)b("isTextNode")(a)||b("DOM").remove(a)},isEntityNode:function(a){return b("isElementNode")(a)&&b("CSS").hasClass(a,h.ENTITY_CLASS)},containsOnlyText:function(a,c){c=b("createArrayFromMixed")(c);for(var d=a.firstChild;d;d=d.nextSibling)if(!(b("isTextNode")(d)||a.nodeName in c))return!1;return!0},getText:function(a){return b("getElementText")(a).replace(/ /g,"\xa0")},getDecodedText:function(a){return h.decodeText(b("getElementText")(a))},getLength:function(a){return b("getElementText")(a).length},getMarker:function(a,c,d){__p&&__p();a=a.firstChild;while(a){var e=h.getLength(a);if(e>c||!a.nextSibling)if(b("isTextNode")(a)||!d)return{node:a,offset:Math.min(c,e)};else return h.getMarker(a,c);else c-=e;a=a.nextSibling}}};e.exports=h}),null);
__d("StructuredInputUtil",["StructuredInputDOM"],(function(a,b,c,d,e,f){__p&&__p();function g(a,b,c){a=a.substr(0,b).lastIndexOf(c);return a!==-1?a+1:0}function h(a,b,c){c=a.indexOf(c,b);return c!==-1?c:a.length}function i(a,b,c){return b===0||b===a.length||a.substr(b,c.length)==c}function j(a,b,c,d){switch(b){case"none":return c;case"all":return d?a.length:0;case"word":if(i(a,c,"\xa0"))return c;else if(d)return h(a,c,"\xa0");else return g(a,c,"\xa0")}}function k(a,c){return c&&b("StructuredInputDOM").isEntityNode(a)&&!b("StructuredInputDOM").isEntityNode(c)}var l={getMarkerAtOffset:function(a,c){var d=a.firstChild,e=0,f=0;while(d){e+=f;f=b("StructuredInputDOM").getLength(d);if(e+f>c)break;else d=d.nextSibling}return{node:d||a.lastChild,offset:c-e}},validateEntityText:function(a){__p&&__p();var c=b("StructuredInputDOM").getText(a),d=a.getAttribute("data-fulltext");a=a.getAttribute("data-group");if(a=="hashtag"){var e=c.match(/#[^\s]+/);d=e&&e[0]}e=c.indexOf(d);var f={prefix:null,entity:null,suffix:null};switch(a){case"none":f.entity=c;break;case"hashtag":case"all":e!=-1?(f.prefix=c.substr(0,e),f.entity=c.substr(e,d.length),f.suffix=c.substr(e+d.length)):f.suffix=c;break;case"word":e!=-1&&(f.prefix=c.substr(0,e),c=c.substr(e));a=0;e=0;while(a<d.length){e=h(d,a+1,"\xa0");if(c.substr(0,e)!=d.substr(0,e))break;else a=e}f.entity=c.substr(0,a)||null;f.suffix=c.substr(a)||null}return f},getGrouping:function(a,b){var c=a.getAttribute("data-group");a=a.getAttribute("data-select");if(b=="select")return a=="group"?c:"none";else return c},snapMarkerToText:function(a,c){__p&&__p();var d=a.node;if(b("StructuredInputDOM").isEntityNode(d)){var e=a.offset;c=l.getGrouping(d,c);if(c!="none")if(e===0){c=d.previousSibling;if(k(d,c))return{node:c,offset:b("StructuredInputDOM").getLength(c)}}else if(e==b("StructuredInputDOM").getLength(d)){c=d.nextSibling;if(k(d,c))return{node:c,offset:0}}}return a},nextMarkerBoundary:function(a,c,d){var e=a.node;if(b("StructuredInputDOM").isEntityNode(e)&&(!c||a.offset!==0)){d=l.getGrouping(e,d);if(d!="none")return{node:a.node,offset:j(b("StructuredInputDOM").getText(e),d,a.offset,c)}}return a}};e.exports=l}),null);
__d("StructuredInputCleaner",["DOM","StructuredInputDOM","StructuredInputUtil","UserAgent_DEPRECATED","createArrayFromMixed","getElementText","isTextNode"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c){"use strict";this._node=a,this._selection=b,this._wrapText=c}a.prototype._cleanEntityNode=function(a){"use strict";__p&&__p();var c=a.getAttribute("data-text"),d=b("StructuredInputDOM").getText(a);a.style.cssText="";if(c==d&&b("StructuredInputDOM").containsOnlyText(a,{I:!0}))return null;c=[];var e=b("StructuredInputUtil").validateEntityText(a),f=b("StructuredInputDOM").createIconNode(JSON.parse(a.getAttribute("data-icon")));if(!e.entity&&(e.suffix&&!e.prefix||e.prefix&&!e.suffix)){b("StructuredInputDOM").convertToTextNode(a);a.setAttribute("data-text",d);return null}e.prefix&&c.push(this._createTextNode(e.prefix));e.entity&&(this._selection&&b("getElementText")(a)!==e.entity&&this._selection.markDirty(a),b("DOM").setContent(a,f?[f,e.entity]:e.entity),a.setAttribute("data-text",e.entity),c.push(a));e.suffix&&c.push(this._createTextNode(e.suffix));return c};a.prototype._removeSpecialNodes=function(){"use strict";var a=b("createArrayFromMixed")(this._node.getElementsByTagName("script")),c=b("createArrayFromMixed")(this._node.getElementsByTagName("style"));a.forEach(b("DOM").remove);c.forEach(b("DOM").remove)};a.prototype._collapseNodes=function(){"use strict";for(var a,c=this._node.firstChild;c;c=a){a=c.nextSibling;if(!b("isTextNode")(c)&&!b("StructuredInputDOM").isEntityNode(c)&&!b("StructuredInputDOM").containsOnlyText(c))for(var d=c.lastChild;d;d=c.lastChild)this._node.insertBefore(d,a),a=d}};a.prototype._createTextNode=function(a){"use strict";if(this._wrapText)return b("StructuredInputDOM").createTextNode(a);else return document.createTextNode(a)};a.prototype.replaceNodes=function(a,c){"use strict";if(c==null)return;var d=a.length?a[a.length-1].nextSibling:null;a.forEach(function(a){c.indexOf(a)===-1&&b("DOM").remove(a)},this);c.reverse().forEach(function(b){a.indexOf(b)===-1&&this._node.insertBefore(b,d),d=b},this)};a.prototype.clean=function(){"use strict";this._removeSpecialNodes();this._collapseNodes();var a=[],c=function(){a.length&&(this.replaceNodes(a,this._cleanTextNodes(a)),a.length=0)}.bind(this);Array.from(this._node.childNodes).forEach(function(d){b("StructuredInputDOM").isEntityNode(d)?(this.replaceNodes([d],this._cleanEntityNode(d)),c(a)):a.push(d)}.bind(this));c();!this._node.firstChild&&b("UserAgent_DEPRECATED").firefox()&&this._node.appendChild(this._createTextNode())};a.prototype.endOnText=function(){"use strict";var a=function(a,c){b("StructuredInputDOM").isEntityNode(a)&&this._node.insertBefore(this._createTextNode(),c?a:null)}.bind(this);a(this._node.firstChild,!0);a(this._node.lastChild,!1)};Object.assign(a.prototype,{_cleanTextNodes:function(){__p&&__p();var a=function(a){return a.nodeName==="BR"||a.nodeName==="SPAN"&&c(a)},c=function(a){return a.getAttribute("data-si")&&b("StructuredInputDOM").containsOnlyText(a)&&b("StructuredInputDOM").getLength(a)>0};return function(c){if(c.length!=1||!a(c[0])){var d=c.map(b("StructuredInputDOM").getText).join("").replace(/\s+/g," ");return d?[this._createTextNode(d)]:[]}else{c[0].style.cssText="";return}}}()});e.exports=a}),null);
__d("DOMSelection",[],(function(a,b,c,d,e,f){__p&&__p();(function(){__p&&__p();var a=this,b={isPreceding:function(a,b){return b.compareDocumentPosition(a)&2},contains:function(a,b){if(a.compareDocumentPosition!=null)return a.compareDocumentPosition(b)&16;else return a.contains(b)},isCursorPreceding:function(a,c,d,e){__p&&__p();if(a===d)return c<=e;if(b.isText(a)&&b.isText(d))return b.isPreceding(a,d);if(b.isText(a)&&!b.isText(d))return!b.isCursorPreceding(d,e,a,c);if(!b.contains(a,d))return b.isPreceding(a,d);if(a.childNodes.length<=c)return!1;return a.childNodes[c]===d?0<=e:b.isPreceding(a.childNodes[c],d)},isText:function(a){return a!=null?a.nodeType==3:!1},getChildIndex:function(a){var b=0;while(a=a.previousSibling)b++;return b}},c=a.Selection=function(){__p&&__p();function a(a){this.win=a}a.prototype.hasSelection=function(){return a.hasSelection(this.win)};a.prototype.isBidirectional=function(){return a.isBidirectional(this.win)};a.prototype.getOrigin=function(){return a.getOrigin(this.win)};a.prototype.getFocus=function(){return a.getFocus(this.win)};a.prototype.getStart=function(){return a.getStart(this.win)};a.prototype.getEnd=function(){return a.getEnd(this.win)};a.prototype.trySelection=function(b,c,d,e){return a.trySelection(this.win,b,c,d,e)};a.prototype.setSelection=function(b,c,d,e){return a.setSelection(this.win,b,c,d,e)};a.prototype.clearSelection=function(){return a.clearSelection(this.win)};return a}();function d(){if(a.document.selection&&/MSIE 9\./.test(navigator.userAgent))return!1;else return!!a.getSelection}if(d()){c.supported=!0;c.hasSelection=function(a){return(a=a.getSelection())&&a.focusNode!=null&&a.anchorNode!=null};c.isBidirectional=function(a){return!0};c.getOrigin=function(a){return!((a=a.getSelection())&&a.anchorNode!=null)?null:[a.anchorNode,a.anchorOffset]};c.getFocus=function(a){return!((a=a.getSelection())&&a.focusNode!=null)?null:[a.focusNode,a.focusOffset]};c.getStart=function(a){var d,e,f;if(!c.hasSelection(a))return null;f=c.getOrigin(a),d=f[0],f=f[1];a=c.getFocus(a),e=a[0],a=a[1];return b.isCursorPreceding(d,f,e,a)?[d,f]:[e,a]};c.getEnd=function(a){var d,e,f;if(!c.hasSelection(a))return null;f=c.getOrigin(a),d=f[0],f=f[1];a=c.getFocus(a),e=a[0],a=a[1];return b.isCursorPreceding(d,f,e,a)?[e,a]:[d,f]};d=function(a,b,d,e,f,g){__p&&__p();var h=b.getSelection();if(!h)return;f==null&&(f=d);g==null&&(g=e);if(h.collapse&&h.extend)h.collapse(d,e),h.extend(f,g);else{r=b.document.createRange();r.setStart(d,e);r.setEnd(f,g);if(a||!c.hasSelection(b)||r.endContainer===f&&r.endOffset===g&&r.startContainer===d&&r.startOffset===e){try{h.removeAllRanges()}catch(a){}h.addRange(r)}}};c.setSelection=d.bind(c,!0);c.trySelection=d.bind(c,!1);c.clearSelection=function(a){try{a=a.getSelection();if(!a)return;a.removeAllRanges()}catch(a){}};c.getText=function(a){a=a.getSelection();if(!a)return;return a.toString()}}else if(a.document.selection){var e=function(a,c,d){__p&&__p();var e,f;a=a.createElement("a");e=c.duplicate();e.collapse(d);f=e.parentElement();while(!0){f.insertBefore(a,a.previousSibling);e.moveToElementText(a);if(!(e.compareEndPoints(d?"StartToStart":"StartToEnd",c)>0&&a.previousSibling!=null))break}e.compareEndPoints(d?"StartToStart":"StartToEnd",c)===-1&&a.nextSibling?(e.setEndPoint(d?"EndToStart":"EndToEnd",c),f=a.nextSibling,d=e.text.length):(f=a.parentNode,d=b.getChildIndex(a));a.parentNode.removeChild(a);return[f,d]},f=function(a,c,d,e,f){__p&&__p();var g,h,i;i=0;g=b.isText(e)?e:e.childNodes[f];h=b.isText(e)?e.parentNode:e;b.isText(e)&&(i=f);e=a.createElement("a");h.insertBefore(e,g||null);f=a.body.createTextRange();f.moveToElementText(e);e.parentNode.removeChild(e);c.setEndPoint(d?"StartToStart":"EndToEnd",f);return c[d?"moveStart":"moveEnd"]("character",i)};c.supported=!0;c.hasSelection=function(a){var b;if(!a.document.selection)return!1;b=a.document.selection.createRange();return b&&b.parentElement().document===a.document};c.getStart=function(a){var b;if(!c.hasSelection(a))return null;b=a.document.selection.createRange();return e(a.document,b,!0)};c.getEnd=function(a){var b;if(!c.hasSelection(a))return null;b=a.document.selection.createRange();return e(a.document,b,!1)};c.isBidirectional=function(a){return!1};c.getOrigin=function(a){return c.getStart(a)};c.getFocus=function(a){return c.getEnd(a)};d=function(a,b,c,d,e,g){e==null&&(e=c);g==null&&(g=d);a=b.document.body.createTextRange();f(b.document,a,!1,e,g);f(b.document,a,!0,c,d);return a.select()};c.setSelection=d.bind(c,!0);c.trySelection=d.bind(c,!1);c.clearSelection=function(a){return a.document.selection.empty()};c.getText=function(a){if(!c.hasSelection(a))return null;a=a.document.selection.createRange();return a&&a.text}}else c.supported=!1}).call(this),e.exports=Selection}),null);
__d("StructuredInputSelection",["DOM","DOMSelection","Scroll","StructuredInputDOM","StructuredInputUtil","Vector"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";var b=a.ownerDocument;this.window=b.defaultView||b.parentWindow;this.root=a;this.selection=!1;this.start=new g(this,[]);this.end=new g(this,[]);this.update()}a.prototype.isSupported=function(){"use strict";return!!(b("DOMSelection")&&b("DOMSelection").hasSelection)};a.prototype.update=function(){"use strict";this.selection=!1;if(this.isSupported()&&this.root==document.activeElement&&b("DOMSelection").hasSelection(this.window)){var a=b("DOMSelection").getStart(this.window),c=b("DOMSelection").getEnd(this.window),d=b("DOMSelection").getFocus(this.window);this.start=this.makeMarker(a);this.end=this.makeMarker(c);this.backward=a[0]==d[0]&&a[1]==d[1];this.selection=this.start.node&&this.end.node}};a.prototype.makeMarker=function(a){"use strict";if(a[0]===this.root)return new g(this,[this.root.childNodes[a[1]],0]);else return new g(this,a)};a.prototype.getFocus=function(){"use strict";return this.backward?this.start:this.end};a.prototype.getOrigin=function(){"use strict";return this.backward?this.end:this.start};a.prototype.move=function(a){"use strict";if(this.selection){this.start.move(a);this.start.snap();this.end.setPosition(this.start);return this.apply()}};a.prototype.expand=function(a){"use strict";if(this.selection){b("DOMSelection").isBidirectional()&&(this.start.move(!a),this.start.snap(),this.end.move(a),this.end.snap());return this.apply()}};a.prototype.getText=function(){"use strict";if(this.selection&&this.isSupported()){var a=b("DOMSelection").getText(this.window);return a}};a.prototype.getOffset=function(){"use strict";if(this.selection)return this.start.rootOffset};a.prototype.getLength=function(){"use strict";return(this.getText()||"").length};a.prototype.setPosition=function(a,c){"use strict";this.backward=!1;this.selection=!0;this.start.setPosition(b("StructuredInputUtil").getMarkerAtOffset(this.root,a));this.start.snap();c>0?(this.end.setPosition(b("StructuredInputUtil").getMarkerAtOffset(this.root,a+c)),this.end.snap()):this.end.setPosition(this.start);return this.apply()};a.prototype.hasRange=function(){"use strict";return this.selection&&(this.start.node!=this.end.node||this.start.offset!=this.end.offset)};a.prototype.scrollToFocus=function(){"use strict";var a=5,c=this.getFocus();if(c.node){var d=b("Vector").getElementDimensions(this.root).x,e=b("Scroll").getLeft(this.root);c=c.node.offsetLeft+c.node.offsetWidth;c-e<a?b("Scroll").setLeft(this.root,c-a):c-e>d-a&&b("Scroll").setLeft(this.root,c-d+a)}};a.prototype.apply=function(){"use strict";__p&&__p();if(this.start.hasChanged()||this.end.hasChanged()){var a=this.getOrigin().getMarker(!0),c=this.getFocus().getMarker(!0);this.selection=this.selection&&a&&a.node&&c&&c.node;if(this.selection&&this.isSupported()){this.start.changed=!1;this.end.changed=!1;b("DOMSelection").trySelection(this.window,a.node,a.offset,c.node,c.offset);return!0}}};a.prototype.markDirty=function(a){"use strict";b("DOM").contains(a,this.start.node,a)&&(this.start.changed=!0),b("DOM").contains(a,this.end.node,a)&&(this.end.changed=!0)};function g(a,b){"use strict";this.selection=a,this.node=b[0],this.offset=b[1],this.rootOffset=this.getRootOffset(b[0],b[1]),this.sibling=this.node&&this.node.previousSibling,this.changed=!1}g.prototype.hasChanged=function(){"use strict";return this.changed||!this.isNodeValid()};g.prototype.isNodeValid=function(){"use strict";if(b("StructuredInputDOM").getLength(this.node)>this.offset){var a=this.node;while(a=a.parentNode)if(a==this.selection.root)return!0}};g.prototype.getMarker=function(a){"use strict";if(this.isNodeValid()&&(a&&!this.node.firstChild||!a&&this.node.parentNode==this.selection.root))return this;else return b("StructuredInputDOM").getMarker(this.selection.root,this.rootOffset,a)};g.prototype.move=function(a){"use strict";this.node&&this.setPosition(b("StructuredInputUtil").nextMarkerBoundary(this.getMarker(!1),a,"select"))};g.prototype.snap=function(){"use strict";this.node&&this.setPosition(b("StructuredInputUtil").snapMarkerToText(this.getMarker(!1),"select"))};g.prototype.setPosition=function(a){"use strict";(a.offset!=this.offset||a.node!=this.node)&&(this.changed=!0,this.node=a.node,this.offset=a.offset,this.rootOffset=this.getRootOffset(this.node,this.offset))};g.prototype.getRootOffset=function(a,c){"use strict";__p&&__p();var d=0,e=5;while(a&&d++<e)if(a===this.selection.root)return c;else{var f=a;while(f=f.previousSibling)c+=b("StructuredInputDOM").getLength(f);a=a.parentNode}};e.exports=a}),null);
__d("StructuredInput",["csx","cx","fbt","Arbiter","ArbiterMixin","CSS","DataStore","DOM","Event","Input","InputSelection","JSLogger","Keys","Locale","Parent","Scroll","StructuredInputCleaner","StructuredInputDOM","StructuredInputSelection","StructuredInputUtil","Style","UserAgent_DEPRECATED","createArrayFromMixed","createObjectFrom","emptyFunction","getActiveElement","isElementNode","isTextNode","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=229,l=b("createObjectFrom")([b("Keys").UP,b("Keys").DOWN,b("Keys").LEFT,b("Keys").RIGHT,b("Keys").HOME,b("Keys").END]),m=b("createObjectFrom")([b("Keys").BACKSPACE,b("Keys").DELETE]),n=b("createObjectFrom")([b("Keys").SPACE,b("Keys").RETURN]),o=b("createObjectFrom")("IUB".split("").map(function(a){return a.charCodeAt(0)})),p=b("UserAgent_DEPRECATED").firefox(),q=b("UserAgent_DEPRECATED").ie(),r=b("UserAgent_DEPRECATED").webkit();a=babelHelpers.inherits(s,b("mixin")(b("ArbiterMixin")));j=a&&a.prototype;function s(a){"use strict";j.constructor.call(this),b("DataStore").set(a,"StructuredInput",this),this._root=a,this._richInput=b("DOM").find(a,"._586i"),this._textInput=b("DOM").find(a,"._586f"),this._placeholderText=b("DOM").scry(a,"._586j")[0],this._hintText=b("DOM").find(a,"._586k"),this._contentWidth=null,this._richWidth=null,this._hintNodes=[],b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.structuredInputState={initInputsFinished:!!this._initInputsFinished,initEventsFinished:!!this._initEventsFinished,cleanInputPreTogglesFinished:!!this._cleanInputPreTogglesFinished,cleanInputFinished:!!this._cleanInputFinished,elements:{richInput:!!this._richInput,textInput:!!this._textInput,placeholderText:!!this._placeholderText,hintText:!!this._hintText}}}.bind(this)),this.init()}s.prototype.init=function(){"use strict";this.init=b("emptyFunction"),this._initSelection(),this._initCleaner(),this._initInputs(),this._initInputsFinished=!0,this._initEvents(),this._initEventsFinished=!0,this._scheduledCleanInput=!1,this._richChanged=!1,this._textChanged=!1,this._selectionChanged=!1,this._selectionIgnore=!1,this._imeMode=!1,this.cleanInput(),this.inform("init",null,b("Arbiter").BEHAVIOR_PERSISTENT)};s.prototype._initInputs=function(){"use strict";__p&&__p();this._richInput.contentEditable=!0;this._richInput.spellcheck=!1;this._richInput.tabIndex=0;this._richInput.setAttribute("aria-label",i._("Search Facebook"));this._textInput.tabIndex=-1;this._multiline=this._textInput.nodeName=="TEXTAREA";if(!b("CSS").shown(this._richInput)){var a=b("InputSelection").get(this._textInput),c=b("getActiveElement")()===this._textInput;b("DOM").setContent(this._richInput,b("StructuredInputDOM").encodeText(b("Input").getValue(this._textInput)));b("CSS").hide(this._textInput);b("CSS").show(this._richInput);this.cleanInput();c&&(this._richInput.focus(),this.setSelection({offset:a.start,length:a.end-a.start}))}this.togglePlaceholder();this._toggleHint()};s.prototype._initEvents=function(){"use strict";__p&&__p();var a=null,c=!1,d=function(){this._richChanged=!0,c||this.scheduleCleanInput(!0)}.bind(this),e=function(){this._textChanged=!0,c||this.scheduleCleanInput(!1)}.bind(this),f=function(){this._selectionChanged=!0,this.scheduleCleanInput(!1)}.bind(this),g=function(){this._imeMode=!0,this._placeholderText&&b("CSS").hide(this._placeholderText),b("CSS").hide(this._hintText)}.bind(this),h=function(){this._imeMode=!1,this._richChanged=!0,this.cleanInput()}.bind(this);b("Event").listen(this._richInput,"keydown",function(c){__p&&__p();a=c.keyCode;if(c.ctrlKey&&c.keyCode in o)return c.kill();else if(c.keyCode in l)f();else if(c.keyCode===b("Keys").BACKSPACE&&this._deleteTrailingChunk()){this._richChanged=!0;this.cleanInput();return c.kill()}else c.keyCode in m?d():c.keyCode==k&&g()}.bind(this));b("Event").listen(this._richInput,"keypress",function(a){if(a.keyCode==b("Keys").RETURN){this._multiline&&this._insertText("\n");return a.kill()}else!this._selectionChanged&&this._selectionIsText()?e():d()}.bind(this));!c?(b("Event").listen(this._richInput,"keyup",function(b){if((this._imeMode||b.keyCode!=a)&&b.keyCode in n){h();return b.kill()}else this._imeMode&&(this._textChanged=!0,this.cleanInput())}.bind(this)),p&&b("Event").listen(this._richInput,"input",function(){this._textChanged=!0,this.cleanInput()}.bind(this))):(b("Event").listen(this._richInput,"compositionstart",g),b("Event").listen(this._richInput,"compositionend",function(){setTimeout(h,0)}),b("Event").listen(this._richInput,"input",function(){this._textChanged=!0,this._imeMode||(!this._richChanged?this.cleanInput():this.scheduleCleanInput())}.bind(this)));b("Event").listen(document,"selectionchange",function(){this._selectionIgnore?this._selectionIgnore=!1:this._selectionChanged=!0}.bind(this));b("Event").listen(this._richInput,"mousedown",function(){this._selectionChanged=!0,this._selectionLength=0,this._selectionOffset=0}.bind(this));b("Event").listen(this._richInput,"mouseup",function(){this._selectionChanged=!0,this.scheduleCleanInput()}.bind(this));b("Event").listen(this._richInput,"cut",function(){this._richChanged=!0,this.scheduleCleanInput(!1)}.bind(this));b("Event").listen(this._richInput,"paste",function(a){this._richChanged=!0,this.scheduleCleanInput(!0)}.bind(this));b("Event").listen(this._richInput,"drop",function(a){this.focus();this.selectAll();this._insertClipboard(a&&a.dataTransfer);return a.kill()}.bind(this));b("Event").listen(this._richInput,"dragover",function(a){a.dataTransfer.dropEffect="move";a.dataTransfer.effectAllowed="move";return a.kill()});b("Event").listen(this._richInput,"focus",function(a){this._toggleHint(),this.inform("focus")}.bind(this));b("Event").listen(this._richInput,"blur",function(a){b("CSS").hide(this._hintText),this._imeMode=!1,this._richChanged=!0,this.scheduleCleanInput(!1),this.inform("blur")}.bind(this))};s.prototype._initCleaner=function(){"use strict";this._cleaner=new(b("StructuredInputCleaner"))(this._richInput,this._selection,!0)};s.prototype._initSelection=function(){"use strict";this._selection=new(b("StructuredInputSelection"))(this._richInput),this._selectionLength=0,this._selectionOffset=0};s.prototype._insertClipboard=function(a){"use strict";if(a&&typeof a.getData==="function"){a=a.getData("Text");this._insertText(a)}};s.prototype._deleteTrailingChunk=function(a){"use strict";__p&&__p();a=this.getSelection();if(a.length>0||a.offset===0)return!1;a=this.getSelection().offset-1;a=b("StructuredInputUtil").getMarkerAtOffset(this._richInput,a);if(a&&b("StructuredInputDOM").isEntityNode(a.node)&&b("StructuredInputUtil").getGrouping(a.node,"select")!=="none"){b("DOM").remove(a.node);return!0}return!1};s.prototype._selectionIsText=function(){"use strict";var a=this._selection.start.node,c=this._selection.end.node;return a&&a===c&&!b("StructuredInputDOM").isEntityNode(a)&&!b("StructuredInputDOM").isEntityNode(a.parentNode)};s.prototype._insertText=function(a){"use strict";if(a){a=b("DOM").create("div",{},a);return this._insertNodes(a)}};s.prototype._insertHTML=function(a){"use strict";if(a){var c=b("DOM").create("div"),d=new(b("StructuredInputCleaner"))(c,null,!1);c.innerHTML=a;d.clean();return this._insertNodes(c)}};s.prototype._insertNodes=function(a){"use strict";document.selection?document.selection.createRange().pasteHTML(a.innerHTML):document.execCommand("insertHTML",!1,a.innerHTML),this._richChanged=!0,this.cleanInput()};s.prototype.togglePlaceholder=function(a){"use strict";if(!this._placeholderText)return;var c=b("StructuredInputDOM").getLength(this._richInput)===0;a&&c?b("CSS").show(this._placeholderText):b("CSS").conditionShow(this._placeholderText,c&&!this._imeMode)};s.prototype._toggleHint=function(){"use strict";__p&&__p();var a=b("createArrayFromMixed")(this._hintNodes),c=null,d="",e=b("StructuredInputDOM").getText(this._richInput).toLowerCase();if(!this.hasFocus())return;if(this._contentOverflows()){b("CSS").hide(this._hintText);return}while(a.length&&d.length<e.length)c=a.shift(),d+=b("StructuredInputDOM").getText(c);if(e.length&&d.substr(0,e.length).toLowerCase()==e.toLowerCase()){b("DOM").setContent(this._hintText,Array.from(this._richInput.cloneNode(!0).childNodes).filter(function(a){return a.tagName!=="BR"}));c=b("StructuredInputDOM").createTextNode(d.substr(e.length));a.unshift(c);b("DOM").appendContent(this._hintText,b("DOM").create("span",{className:"_586h"},a));b("CSS").show(this._hintText);b("CSS").hide(this._placeholderText)}else b("CSS").hide(this._hintText)};s.prototype._contentOverflows=function(){"use strict";this._richWidth===null&&(this._richWidth=this._richInput.clientWidth);if(this._contentWidth===null){var a=this._richInput.lastChild;this._contentWidth=b("isElementNode")(a)?a.offsetLeft+a.offsetWidth:0}return this._contentWidth>this._richWidth};s.prototype._forceTop=function(){"use strict";this._multiline||b("Scroll").setTop(this._richInput,0),b("Scroll").setTop(this._root,0)};s.prototype._createStructureNodes=function(a){"use strict";return a.map(function(a){return a.uid||a.type&&a.type!="text"?b("StructuredInputDOM").createEntityNode(a,a.display||{}):b("StructuredInputDOM").createTextNode(a.text)}.bind(this))};s.prototype._suppressInput=function(){"use strict";__p&&__p();if(p||q){if(this._richClean)return;this._richClean=this._richInput.cloneNode(!0);this._richClean.contentEditable=!1;this._root.insertBefore(this._richClean,this._richInput.nextSibling);b("Scroll").setLeft(this._richClean,b("Scroll").getLeft(this._richInput));b("Style").set(this._richInput,"padding",0);b("Style").set(this._richInput,"height",0)}};s.prototype._revealInput=function(){"use strict";if(!this._richClean)return;b("Style").set(this._richInput,"height","");b("Style").set(this._richInput,"padding","");this._root.removeChild(this._richClean);this.focus();this._richClean=null};s.prototype._cleanInput=function(){"use strict";__p&&__p();var a;this._textChanged&&!this._richChanged?(this._selection.update(),a="change"):(this._richChanged||this._selectionChanged)&&(this._selection.update(),this._richChanged&&(this._contentWidth=null,this._cleaner.clean(),this._cleaner.endOnText(),this._selection.apply(),a="change"),this._selectionChanged&&(this._cleanSelection(),(this._selectionLength||!this._richChanged)&&(a="select")));this._revealInput();this._forceTop();this._cleanInputPreTogglesFinished=!0;(this._richChanged||this._textChanged)&&(this.togglePlaceholder(),this._toggleHint());this._selectionIgnore=!0;this._selectionChanged=!1;this._richChanged=!1;this._textChanged=!1;this._cleanInputFinished=!0;a&&this.inform(a)};s.prototype._cleanSelection=function(){"use strict";var a=this._selection.getLength(),b=this._selection.getOffset();a&&(this._selection.expand(a>=this._selectionLength),a=this._selection.getLength(),b=this._selection.getOffset());this._selectionLength=a;this._selectionOffset=b};s.prototype.cleanInput=function(){"use strict";this._scheduledCleanInput||this._cleanInput()};s.prototype.scheduleCleanInput=function(a){"use strict";a&&this._suppressInput(),this._scheduledCleanInput||(this._scheduledCleanInput=!0,b("setTimeoutAcrossTransitions")(function(){this._cleanInput(),this._scheduledCleanInput=!1}.bind(this),0))};s.prototype.setEnabled=function(a){"use strict";this._textInput.disabled=!a,this._richInput.contentEditable=a};s.prototype.getRoot=function(){"use strict";return this._root};s.prototype.getRichInput=function(){"use strict";return this._richInput};s.prototype.getEnabled=function(){"use strict";return!this._textInput.disabled};s.prototype.getText=function(){"use strict";return b("StructuredInputDOM").getDecodedText(this._richInput)};s.prototype.setText=function(a){"use strict";b("DOM").setContent(this._richInput,b("StructuredInputDOM").createTextNode(a)),this._richChanged=!1,this._selectionChanged=!1,this.inform("change")};s.prototype.setHint=function(a){"use strict";this._hintNodes=this._createStructureNodes(a),this._toggleHint()};s.prototype.getStructure=function(){"use strict";var a=[];Array.from(this._richInput.childNodes).forEach(function(c){var d=!b("isTextNode")(c),e=b("StructuredInputDOM").getDecodedText(c);e.length&&a.push({text:e,uid:d?c.getAttribute("data-uid"):null,type:d&&c.getAttribute("data-type")||"text",isLocal:d&&c.getAttribute("data-is-local"),categoryName:d?c.getAttribute("data-category-name"):null})});return a};s.prototype.setStructure=function(a){"use strict";b("DOM").setContent(this._richInput,this._createStructureNodes(a)),this._cleaner.clean(),this._cleaner.endOnText(),this.togglePlaceholder(),this._toggleHint(),this._richChanged=!1,this._selectionChanged=!1,this.inform("change")};s.prototype.getContentDimensions=function(){"use strict";var a=this._richInput.lastChild;return{width:a?a.offsetLeft+a.offsetWidth:0,height:a?a.offsetTop+a.offsetHeight:0}};s.prototype.getSelection=function(){"use strict";if(this._selection)return{offset:this._selection.getOffset(),length:this._selection.getLength()}};s.prototype.setSelection=function(a){"use strict";this.hasFocus()&&this._selection&&(this._selection.update(),this._selection.setPosition(a.offset,a.length),this._selection.scrollToFocus(),this._selectionChanged=!1,this.inform("select"))};s.prototype.moveSelectionToEnd=function(){"use strict";this.setSelection({length:0,offset:b("StructuredInputDOM").getLength(this._richInput)})};s.prototype.isSelectionAtEnd=function(){"use strict";var a=this.getSelection().offset,c=b("StructuredInputDOM").getLength(this._richInput);return a>=c};s.prototype.selectAll=function(){"use strict";this.setSelection({offset:0,length:b("StructuredInputDOM").getLength(this._richInput)})};s.prototype.hasFocus=function(){"use strict";return b("DOM").contains(this._root,document.activeElement)};s.prototype.focus=function(){"use strict";this._richInput.focus()};s.prototype.blur=function(){"use strict";var a={position:"absolute",top:0,width:"1px",height:"1px"};b("Locale").isRTL()?a.right="-100px":a.left="-100px";var c=b("DOM").create("input",{type:"text",tabIndex:-1,style:a});b("DOM").appendContent(this._root,c);a=function(){(this.hasFocus()||r&&document.activeElement===document.body)&&(c.focus(),c.blur())};this.blur=a;this.blur()};s.getInstance=function(a){var c=b("Parent").bySelector(a,"._586g");if(!c)throw new Error("No DOMElement structured input found using "+a);return b("DataStore").get(c,"StructuredInput")||new s(c)};e.exports=s}),null);
__d("FacebarTypeaheadInput",["csx","ArbiterMixin","DOM","FacebarStructuredText","Locale","SimpleStructuredInput","StructuredInput","Vector","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={text:{className:"text",group:"all",select:"none"},ent:{className:"entity",group:"all",select:"group"},"ent:hashtag_exact":{className:"entity",group:"hashtag",select:"none"}};function j(a){return Object.assign(a.toStruct(),{display:i[a.getType()]||i[a.getTypePart(0)]})}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a){h.constructor.call(this);this.root=a;var c=b("DOM").scry(this.root,"._586i")[0];c?this.input=b("StructuredInput").getInstance(a):this.input=b("SimpleStructuredInput").getInstance(a);this.value=null;this.selection={offset:0,length:0};this.resetOnChange=!0;this.initEvents()}a.prototype.initEvents=function(){var a=function(a,b){this.inform(a,b)}.bind(this);this.input.subscribe("blur",a);this.input.subscribe("focus",a);this.input.subscribe("change",function(a,b){this.resetOnChange&&(this.value=null),this.inform("change",b)}.bind(this))};a.prototype.togglePlaceholder=function(a){return this.input instanceof b("StructuredInput")?this.input.togglePlaceholder(a):null};a.prototype.focus=function(){this.input.focus()};a.prototype.blur=function(){this.input.blur()};a.prototype.getElement=function(){return this.root};a.prototype.getRawInputElement=function(){var a=b("DOM").scry(this.root,"._586i")[0];return a==null?b("DOM").scry(this.root,"._1frb")[0]:a};a.prototype.getValue=function(){this.value==null&&(this.value=b("FacebarStructuredText").fromStruct(this.input.getStructure()));return this.value};a.prototype.getLength=function(){return this.getValue().getLength()};a.prototype.resetPlaceholder=function(){this.input.resetPlaceholder()};a.prototype.setValue=function(a,b){this.value=a;this.resetOnChange=!!b;b=a.toArray().map(j);this.input.setStructure(b);this.input.setSelection({offset:a.getLength(),length:0});this.resetOnChange=!0};a.prototype.storeSelection=function(){this.selection=this.input.getSelection()};a.prototype.restoreSelection=function(){this.selection&&this.input.setSelection(this.selection)};a.prototype.clearSelection=function(){this.input.setSelection({offset:this.getLength(),length:0})};a.prototype.setHint=function(a){a=a&&!a.hasRTL()&&!b("Locale").isRTL()?a.toArray().map(j):[];this.input.setHint(a)};a.prototype.isSelectionAtEnd=function(){return this.input.isSelectionAtEnd()};a.prototype.selectInput=function(a){this.input.setSelection({offset:a||0,length:this.getLength()})};Object.assign(a.prototype,{events:["change","focus","blur"]});e.exports=a}),null);
__d("FacebarTypeaheadCore",["csx","cx","invariant","Arbiter","ArbiterMixin","Base64","CSS","DOM","Event","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStoreUtils","FacebarStructuredText","FacebarTypeaheadInput","immutable","Keys","KeywordsSearchResultConfig","Parent","Random","URI","generateBrowseSessionID","getActiveElement","mixin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));j=c&&c.prototype;function a(a){j.constructor.call(this),this.events=["session","focus","select","change","execute","blur","focusStartTime","open"],this._squashedEntityIDsByQuery=b("immutable").Map(),Object.assign(this,a)}a.prototype.init=function(a,c,d){__p&&__p();if(window.getSelection===null)throw new Error("Facebar: window.getSelection is null!");this.init=function(){};this.data=a;this.view=c;this.root=d;this.facebarRoot=b("Parent").bySelector(d,"._585-");this.button=b("DOM").find(this.facebarRoot,"._4w98");this.windowFocused=!0;this.isFocused=!1;this.hoverAnimation=null;this.stickyQuery=null;this.settedQuery=null;this.selectedQuery=null;this.currentQuery=null;this.isSuggestionBagdeVisible=!1;this.initSubcomponents();this.initEvents();this.checkValue();this.checkSingleState();this.checkLocal();this.checkCategoryName()};a.prototype.initSubcomponents=function(){var a=b("DOM").find(this.root,"._5861");this.input=new(b("FacebarTypeaheadInput"))(a);this.view.setInputElement(this.input.getRawInputElement())};a.prototype.initEvents=function(){b("Event").listen(this.root,"keydown",this.keydown.bind(this)),b("Event").listen(this.root,"keyup",this.keyup.bind(this)),b("Event").listen(this.root.parentNode,"mousedown",this.mousedown.bind(this)),b("Event").listen(this.view.getElement(),"mousedown",this.mousedown.bind(this)),b("Event").listen(window,"focus",this.focusWindow.bind(this)),b("Event").listen(window,"blur",this.blurWindow.bind(this)),this.view.subscribe("select",this.selectView.bind(this)),this.view.subscribe("highlight",this.highlightView.bind(this)),this.view.subscribe("render",this.highlightView.bind(this)),this.view.subscribe("hideHelp",this.performQuery.bind(this)),this.input.subscribe("focus",this.focusInput.bind(this)),this.input.subscribe("blur",this.blurInput.bind(this)),this.input.subscribe("change",this.changeInput.bind(this)),this.data.subscribe("activity",this.typeaheadActivity.bind(this)),this.data.subscribe("respond",this.completeData.bind(this)),this.data.subscribe("nullstateReady",this.performQueryIfVisible.bind(this)),this.data.subscribe("reloadNullstate",this.performQuery.bind(this)),b("Arbiter").subscribe("FacebarTypeahead.clearRecentSearches",function(){return this.clearRecentSearches()}.bind(this)),b("Arbiter").subscribe("FacebarTypeahead.focus",function(){this.input.focus(),setTimeout(function(){this.input.clearSelection()}.bind(this),0)}.bind(this)),b("Event").listen(this.button,"click",this.buttonDownOrClick.bind(this)),b("Event").listen(this.button,"mousedown",this.buttonDownOrClick.bind(this)),b("Event").listen(this.button,"mouseup",this.buttonUp.bind(this)),setTimeout(this.initFocus.bind(this),0)};a.prototype.initFocus=function(){!this.lazyFocused&&b("DOM").contains(this.input.root,b("getActiveElement")())&&(this.lazyFocused=!0,this.isFocused=!0,this._newSession(),this.inform("focus",{catchup:!0}),this.open(!0))};a.prototype.setStartTime=function(a){this.inform("focusStartTime",{time:a})};a.prototype.cleanQuery=function(a){a=babelHelpers["extends"]({},a)||{};a.structure||(a.structure=new(b("FacebarStructuredText"))());(!b("FacebarGlobalOptions").allowGrammar||b("FacebarJSConstants").nonGrammarTypes[a.type])&&(a.structure=b("FacebarStructuredText").fromString(a.structure.toString()));a.structure instanceof b("FacebarStructuredText")||i(0);return a};a.prototype._unlockQuery=function(){var a=this.input.getValue();a.hasType("ent")&&a.trim().getCount()===1&&(this.input.storeSelection(),this.input.setValue(b("FacebarStructuredText").fromString(a.toString())),this.input.restoreSelection())};a.prototype.setPageQuery=function(a){a=this.cleanQuery(a);var b=this.input.getValue(),c=a.structure;b=!c.isEmptyOrWhitespace()&&(b.isEmptyOrWhitespace()||!b.matches(c));return this.selectQuery(a,b)};a.prototype.selectQuery=function(a,b){b=b!==!1;a=this.cleanQuery(a);(b||!this.selectedQuery)&&((b||this.getValue().isEmptyOrWhitespace())&&this.setQuery(a),this.selectedQuery=a);return a};a.prototype.completeSelection=function(){var a=this.view.getSelection();if(a&&!a.search){this.data.saveResult(a);a.structure=a.structure.pad();this.setQuery(a);return!0}return!1};a.prototype.setQuery=function(a){__p&&__p();var c=arguments.length<=1||arguments[1]===undefined?!0:arguments[1];a=this.cleanQuery(a);a.structure.hasType("blank")&&(a.structure=new(b("FacebarStructuredText"))(a.structure.toArray().filter(function(a){return a.getType()!="blank"})));this.input.setValue(a.structure);this.settedQuery=a;this.stickyQuery=c===!1?this.stickyQuery:a;this.checkValue();this.checkSingleState();this.checkLocal();this.checkCategoryName()};a.prototype.checkValue=function(){var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];if(!a&&this.value&&this.value.getHash()===this.input.getValue().getHash())return;this.performQueryIfVisible();this.showSearchSuggestionBadgeIfPossible()};a.prototype.showSearchSuggestionBadgeIfPossible=function(){this.isNullState()?!this.isSuggestionBagdeVisible&&this.data.resultStore.injectedSuggestionCount&&(b("Arbiter").inform("FacebarTypeahead.showSuggestionBadge"),this.isSuggestionBagdeVisible=!0):this.isSuggestionBagdeVisible&&(b("Arbiter").inform("FacebarTypeahead.hideSuggestionBadge"),this.isSuggestionBagdeVisible=!1)};a.prototype.checkSingleState=function(){var a=this.input.getValue();this.data.setSingleState(a.getCount()===1&&a.hasType("ent"))};a.prototype.checkLocal=function(){var a=this.input.getValue();this.data.setLocal(a.getCount()===1&&a.isLocal())};a.prototype.checkCategoryName=function(){var a=this.input.getValue();a.getCategoryName()!==null&&this.data.setCategoryName(a.getCategoryName())};a.prototype.isNullState=function(){return this.input.getValue().getHash()===""};a.prototype.performQueryIfVisible=function(){if(!this.view.visible)return;this.performQuery()};a.prototype.performQuery=function(){this.value=this.nextQuery=this.getValue(),b("FacebarGlobalOptions").graphSearchV2&&this.view.resetIndex(),this.data.query(this.nextQuery),this.currentQuery=this.nextQuery};a.prototype.requery=function(){this.currentQuery&&this.data.query(this.currentQuery)};a.prototype.executeQuery=function(a){__p&&__p();this._browseSessionID=b("generateBrowseSessionID")({appName:"www",edge:"keywords_search"});var c=this.isNullState();a=this.cleanQuery(a);this._setSquashedEntityIDsFromQuery(a);b("FacebarGlobalOptions").facebar_use_js_session_id&&(a.csid=String(b("Random").uint32())+String(b("Random").uint32()));var d=this.inform("execute",a),e=this.getSessionID();this.close();b("FacebarGlobalOptions").allowGrammar?this.selectQuery(a):this.selectQuery();b("FacebarGlobalOptions").hasRecentSearchNullState&&a.type!=="shortcut"&&(!c||a.isInjectedSuggestion)&&(this.data.resultStore.addRecentEntryToNullState(a),a.isInjectedSuggestion&&(b("Arbiter").inform("FacebarTypeahead.removeInjectedSuggestion"),--this.data.resultStore.injectedSuggestionCount,this.performQuery()));d||this._navigateToQuery(a,e,a.csid)};a.prototype.getSearchType=function(){return"facebar"};a.prototype._newSession=function(){if(this._sessionID!=null)return;this._sessionID=Math.random().toString();this.inform("session",this._sessionID,b("Arbiter").BEHAVIOR_STATE)};a.prototype._closeSession=function(){this._sessionID=null,this.inform("session",null,b("Arbiter").BEHAVIOR_STATE)};a.prototype.getSessionID=function(){return this._sessionID};a.prototype.getBrowseSessionID=function(){return this._browseSessionID};a.prototype._navigateToQuery=function(a,c,d){__p&&__p();var e=this.data.facebarConfig;if(a.uri){a.uri.addQueryData(a.extra_uri_params);a.uri.addQueryData({ref:"br_tf"});var f=a.uid!=null&&a.uid.match(/^[0-9]+$/)!=null;if(a.structure&&(a.type=="websuggestion"||a.type==b("KeywordsSearchResultConfig").result_type||a.type=="grammar"&&(!e||String(a.uri.getPath()).startsWith(e.search_path))||b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&f)){e=this.data.getRawStructure(a.structure).text_form;f=b("Base64").encode(encodeURIComponent(e)).replace(/\=+$/,"");e={sid:c,qs:f,gv:this.data.getQueryData().grammar_version,ent_ids:this.getSquashedEntityIDsFromQueryString(String(a)),bsid:this._browseSessionID,preloaded_entity_ids:null,preloaded_entity_type:null,ref:"br_tf",csid:null,high_confidence_argument:null};d&&(e.csid=d);a.uri.addQueryData({ref:b("FacebarKeywordSearchUtils").encodeFacebarURIParams(e),bs:a.alternateSemantic})}a.uri.go();return}};a.prototype.reset=function(){this.selectQuery(),this.inform("reset"),this.showSearchSuggestionBadgeIfPossible(),b("FacebarKeywordSearchUtils").clearSelectedTabInfo()};a.prototype.open=function(a){this.inform("open"),this.view.show(this.facebarRoot.offsetWidth),this.input.focus({catchup:a}),this.checkValue(!0),this.checkSingleState(),this.checkLocal(),this.checkCategoryName(),this.highlightButton(),this.isFocused||(this.isFocused=!0,this._newSession(),this.inform("focus"))};a.prototype.close=function(){__p&&__p();this._closeSession();if(this.inform("close")===!1)return;(!this.value||this.value.isEmptyOrWhitespace())&&this.selectedQuery?this.input.setValue(this.selectedQuery.structure):this.stickyQuery&&this.input.setValue(this.stickyQuery.structure);this.input.setHint(null);this.view.hide();this.view.setAutoSelect(!1);this.inform("session",null,b("Arbiter").BEHAVIOR_STATE);this.isFocused=!1;this.unlightButton()};a.prototype.getElement=function(){return this.root};a.prototype.getValue=function(){return this.input.getValue()};a.prototype.getText=function(){return this.getValue().toString()};a.prototype.submitQuery=function(a){__p&&__p();if(b("FacebarGlobalOptions").graphSearchV2&&this.view.index<0){var c=this.input.getValue(),d=this.data.getRawStructure(c);if(d&&!d.is_empty){d=d.raw_text?d.raw_text:b("FacebarResultStoreUtils").getRawTextFromStructured(c.toArray());c=b("FacebarKeywordSearchUtils").makeFacebarEntry(d);c.position=a;this.inform("magSearch",c);this.executeQuery(c)}}else this.view.select()};a.prototype.keydown=function(event){__p&&__p();var a=!0,c=b("Event").getKeyCode(event);event.metaKey===!0&&(this.metaOnKeyDown=!0);this.isFocused||this.open();switch(c){case b("Keys").ESC:this.reset();this.close();break;case b("Keys").RIGHT:a=this.input.isSelectionAtEnd()&&this.completeSelection();break;case b("Keys").UP:this.view.prev();break;case b("Keys").DOWN:this.view.next();break;case b("Keys").RETURN:var d=-2;this.submitQuery(d);break;case b("Keys").PAGE_UP:this.view.first();break;case 222:d=this.input.value.trim();!event.getModifierState("shift")&&d.endsOnType("ent")&&this.input.setValue(d);a=!1;break;default:d=c<=46&&c!==8&&c!==32;var e=c>=112&&c<=126,f=c===144||c===145;c=c===91||c===92||c===93||c===224;!d&&!e&&!f&&!event.metaKey&&!c&&(this.data.setSingleState(!1),this.data.setLocal(!1),b("FacebarGlobalOptions").autohighlight&&this.view.setAutoSelect(!0));this.stickyQuery=null;a=!1;break}this.input.storeSelection();a&&(event.preventDefault(),event.stopPropagation())};a.prototype.keyup=function(event){var a=b("Event").getKeyCode(event),c=a<=46&&a!==8&&a!==32,d=a>=112&&a<=126,e=a===144||a===145;a=a===91||a===92||a===93||a===224;!c&&!d&&!e&&!event.metaKey&&!a&&!this.metaOnKeyDown&&this._unlockQuery();a||(this.metaOnKeyDown=!1)};a.prototype.mousedown=function(event){b("FacebarGlobalOptions").autohighlight&&this.view.setAutoSelect(!0),this.input.storeSelection(),event.target instanceof Element&&b("Parent").bySelector(event.target,"._50c9")&&event.preventDefault()};a.prototype.focusWindow=function(){this.windowFocused=!0};a.prototype.blurWindow=function(){this.windowFocused=!1};a.prototype.selectView=function(a,b){if(!b||!b.selected)return;this.inform("select",b);a=this.cleanQuery(b.selected);this.executeQuery(a)};a.prototype.highlightView=function(){var a=this.view.getSelection();b("FacebarGlobalOptions").graphSearchV2?this.input.setHint(a?a.structure:null):a&&this.input.setHint(a.structure)};a.prototype.blurInput=function(){setTimeout(function(){(this.windowFocused||b("URI").getRequestURI().getSubdomain()==="apps")&&(this.input.togglePlaceholder(),this.close())}.bind(this),0)};a.prototype.changeInput=function(){this.inform("change"),this.checkValue(),this.checkLocal(),this.inform("change_end")};a.prototype.focusInput=function(){this.open(),this.input.togglePlaceholder(!1)};a.prototype.updateData=function(){this.view.setLoading(this.loading)};a.prototype.completeData=function(a,c){if(c.forceDisplay||this.value&&this.value.matches(c.value)){a=b("FacebarGlobalOptions").graphSearchV2?!c.results.length:!c.results.length&&!this.loading&&c.isEmptyResults;this.view.render(c.value,c.results,c.isAsync,a);this.tabQueued&&this.completeSelection()&&delete this.tabQueued}};a.prototype.typeaheadActivity=function(a,b){this.fetching=b.activity,this.loading!==this.fetching&&(this.loading=this.fetching,this.updateData())};a.prototype.getNameTextFromSelected=function(){var a=this.settedQuery&&this.settedQuery.semantic,b=this.data.facebarConfig&&this.data.facebarConfig.name_functions;a=a&&b&&a.match(/[a-z-]+\([^()]+\)/g);if(a)for(var c=0;c<a.length;c++){var d=a[c].match(/([a-z-]+)\(([^()]+)\)/);if(d&&b.includes(d[1]))return d[2]}return this.value.toString()};a.prototype.clearRecentSearches=function(){this.data.resultStore.clearRecentSearches()};a.prototype.highlightButton=function(){b("CSS").addClass(this.button,"_4w97")};a.prototype.unlightButton=function(){b("CSS").matchesSelector(this.button,"._4w97")&&b("CSS").removeClass(this.button,"_4w97")};a.prototype.buttonDownOrClick=function(event){event.preventDefault()};a.prototype.buttonUp=function(){!this.isFocused?this.focusInput():this.submitQuery(-1)};a.prototype._setSquashedEntityIDsFromQuery=function(a){var b=[];a.itemLoggingInfo?a.itemLoggingInfo.kwEntIds?b=a.itemLoggingInfo.kwEntIds:a.itemLoggingInfo.kwEntId&&(b=[a.itemLoggingInfo.kwEntId]):a.entity_ids&&(b=a.entity_ids);this._squashedEntityIDsByQuery=this._squashedEntityIDsByQuery.set(a.text,b)};a.prototype.getSquashedEntityIDsFromQueryString=function(a){a=this._squashedEntityIDsByQuery.get(a);return a==null?[]:a};a.clearRecentSearches=function(){b("Arbiter").inform("FacebarTypeahead.clearRecentSearches")};e.exports=a}),null);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","ge","mapObject","throttle","whitelistObjectKeys"],(function(a,b,c,d,e,f){__p&&__p();var g={WAITING:"WAITING",SUCCESS:"SUCCESS",NO_RESULTS:"NO_RESULTS",ERROR:"ERROR"};function a(a){"use strict";this.init(a),this.initEvents(a)}a.prototype.init=function(a){"use strict";__p&&__p();this.core=a.getCore();this.data=a.getData();this.view=a.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=!1;this.allFromNullState=!1;a=b("ge")("search_first_focus");this.initStartTime=a&&a.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset()};a.prototype._reset=function(){"use strict";__p&&__p();this.stats={};this.avgStats={};this.appendStats={};this._backspacing=!1;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=!1;this._inflightRequests={};var a=Math.random().toString();this.data.setQueryData({sid:a});this.view.setSid(a);this.recordStat("sid",a);this.recordStat("keypressed",0)};a.prototype.initEvents=function(){"use strict";__p&&__p();this.core.subscribe("focus",function(event){if(!this.stats.session_start_time){this.recordStat("session_start_time",Date.now());var a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a);this._lastRenderTime=0;this._firstKeypressTime=null}}.bind(this)),this.core.subscribe("blur",function(event){var a=Date.now();for(var b in this._inflightRequests){var c=this._inflightRequests[b];c=a-c;this.recordAvgStat("search_endpoint_ms_from_js",c)}this.recordStat("session_end_time",a);this.submit()}.bind(this)),this.view.subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this)),this.view.subscribe("render",function(a,b){this._lastRenderTime=Date.now(),this.recordRender(b)}.bind(this)),this.data.subscribe("logPerformanceTiming",function(a,b){this.performanceTimings[b.field]=b.value}.bind(this)),this.data.subscribe("logProxygenForkPoolId",function(a,b){this.recordStat(b.field,b.value)}.bind(this)),this.data.subscribe("activity",function(a,b){this.recordStat("pending_request",b.activity)}.bind(this)),this.data.subscribe("respondValidUids",function(a,b){this.validUids=b.slice(0)}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){__p&&__p();if(!b.value){this.query="";this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return}this.stats.first_query_time||this.recordStat("first_query_time",Date.now());this.query=b.value;this.queryStartTime||(this.queryStartTime=[]);this.queryStartTime[this.query]=Date.now();this.recordCountStat("num_queries")}.bind(this)),this.data.subscribe("queryEndpoint",function(a,b){this.recordCountStat("num_search_ajax_requests"),this.recordAvgStat("endpoint_query_length",b.value.length),this._inflightRequests[b.value]=Date.now()}.bind(this)),this.data.subscribe("onload",function(a,b){this._onloadTime=b.time}.bind(this)),this.data.subscribe("bootstrapped",function(a,b){this.bootstrapStats.endTime=b.time,this.bootstrapStats.bootstrapped=1}.bind(this)),this.core.subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this)),this.data.subscribe("endpointStats",function(a,b){a=b.info;b=a.fetch_end-a.fetch_start;a.value?this.recordAvgStat("search_endpoint_ms_from_js",b):this.bootstrapStats[a.type]=b;a.coeff2_ts&&(this.bootstrapStats.coeff2_ts=a.coeff2_ts);typeof a.browserCacheHit!=="undefined"&&this.recordCountStat(a.browserCacheHit?"bootstrap_cachehits":"bootstrap_cachemisses");this._inflightRequests[a.value]&&delete this._inflightRequests[a.value]}.bind(this)),this.data.subscribe("fetchComplete",function(a,b){a=b.entries;b=b.value;b&&this.backendQueriesStatus[b]&&(this._addDurationForBackendQuery(this.backendQueriesStatus[b]),this.backendQueriesStatus[b].status=a&&a.length>0?g.SUCCESS:g.NO_RESULTS)}.bind(this)),this.data.subscribe("fetchError",function(a,b){a=b.fetch_context;b=a.value;if(a.bootstrap||!b)return;this.backendQueriesStatus[b]&&(this.backendQueriesStatus[b].status=g.ERROR,this._addDurationForBackendQuery(this.backendQueriesStatus[b]))}.bind(this)),this.data.subscribe("query",function(a,b){this.recordAvgStat("num_results_from_cache",b.results.length)}.bind(this)),this.data.subscribe("backend_topreplace",function(a,b){!1===this._topreplace&&(this.recordStat("backend_topreplace",1),this._topreplace=!0)}.bind(this)),this.data.subscribe("completeFetch",function(a,b){if(this.core.scubaInfo){a=b.response;b={recv:b.stats.fetch_end-b.stats.fetch_start,render:Date.now()-b.stats.fetch_start,payload_size:JSON.stringify(a).length};a.payload.entities||(a.payload.entities=this.buildResults());this.logToScuba(a,b,this.core.scubaInfo,this.query,this.type)}}.bind(this)),this.data.subscribe("completeCacheFetch",b("throttle")(function(a,b){this.core.scubaInfo&&this.logToScuba({},{},this.core.scubaInfo,this.query,this.type)}.bind(this),500)),b("Event").listen(this.element,"keydown",function(event){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(event)==b("Keys").BACKSPACE?!this._backspacing&&this.query&&(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.query)):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this)),this.data.subscribe("beforeFetch",function(a,b){a=b.request.data?b.request.data.value:null;if(!a)return;this.backendQueries.push(a);this.backendQueriesStatus[a]={status:g.WAITING,start_time:Date.now()}}.bind(this))};a.prototype.recordStat=function(a,b){"use strict";this.stats[a]=b};a.prototype.recordCountStat=function(a){"use strict";var b=this.stats[a];this.stats[a]=b?b+1:1};a.prototype.recordAvgStat=function(a,b){"use strict";this.avgStats[a]?(this.avgStats[a][0]+=b,++this.avgStats[a][1]):this.avgStats[a]=[b,1]};a.prototype.recordAppendStat=function(a,b){"use strict";Object.prototype.hasOwnProperty.call(this.appendStats,a)||(this.appendStats[a]=[]),this.appendStats[a].push(b)};a.prototype.recordRender=function(a){"use strict";__p&&__p();this.results=a.filter(function(a){return a.uid!="search"&&a.type!="disabled_result"&&a.type!="header"}).map(function(a){return babelHelpers["extends"]({},a)});a=null;this.queryStartTime&&(a=this.queryStartTime[this.query]);var c=this.results.every(function(a){return a.fromCache||a.isSeeMore}),d=this.results.every(function(a){return a.isFromGSEF||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isFromGSEF}),e=this.results.every(function(a){return a.isGloballyCachedKeyword||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isGloballyCachedKeyword}),f=this.results.every(function(a){return a.isNullState}),g=this.results.every(function(a){return a.isSingleState}),h=this.results.every(function(a){return a.exactMatchKeyword||a.isSeeMore});this.allFromSingleState=g;this.allFromNullState=f;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&f)this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime),this.data.lastNullOrSingleStateFetchStartTime=null;else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&g)this.recordStat("time_render_single_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);else if(a){f=Date.now()-a;h?this.recordAppendStat("times_render_gs_echo",f):this.recordAppendStat(c?"times_render_local":"times_render_remote",f);!c&&d&&this.recordAppendStat("time_render_gs_early_fetch",f);!c&&e&&this.recordAppendStat("time_render_globally_cached_keywords",f);!c&&!d&&!e&&this.recordAppendStat("time_render_remote_main_call",f)}this.data.lastNullOrSingleStateFetchStartTime=null;g=b("Vector").getViewportDimensions();this.recordStat("window_size_width",g.x);this.recordStat("window_size_height",g.y);this.results.length>0&&!this.stats.first_result_time&&this.recordStat("first_result_time",Date.now());a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a)};a.prototype.recordSelectInfo=function(a){"use strict";__p&&__p();var c=a.selected,d=a.index;c.groupIndex!==undefined&&(d=a.index-c.groupIndex-1);var e={href:c.path},f=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};b("clickRefAction")("click",e,null,null,f);if(c.uid=="search"||c.uid=="people_search")this.recordStat("selected_position",this.results!=null?this.results.length:0),this.recordStat("selected_search",1);else if(c.uid=="invite")this.recordStat("selected_invite",1);else{e=c.log_type||c.rankType||c.render_type||c.type;f=e=="friend"?"user":e;this.recordStat("selected_"+f,1);this.recordStat("selected_position",d);this.recordStat("selected_type",e);this.recordStat("selected_name_length",c.text.length);this.recordStat("selected_id",c.uid);this.recordStat("selected_degree",c.bootstrapped?1:2);this.recordStat("selected_recent_search",c.recent_search);f=b("TokenizeUtil").parse(this.data.getTextToIndex(c)).tokens;d=h(f,this.query);d&&this.recordStat("matched_terms",d);this.recordStat("selected_text",c.text)}var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};a.prototype._addDurationForBackendQuery=function(a){"use strict";a.start_time&&(a.duration=Date.now()-a.start_time,delete a.start_time)};a.prototype._dataToSubmit=function(){"use strict";__p&&__p();this.recordStat("candidate_results",this.buildResults());this.recordStat("query",this.query);this.recordStat("init_time",this.initTime);this.initStartTime&&(this.recordStat("init_start_time",this.initStartTime),this.recordStat("onload_time",this._onloadTime),this.initStartTime=0);this.recordStat("bootstrapped",this.bootstrapStats.bootstrapped);this.bootstrapStats.endTime&&(this.recordStat("bootstrapped_time",this.bootstrapStats.endTime),this.recordStat("user_bootstrap_ms",this.bootstrapStats.user),this.recordStat("other_bootstrap_ms",this.bootstrapStats.other),this.bootstrapStats.endTime=0);var a=this.data.getBootstrapError();a&&this.recordStat("bootstrap_error",1);this.recordStat("coeff2_ts",this.bootstrapStats.coeff2_ts);this.recordStat("max_results",this.data._maxResults);if(this.backendQueries.length>0){this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow));this.recordStat("backend_queries",this.backendQueries);a=b("whitelistObjectKeys")(this.backendQueriesStatus,this.backendQueries);b("mapObject")(a,this._addDurationForBackendQuery,this);this.recordStat("backend_queries_status",a)}if(b("FacebarGlobalOptions").taSessionLoggingSample){var c=[];this.results.forEach(function(a){c.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",c)}a=this.stats;for(var d in this.avgStats){var e=this.avgStats[d];a[d]=e[0]/e[1]}for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};a.prototype.buildResults=function(){"use strict";var a=(this.results||[]).map(function(a,c){var d=b("TokenizeUtil").parse(this.data.getTextToIndex(a)).tokens,e=a.rankType||a.render_type||a.type,f=a.log_type,g=a.bootstrapped?1:0,i=a.s_token||"",j=typeof a.index==="undefined"?100:a.index;d=h(d,this.query)||this.query;var k=a.index_rank,l=a.match_type,m=a.l_type,n=a.vertical_type,o=a.prefix_match,p=a.prefix_length,q=a.text,r=a.category,s=a.subtext,t=a.fromCache,u=a.isNullState,v=a.isSingleState,w=a.logInfo;return typeof a.groupIndex==="number"?[a.groupIndex,a.indexInGroup,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]:[0,c,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]}.bind(this));return JSON.stringify(a)};a.prototype.submit=function(){"use strict";var a=this._dataToSubmit();switch(this.data.recordingRoute){case"banzai_vital":b("Banzai").post(this._banzaiRoute,a,{delay:0,retry:!0});break;default:this.submitThroughAsyncRequest(a)}this._reset()};a.prototype.addLatencyToSample=function(a,b,c,d){"use strict";a.addInteger(d+"query_start",c.queryStart),a.addInteger(d+"query_end",c.queryEnd),a.addInteger(d+"keypress_query_end",c.keyPressToQueryEnd),a.addInteger(d+"render",c.render),a.addInteger(d+"keypress_render",c.keyPressToRender),b[d+"query_start"]=c.queryStart,b[d+"query_end"]=c.queryEnd,b[d+"keypress_query_end"]=c.keyPressToQueryEnd,b[d+"render"]=c.render,b[d+"keypress_render"]=c.keyPressToRender};a.prototype.logToScuba=function(a,c,d,e,f){"use strict";__p&&__p();var g={},h=new(b("BanzaiScuba"))("search_facebar_js",null,{addBrowserFields:!0,addPredictedGeographyFields:!0,addUser:!0,addSearchVersion:!0,addGatekeepers:{facebarGKs:!0}});h.addInteger("sample_rate",d.sample_rate);g.sample_rate=d.sample_rate;h.addNormal("site",d.site);g.site=d.site;h.addDenorm("query",e);g.query=e;d=a.payload||{};d.entities&&(h.addInteger("num_entities",d.entities.length),g.num_entities=d.entities.length);Object.keys(this.performanceTimings).forEach(function(a){h.addInteger(a,this.performanceTimings[a]),g[a]=this.performanceTimings[a]}.bind(this),this);if(d.results||d.entries){var i=(d.results||d.entries).length;h.addInteger("num_results",i);g.num_results=i}d.gzipped_payload_size!==undefined&&(h.addInteger("gzipped_payload_size",d.gzipped_payload_size),g.gzipped_payload_size=d.gzipped_payload_size);c.recv&&c.render>c.recv&&(h.addInteger("time_render",c.render-c.recv),g.time_render=c.render-c.recv,h.addInteger("time_js_async",c.recv),g.time_js_async=c.recv);c.payload_size&&(h.addInteger("payload_size",c.payload_size),g.payload_size=c.payload_size);this.stats.time_render_null_state&&(!e||e.length===0)&&(h.addInteger("time_render_null_state",this.stats.time_render_null_state),g.time_render_null_state=this.stats.time_render_null_state);h.addInteger("query_id",a.queryId);g.query_id=a.queryId;h.addDenorm("user_id",b("CurrentUser").getID());g.user_id=b("CurrentUser").getID();h.addDenorm("session_id",this.stats.sid);g.session_id=this.stats.sid;h.addNormal("typeahead_type",f);g.typeahead_type=f;c.remoteQueryLatencies&&(this.addLatencyToSample(h,g,c.remoteQueryLatencies,"remote_"),h.addInteger("remote_keypress_query_dispatch",c.remoteQueryLatencies.keyPressToQueryDispatch),g.remote_keypress_query_dispatch=c.remoteQueryLatencies.keyPressToQueryDispatch,h.addInteger("remote_keypress_query_start",c.remoteQueryLatencies.keyPressToQueryStart),g.remote_keypress_query_start=c.remoteQueryLatencies.keyPressToQueryStart,h.addNormal("inflight_requests",c.remoteQueryLatencies.inflightRequests),h.addInteger("inflight_requests",c.remoteQueryLatencies.inflightRequests),g.inflight_requests=c.remoteQueryLatencies.inflightRequests,h.addNormal("waiting_queries",c.remoteQueryLatencies.waitingQueries),h.addInteger("waiting_queries",c.remoteQueryLatencies.waitingQueries),g.waiting_queries=c.remoteQueryLatencies.waitingQueries);c.cacheQueryLatencies&&this.addLatencyToSample(h,g,c.cacheQueryLatencies,"cache_");h.post();b("BanzaiNectar").log("search_facebar_js","typeahead",g)};a.prototype.submitThroughAsyncRequest=function(a){"use strict";Object.keys(a).length>0&&new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("handleErrorAfterUnload",!0).setErrorHandler(function(c){a.retry=!0,new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("asynchronous_DEPRECATED",!1).send()}.bind(this)).send()};var h=function(a,c){__p&&__p();if(!a||!c)return;c=b("TokenizeUtil").parse(c);if(c.flatValue[c.flatValue.length-1]===" ")return c.flatValue;var d=c.tokens[c.tokens.length-1],e={};a.forEach(function(a){e[a]=(e[a]||0)+1});var f={};c=c.tokens.slice(0,c.tokens.length-1);c.forEach(function(a){f[a]=(f[a]||0)+1});for(var g=0;g<a.length;++g){var h=a[g];if(h.indexOf(d)===0&&e[h]-(f[h]||0)>0){c.push(h);return c.join(" ")}}return undefined};Object.assign(a.prototype,{_endPoint:"/ajax/typeahead/record_metrics.php",_banzaiRoute:"search"});e.exports=a}),null);
__d("FacebarTypeaheadRecorder",["Arbiter","Event","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarTimerUtils","Keys","SearchFunnelLogger","SearchTypeaheadRecorder","URI","clickRefAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("SearchTypeaheadRecorder"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.userText="",this.nullStateCandidates=null,this.singleStateCandidates=null,this.queryTimes={},this._sessionDisabled=!1,this.type="facebar",this._maxQueryID=0,this._isQueryMatch=!0,this._bootstrapSize=null}a.prototype.initEvents=function(a){__p&&__p();a.getCore().subscribe("session",function(a,b){b===null?this.sessionEnd():this.sessionStart(b)}.bind(this)),a.getCore().subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this)),a.getCore().subscribe("magSearch",function(a,b){this.recordMagSearch(b)}.bind(this)),a.getCore().input.subscribe("shortcut",function(a,b){this.recordShortcut(b)}.bind(this)),a.getCore().subscribe("quickSelectRedirect",function(a,b){this.recordQuickSelectInfo(b)}.bind(this)),a.getView().subscribe("render",function(a,b){if(this.data._isInjectedSuggestionFlow)return;this.recordRender(b);this.allFromNullState?this.nullStateCandidates=this.buildListTypeaheadRecords():this.allFromSingleState&&(this.singleStateCandidates=this.buildListTypeaheadRecords());this._lastRenderTime=Date.now()}.bind(this)),a.getView().subscribe("show",function(a,b){if(!this.data.lastNullOrSingleStateFetchStartTime)return;this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null}.bind(this)),a.getView().subscribe("logPerformanceTiming",function(a,b){this.performanceTimings[b.field]=b.value}.bind(this)),a.data.subscribe("query",function(a,c){c.value.isEmpty()||this.recordCountStat("num_queries"),this.recordAvgStat("num_results_from_cache",c.results.length),this.queryTimes[c.queryId]={send:b("FacebarTimerUtils").getTimestamp()}}.bind(this)),a.data.subscribe("sending_global_request",function(a,b){a=b.getData().value;if(!a)return;this.backendQueries.push(a)}.bind(this)),a.data.subscribe("sending_request",function(a,b){a=b.data.value;if(!a)return;this.backendQueries.push(a)}.bind(this)),a.subscribe("navigation",function(a,b){b&&b.structure&&(this.recordStat("navigation_input",JSON.stringify(b.structure.toStruct())),this.recordStat("navigation_text",b.structure.toString()))}.bind(this)),a.data.subscribe("response_received",function(a,c,d){if(this.queryTimes[c.queryId]){a=this.queryTimes[c.queryId];a.recv=b("FacebarTimerUtils").getTimestamp()-a.send;c&&c.payload&&(a.payload_size=JSON.stringify(c.payload).length)}}.bind(this)),a.data.subscribe("remote_query_latency",function(a,b){if(this.queryTimes[b.queryId]){a=this.queryTimes[b.queryId];a.remoteQueryLatencies=b.latencies}}.bind(this)),a.data.subscribe("cache_query_latency",function(a,b){if(this.queryTimes[b.queryId]){a=this.queryTimes[b.queryId];a.cacheQueryLatencies=b.latencies}}.bind(this)),a.data.subscribe("backend_response",function(a,c){if(this.queryTimes[c.queryId]){a=this.queryTimes[c.queryId];a.render=b("FacebarTimerUtils").getTimestamp()-a.send;c.payload.incomplete&&(a.incomplete=!0);a.backendInfo=c.payload.info;this.core.scubaInfo&&this.logToScuba(c,a,this.core.scubaInfo,c.inputQuery,this.type)}}.bind(this)),a.getCore().subscribe("change",function(a,b){this.userInput(this.core.getText())}.bind(this)),a.data.subscribe("remote_query_match",function(a,b){this._maxQueryID<b.queryId&&(this._maxQueryID=b.queryId,this._isQueryMatch=b.isMatch)}.bind(this)),b("Arbiter").subscribe("BrowseNUX/typing",this.disableThisSession.bind(this)),b("Arbiter").subscribe("TestConsole/typing",this.disableThisSession.bind(this)),a.subscribe("clear",function(){this.recordAppendStat("before_clear_queries",this.userText)}.bind(this)),b("Event").listen(this.element,"keydown",function(event){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(event)==b("Keys").BACKSPACE?this._backspacing||(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.core.getText())):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this)),this.core.subscribe("open",function(a,c){b("SearchFunnelLogger").logSearchOpen();if(c&&c.catchup)return;this.data.lastNullOrSingleStateFetchStartTime=Date.now()}.bind(this)),this.core.subscribe("focusStartTime",function(a,b){this.data.lastNullOrSingleStateFetchStartTime=b.time}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){this.queryStartTime||(this.queryStartTime=[]);a=b.value;this.query=a!=null?a.toString():a;!this.query&&!this.data.lastNullOrSingleStateFetchStartTime&&(this.data.lastNullOrSingleStateFetchStartTime=Date.now());this.queryStartTime[this.query]=Date.now()}.bind(this)),a.subscribe("filter",function(a,b){this._unsupportedGrammarInfo=this.buildUnsupportedGrammarInfo(b)}.bind(this)),a.getCore().subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this)),this.data.subscribe("bootstrapped",function(a,b){this._bootstrapSize=b.size}.bind(this))};a.prototype._reset=function(a){this.stats={},this.avgStats={},this.appendStats={},this._backspacing=!1,this.backendQueries=[],this._topreplace=!1,this._inflightRequests={}};a.prototype.sessionStart=function(a){__p&&__p();this._sessionEnded=!1;this.data.setQueryData({sid:a});this.recordStat("sid",a);this.recordStat("bootstrap_size",this._bootstrapSize);if(!this.stats.session_start_time){this.recordStat("session_start_time",b("FacebarTimerUtils").getTimestamp());a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a)}this.recordStat("keypressed",0);this.queryTimes={};this._lastRenderTime=0;this._firstKeypressTime=null};a.prototype.sessionEnd=function(){__p&&__p();if(this._sessionEnded||this._sessionDisabled){this._sessionDisabled&&(this.reset(),this._sessionDisabled=!1,this._sessionEnded=!0);return}this._sessionEnded=!0;var a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a);this.recordStat("session_end_time",b("FacebarTimerUtils").getTimestamp());this.recordStat("grammar_version",this.data.getQueryData().grammar_version);this.submit();this.nullStateCandidates=null;this.singleStateCandidates=null};a.prototype.disableThisSession=function(){this._sessionDisabled=!0};a.prototype.userInput=function(a){this.userText=a};a.prototype.buildUnsupportedGrammarInfo=function(a){a=a.results?a.results[0]:null;return!a||a.results_set_type!=="unimplemented"?null:{unsupported_grammar:{category:a.error_info.category||"unknown",edge:a.error_info.blamed_edge}}};a.prototype.buildTypeaheadRecord=function(a,c){__p&&__p();var d=a.rankType||a.render_type||a.type,e=a.keywordType,f=a.keywordSource;b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&!a.isNullState&&d!==b("FacebarJSConstants").keywordType&&(e=d,d=b("FacebarJSConstants").keywordType,a.isJSBootstrapMatch&&(f=b("FacebarJSConstants").keywordTypes.entityBootstrap));a.isNullState&&d===b("FacebarJSConstants").keywordType&&(f=b("FacebarJSConstants").keywordTypes.recentSearch);var g=0;c=c;typeof a.groupIndex==="number"&&(g=a.groupIndex,c=a.indexInGroup);g={group_index:g,index_in_group:c,cost:a.cost,s_value:a.s_value||0,semantic:a.semantic,text:a.structure.toString(),cache_only:a.cacheOnlyResult?1:0,prefetched:a.isPrefetched?1:0,parse:a.parse,category:a.category,type:d,source:a.bootstrapped,grammar_results_type:(a.results_set_type||"").replace(/[\[\{](.*)[\]\}]/,"$1"),result_from_memcache:a.memcache,dynamic_cost:a.dynamic_cost,is_js_bootstrap_match:a.isJSBootstrapMatch,backend_cost:a.backendCost,bootstrap_cost:a.bootstrapCost,match_type:a.match_type,l_type:a.l_type,vertical_type:a.vertical_type,prefix_match:a.prefix_match,prefix_length:a.prefix_length,index_before_buckets:a.indexBeforeBuckets,bucket_lineage:a.bucketLineage,nullstate:a.isNullState,singlestate:a.isSingleState,query_id:a.qid,template_id:a.templateID,coeff_cost:typeof a.grammar_costs==="undefined"?-1:a.grammar_costs["{"+a.type+"}"],suggestion:a.isSuggestion,keyword_source:f,keyword_bootstrap_type:a.keywordBootstrapType,exact_match_suggestion:a.exactMatchKeyword?1:0,keyword_type:e};a.logInfo&&(g.backend_log_info=a.logInfo);a.s_token&&(g.s_token=a.s_token);a.s_categories&&(g.s_categories=a.s_categories);return g};a.prototype.buildListTypeaheadRecords=function(){var a=[];this.results&&this.results.forEach(function(b,c){b.uid!=="search"&&a.push(this.buildTypeaheadRecord(b,c))}.bind(this));return a};a.prototype.recordShortcut=function(a){this.recordStat("shortcut",1),this.recordStat("shortcut_with_shift",a.shift)};a.prototype.recordStats=function(a,b){for(var c in b)this.recordStat(a+"_"+c,b[c])};a.prototype.getTypeaheadIndex=function(a,b){a=typeof a.groupIndex==="number"?a.groupIndex+1:0;return b-a};a.prototype.recordQuickSelectInfo=function(a){a={input_query:a.input_query,semantic:a.semantic,type:a.type,position:a.position,with_mouse:a.with_mouse,text:a.text,quick_select:1};this.recordStats("selected",a);this.recordStat("quick_select",1)};a.prototype.recordMagSearch=function(a){var b={};b.text=a.text;b.semantic=a.semantic;b.type=a.type;b.input_query=a.text;b.position=a.position;this.recordStats("selected",b)};a.prototype.recordSelectInfo=function(a){__p&&__p();var c=a.selected,d=this.getTypeaheadIndex(c,a.index),e={};if(c.uid=="search")e.selected_search=1;else{e=this.buildTypeaheadRecord(c);var f=e.type=="friend"?"user":e.type;e.position=d;e[f]=1}e.with_mouse=a.clicked?1:0;e.quick_select=0;e.input_query=this.userText;e.input_fragments=JSON.stringify(this.core.currentQuery.toStruct());b("SearchFunnelLogger").logTypeaheadClick(c,this.stats.sid,e.input_query,this.stats.last_state);d=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};f={href:c.path};b("clickRefAction")("click",f,null,null,d);this.recordStats("selected",e);this.recordAppendStat("selection_history",{selected:e,candidate_results:this.buildListTypeaheadRecords(),timestamp:b("FacebarTimerUtils").getTimestamp()});var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};a.prototype._dataToSubmit=function(){__p&&__p();this.recordStat("max_results",this.data._maxResults);this.stats&&this.stats.selected_input_query?this.recordStat("input_query",this.stats.selected_input_query):this.recordStat("input_query",this.userText);this.recordStat("uri",new(b("URI"))(window.location.href).toString());this.stats.shortcut||(this.recordStat("shortcut",0),this.recordStat("shortcut_with_shift",!1));var a=this.stats;for(var c in this.avgStats){var d=this.avgStats[c];a[c]=d[0]/d[1]}d={candidate_results:this.buildListTypeaheadRecords(),timestamp:b("FacebarTimerUtils").getTimestamp(),input_query:this.userText,remote_query_match:this._isQueryMatch};this._unsupportedGrammarInfo&&Object.assign(d,this._unsupportedGrammarInfo);this.recordAppendStat("suggestions_at_end_of_session",d);this.nullStateCandidates&&this.recordAppendStat("suggestions_at_nullstate_session",{candidate_results:this.nullStateCandidates});this.singleStateCandidates&&this.recordAppendStat("suggestions_at_singlestate_session",{candidate_results:this.singleStateCandidates});this.recordAppendStat("query_times",this.queryTimes);this.backendQueries.length>0&&(this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow)),this.recordStat("backend_queries",this.backendQueries));if(b("FacebarGlobalOptions").taSessionLoggingSample){var e=[];this.results.forEach(function(a){e.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",e)}b("FacebarGlobalOptions").graphSearchV2?this.recordStat("experience_type","gsv2"):this.recordStat("experience_type","facebar");for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};a.prototype.getDataToSubmit=function(){return this._dataToSubmit()};a.prototype.reset=function(){return this._reset()};a.prototype.submit=function(){this._sessionDisabled||g.submit.call(this),this.view.inform("feedback"),this._reset()};Object.assign(a.prototype,{_sessionEnded:!0,_extraRecorder:[],_banzaiRoute:"facebar"});e.exports=a}),null);
__d("FacebarTypeaheadDebugPane.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.renderDebugText=function(a){return b("React").createElement("div",{key:a},a)};a.prototype.render=function(){return b("React").createElement("div",{className:"fsm pam"},this.props.result.debug.map(this.renderDebugText))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadDiffText.react",["cx","React","TextWithEmoticons.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.renderDiff=function(a,c){return b("React").createElement("span",{className:"diffNode _5td3",key:c},b("React").createElement(b("TextWithEmoticons.react"),{text:a}))};a.prototype.renderParts=function(){var a=this.props.prefix,c=this.props.text;if(a==null)return[this.renderDiff(c,0)];var d=c.toLowerCase().indexOf(a.toLowerCase());a=a.trim();d===0&&(c=c.slice(a.length));c=c.split(/\b/).map(this.renderDiff);d===0&&c.unshift(b("React").createElement(b("TextWithEmoticons.react"),{key:"prefix",text:a}));return c};a.prototype.render=function(){return b("React").createElement("span",this.props,this.renderParts())};a.generatePrefixes=function(a,b){var c=[],d=void 0,e=void 0;for(var f=0,g=b.length;f<g;f++){e=b[f].getText();d=a.slice(0,Math.min(a.length,e.length));if(d==="")return c;e.toLowerCase().indexOf(d.toLowerCase())===0?(c.push(d),a=a.slice(d.length)):c.push("")}return c};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadHighlightedText.react",["BrowseFacebarHighlighter","React","TextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.renderHighlight=function(a,c){if((c+1)%3===0)return b("React").createElement("span",{className:"highlightNode",key:c},b("React").createElement(b("TextWithEmoticons.react"),{text:a}));else return b("React").createElement(b("TextWithEmoticons.react"),{text:a})};a.prototype.renderParts=function(){var a=this.props.text,c=this.props.tokens;if(c!=null&&a!==""){c=b("BrowseFacebarHighlighter").createRegex(c);c=a.split(c);return c.map(this.renderHighlight)}else return b("React").createElement(b("TextWithEmoticons.react"),{text:a})};a.prototype.render=function(){return b("React").createElement("span",this.props,this.renderParts())};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("TimelineFilterOptions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL:"all",REVIEW:"review",TAG_REVIEW:"tagreview",FACE_ALERTS:"photoreview",POSTS_AND_APPS:"postsandapps",LOCATION:"location",PHOTOS:"photos",TAGGED_PHOTOS:"taggedphotos",OWN_PHOTOS:"ownphotos",OWN_VIDEOS:"ownvideos",LIKES:"likes",LIKED_INTERESTS:"likedinterests",LIKED_POSTS:"likedposts",FOLLOWERS:"followers",ARCHIVED_STORIES:"archivedstories",GROUPS:"groups",GROUP_MEMBERSHIP:"groupmembership",GROUP_POSTS:"groupposts",GROUP_SEARCH:"groupsearch",YOUR_EVENTS:"yourevents",INVITED_EVENTS:"invitedevents",EVENT_RSVPS:"eventrsvps",HIDDEN:"hidden",SPAM:"spam",ALL_APPS:"apps",SEARCH:"search",VIDEO_SEARCH:"videosearch",VIDEO_WATCH:"videowatch",ASSISTANT_HISTORY:"assistanthistory",ADS:"ads",SECURITYLOGIN:"securitylogin",ACTIVE_SESSIONS:"activesessions",LOGINS_LOGOUTS:"loginslogouts",RECOGNIZED_DEVICES:"recognizeddevices",YOUR_PLACES:"yourplaces",YOUR_APPS:"yourapps",FRIENDS:"friends",REMOVED_FRIENDS:"removedfriends",RECEIVED_FRIEND_REQUESTS:"receivedfriendrequests",SENT_FRIEND_REQUESTS:"sentfriendrequests",NETWORK_INFORMATION:"networkinformation",NETWORKS:"networks",BANDWIDTH_INFORMATION:"bandwidthinformation",ROUNDTRIP_TIME:"roundtriptime",RESPONSE:"response",CLUSTER:"cluster",APP:"app",STORIES:"stories",COLLECTION_ITEM:"citem",FITNESS:"fitness",OG_VIDEO:"ogvideo",SAVED_FOR_LATER:"saved",NOW:"now"})}),null);
__d("FacebarTypeaheadItem.react",["cx","Badge.react","DOM","DOMContainer.react","FacebarGlobalOptions","FacebarJSConstants","FacebarTypeaheadDebugPane.react","FacebarTypeaheadDiffText.react","FacebarTypeaheadHighlightedText.react","Image.react","React","TimelineFilterOptions","TypeaheadCanvasConfig","URI","WorkModeConfig","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a){a=a.getTypePart(0);return a?"fragment"+a.charAt(0).toUpperCase()+a.substr(1):"fragment"}c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderHighlightedFragment=function(a,c){return b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{className:i(a),key:c,text:a.getText(),tokens:this.props.highlight})}.bind(this),c}a.prototype.renderDiffedFragment=function(a,c,d){return b("React").createElement(b("FacebarTypeaheadDiffText.react"),{className:i(a),key:d,prefix:c,text:a.getText()})};a.prototype.renderText=function(){__p&&__p();var a=this,c=this.props.result,d=c.isLocal,e=c.displayStructure!=null?c.displayStructure:c.structure,f=e.toArray(),g=this.props.prefix;if(b("FacebarGlobalOptions").graphSearchV2&&!c.isSeeMore&&g!=null&&g.trim()!==""){e=function(){var c=b("FacebarTypeaheadDiffText.react").generatePrefixes(g,f);d&&(c=[]);return{v:f.map(function(a,b){c[b]||(c[b]="");return this.renderDiffedFragment(a,c[b],b)}.bind(a))}}();if(typeof e==="object")return e.v}else return f.map(this.renderHighlightedFragment)};a.prototype.renderBadge=function(){__p&&__p();if(this.props.result.photo&&this.props.showSecondaryIcon&&!this.props.result.isTrending)return b("React").createElement("span",{className:"_34my"});if(this.props.result.category&&this.props.result.category.toString().toLowerCase()===b("TypeaheadCanvasConfig").category_games.toLowerCase()&&b("TypeaheadCanvasConfig").in_games_v1)return b("React").createElement(b("Badge.react"),{type:"game_blue",size:"medium"});else if(this.props.result.is_verified)return b("React").createElement(b("Badge.react"),{type:"verified",size:"medium"});else if(this.props.result.is_work_bot)return b("React").createElement(b("Badge.react"),{type:"bot",size:"medium"});else if((this.props.result.is_non_coworker||this.props.result.is_multi_company_group)&&!b("WorkModeConfig").is_in_solo_community)return b("React").createElement(b("Badge.react"),{type:"work_non_coworker"});else if(this.props.result.pages_verified_badge===1)return b("React").createElement(b("Badge.react"),{type:"page_gray_check",size:"medium"});else if(this.props.result.is_interest_community)return b("React").createElement(b("Badge.react"),{type:"interest_community",size:"medium"});return null};a.prototype.renderIcon=function(){var a=this.props.result,c=a.icon_class;if(c)return b("React").createElement("span",{className:"_k83"},b("React").createElement("span",{className:c}));else if(a.photo)return b("React").createElement(b("Image.react"),{className:"_20h",alt:"",src:a.photo});return null};a.prototype.renderSecondaryIcon=function(){var a=this.props.result;if(a.photo&&this.props.showSecondaryIcon)return b("React").createElement("div",{className:"_20h"},b("React").createElement(b("Image.react"),{alt:"",src:a.photo}));else if(!a.isRecent&&a.isInjectedSuggestion)return b("React").createElement("span",{className:"_3kxl"});return null};a.prototype.renderUnseenPosts=function(){if(this.props.recentSearchItem&&this.props.result.unseen_posts){var a=b("React").createElement(b("DOMContainer.react"),null,b("DOM").create("span",{className:""}," \xb7 ")),c=b("React").createElement(b("DOMContainer.react"),null,b("DOM").create("span",{className:""},this.props.result.unseen_posts.markup));return b("React").createElement("span",{className:"_2tb-"},a,c)}return null};a.prototype.renderLabel=function(){var a=" \xb7 ",c=this.props.result;c="_53ad"+(this.props.valign&&this.props.token&&this.props.token.props&&this.props.token.props.text.length>0?" _55y-":"")+(!c.category&&!c.subtext?" _2vzo":"")+(!c.category&&!!c.subtext||c.category&&c.category.toString().indexOf(a)<0&&!c.subtext?" _2vzp":"")+(c.category&&!!c.subtext||c.category&&c.category.toString().indexOf(a)>0?" _2vzq":"");a=this.renderUnseenPosts();c=b("React").createElement("span",{className:c},this.renderText(),this.props.hideBadge?null:this.renderBadge(),a,this.props.token);a="_7gk"+(this.props.message?" _5byz":"");return b("React").createElement("span",{className:a},c,this.props.message)};a.prototype.renderMain=function(){var a=b("React").createElement("a",{className:"_6i1",href:this.props.result.uri},b("React").createElement("span",null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon()));this.props.result.isAsync&&(a=b("React").createElement("a",{className:"_6i1",href:"#",ajaxify:this.props.result.asyncURI,rel:"async"},b("React").createElement("span",null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon())));return b("React").createElement("span",{className:"_205",rel:"ignore"},this.renderActivityLogXButton(),a)};a.prototype.renderActivityLogXButton=function(){if(this.props.result.keywordBootstrapType!==b("FacebarJSConstants").keywordBootstrapTypes.recent)return null;var a=new(b("URI"))("/me/allactivity");a.setQueryData({privacy_source:"activity_log",log_filter:b("TimelineFilterOptions").SEARCH});return b("React").createElement(b("XUICloseButton.react"),{size:"medium",className:"_2d9t",href:a})};a.prototype.renderDebug=function(){return this.props.result.debug?b("React").createElement(b("FacebarTypeaheadDebugPane.react"),{result:this.props.result}):null};a.prototype.render=function(){var a="_202 _5bl2 _6_k"+(b("FacebarGlobalOptions").graphSearchV2?" _1et7":"")+(b("FacebarGlobalOptions").renderKeywordSnippets?" _28vg":"")+(this.props.result.isCelebrity?" _5g-n":"")+(this.props.result.isSeeMore?" _qbs":"")+(this.props.result.isInjectedSuggestion?" _3kxm":"")+(this.props.result.isTrending||this.props.result.isHappeningNow?" _5g-o":"")+(this.props.result.isRecent?" _jsd":"")+(this.props.result.isLocal&&!b("FacebarGlobalOptions").useBlueLocalIcon?" _1821":"")+(this.props.result.isLocal&&b("FacebarGlobalOptions").useBlueLocalIcon?" _xui":"")+(this.props.result.isFootball?" _1822":"")+(this.props.result.isHashtag?" _4z1b":"")+(this.props.result.isPhotos?" _4z1c":"")+(this.props.result.isVideos?" _4z1d":"")+(this.props.result.isInvalidated?" _44vm":"");return b("React").createElement("li",{className:b("joinClasses")(a,this.props.className),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,role:"row"},b("React").createElement("div",{role:"gridcell"},this.renderMain(),this.renderDebug()))};a.defaultProps={valign:!0};e.exports=a}),null);
__d("FacebarTypeaheadToken.react",["cx","FacebarTypeaheadHighlightedText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=" \xb7 ";h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.text.map(function(a){return String(a)});this.props.limit&&a.splice(this.props.limit);a.forEach(function(b,c){(c!==0||this.props.leadingMiddot)&&(a[c]=i+b)}.bind(this));var c=a.shift(),d=void 0;c!=null&&(d=b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{className:this.props.mainClass,tokens:this.props.highlight,text:c}));c=void 0;a.length>0&&(c=b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{tokens:this.props.highlight,className:"_53ab",text:a.join("")}));var e=this.props.innerClass||"_53aa";return b("React").createElement("span",{className:"_53a9"},b("React").createElement("span",{className:e},d,c))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadTokenText",["FbtResultBase","HTML","getElementText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="\xb7";function h(a){if(a instanceof b("FbtResultBase"))return a.toString();else if(typeof a==="object")return b("getElementText")(b("HTML")(a).getRootNode());else return String(a)}function i(a){return h(a).split(g).map(function(a){return a.trim()})}function j(a){var b={};return a.filter(function(a){var c=String(a),d=!b[c];b[c]=!0;return a!=null&&a!==""&&d})}a={textForEntity:function(a,b){b=a.category||b[a.type]||"";var c=a.subtext||"";a=a.boldedSubtext||"";b=i(b).concat(i(a)).concat(i(c));return j(b)},text:function(a){return j(i(a))}};e.exports=a}),null);
__d("FacebarTypeaheadEntityItem.react",["cx","FacebarGlobalOptions","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","FacebarTypeaheadTokenText","Image.react","React","TypeaheadFacepileX.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.renderToken=function(){return b("React").createElement(b("FacebarTypeaheadToken.react"),{highlight:this.getHighlightTokens(),text:b("FacebarTypeaheadTokenText").textForEntity(this.props.result,{}),category:this.props.result.category})};a.prototype.renderIcon=function(){if(this.props.result.isNullState){var a=this.props.result.icon_class?b("React").createElement("span",{className:this.props.result.icon_class}):b("React").createElement(b("Image.react"),{className:"_20h",src:this.props.result.photo});return b("React").createElement("span",{className:b("FacebarGlobalOptions").renderKeywordSnippets?"":"_k83"},a)}if(this.props.result.size>1&&this.props.result.photos)return b("React").createElement(b("TypeaheadFacepileX.react"),{className:"_51l_",photos:this.props.result.photos,size:this.props.result.size});else if(this.props.result.photo)return b("React").createElement(b("Image.react"),{className:"_20h",alt:"",src:this.props.result.photo});return null};a.prototype.getHighlightTokens=function(){if(this.props.result.original_query==null)return null;var a=this.props.result.original_query.toString().trim(),b=a.split(" ");b=b.length>1?[a].concat(b):[a];return b.filter(function(a){return a!==""})};a.prototype.render=function(){var a=this.props.className;this.props.result.isNullState&&(a=b("joinClasses")(this.props.className,b("FacebarGlobalOptions").renderKeywordSnippets?"":"_207"));a=babelHelpers["extends"]({},this.props,{className:a,icon:this.renderIcon(),token:this.renderToken(),highlight:this.getHighlightTokens(),valign:!0});return b("React").createElement(b("FacebarTypeaheadItem.react"),a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadGrammarItem.react",["cx","fbt","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","FacebarTypeaheadTokenText","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j={user:h._("Person")};i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.renderToken=function(){__p&&__p();var a=this.props.result.decoration,c=this.props.result.ambiguity,d=c&&c.text;a=a&&a.entity||c&&c.entity;if(this.props.result.isRecent){c=h._("Recent search");return b("React").createElement(b("FacebarTypeaheadToken.react"),{text:b("FacebarTypeaheadTokenText").text(c),innerClass:"_53ab"})}else if(d)return b("React").createElement(b("FacebarTypeaheadToken.react"),{text:b("FacebarTypeaheadTokenText").text(d)});else if(a)return b("React").createElement(b("FacebarTypeaheadToken.react"),{text:b("FacebarTypeaheadTokenText").textForEntity(a,j),limit:2,leadingMiddot:!0});return null};a.prototype.getClassName=function(){var a=this.props.result;if(a.isPeopleAndPagesSuggestion)return"_2enu";return a.tags&&a.tags.displayedSeeMore?"_10gs":"_207"};a.prototype.render=function(){var a=this.renderToken(),c=!1;a!=null&&(c=!a.props.leadingMiddot);return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,this.getClassName()),valign:c,token:a}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadKeywordItem.react",["cx","fbt","CurrentUser","FacebarGlobalOptions","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","FacebarTypeaheadTokenText","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a="";b("CurrentUser").isWorkUser()?a=[h._("Search Workplace")]:a=[h._("Search Facebook")];this.props.result.isTrending?a.push(h._("Trending")):this.props.result.type=="related"&&(a=[h._("Related search")]);var c=void 0;b("FacebarGlobalOptions").renderKeywordSnippets&&(c=b("FacebarTypeaheadTokenText").textForEntity(this.props.result,{}),c!=null&&c.length&&(a=c));c=b("FacebarGlobalOptions").renderKeywordSnippets&&c!=null&&(c.length>1||this.props.result.boldedSubtext!=null);var d=this.props.result.isSeeMore;d=d?null:b("React").createElement(b("FacebarTypeaheadToken.react"),{text:a,mainClass:(c?"_4jt7":"")+(c&&this.props.result.isSpecialIntent&&!this.props.result.isLocal?" _21z1":"")+(c&&this.props.result.isLocal&&!b("FacebarGlobalOptions").useBlueLocalIcon?" _2xfl":"")+(c&&this.props.result.isLocal&&b("FacebarGlobalOptions").useBlueLocalIcon?" _2t_t":"")+(c&&this.props.result.isPhotos?" _21z2":"")+(c&&this.props.result.isVideos?" _21z4":"")+(c&&this.props.result.isSingleState&&this.props.result.exactMatchKeyword&&!this.props.result.isLocal?" _21z5":""),innerClass:"_53ab"});return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,(b("FacebarGlobalOptions").renderKeywordSnippets?"":"_207")+" _5d77"),token:d,prefix:this.props.result.query_string.toLowerCase(),showSecondaryIcon:b("FacebarGlobalOptions").showKeywordSuggestionPhotos}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadNodeItem.react",["DOM","React","ReactDOM","isElementNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props.result.node;return b("React").createElement("li",this.props,b("isElementNode")(a)?null:a)};a.prototype.attachNode=function(){var a=b("ReactDOM").findDOMNode(this);if(a==null)return;var c=this.props.result.node;b("isElementNode")(c)&&b("DOM").setContent(a,c)};a.prototype.componentDidMount=function(){this.attachNode()};a.prototype.componentDidUpdate=function(){this.attachNode()};a.prototype.shouldComponentUpdate=function(a){return this.props.result.node!==a.result.node};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadRecentItem.react",["cx","FacebarGlobalOptions","FacebarTypeaheadItem.react","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,b("FacebarGlobalOptions").renderKeywordSnippets?"":"_207"),icon:this.renderIcon(),recentSearchItem:!0}))};a.prototype.renderIcon=function(){var a=this.props.result;if(!b("FacebarGlobalOptions").allowGrammar)return b("React").createElement(b("Image.react"),{className:"_20h",src:a.photo});var c=a.icon_class?b("React").createElement("span",{className:a.icon_class}):b("React").createElement(b("Image.react"),{className:"_20h",src:a.photo});return b("React").createElement("span",{className:!b("FacebarGlobalOptions").renderKeywordSnippets||a.icon_class&&b("FacebarGlobalOptions").renderKeywordSnippets?"_k83":""},c)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("SearchSuggestionsHighlighter",["React","escapeRegex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();a=b("escapeRegex")(a);a=new RegExp("( "+a.split(/\s+/).join("| ")+")","g");var d=" "+c,e=[],f=0,g=void 0;while((g=a.exec(d))!=null){var h=d.substring(f,g.index);f===0&&(h=h.trimLeft());e.push(b("React").createElement("strong",{key:c+"-"+g.index},h));h=g[0];g.index===0&&(h=h.trimLeft());e.push(h);f=g.index+g[0].length}e.push(b("React").createElement("strong",{key:c+"-"+d.length},d.substring(f,d.length)));return e}e.exports={highlight:a}}),null);
__d("FacebarTypeaheadSimpleItem.react",["ix","cx","FacebarGlobalOptions","FacebarJSConstants","FBLogger","Image.react","Locale","React","RoundImage.react","SearchSuggestionsHighlighter","fbglyph","joinClasses","killswitch","mayHaveConnectedCharacters"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;function j(a){__p&&__p();a=a.result;var c=a.displayStructure!=null?a.displayStructure:a.structure;c=c!=null?c.toString():"";a.keywordType!==b("FacebarJSConstants").keywordTypes.escape&&!a.isNullState&&(c=c.toLowerCase());var d=a.query_string?a.query_string.toLowerCase():null;if(!b("killswitch")("SEARCH_WWW_DISABLE_TYPEAHEAD_HIGHLIGHTING")&&!b("mayHaveConnectedCharacters")(c)&&d!=null&&!a.isSeeMore)try{c=b("SearchSuggestionsHighlighter").highlight(d,c)}catch(a){b("FBLogger")("search").catching(a).mustfix("Error highlighting search suggestion (%s) for query (%s)",c,d)}return b("Locale").isRTL()?b("React").createElement("div",{className:"_19bk"},c,"\u200e"):b("React").createElement("div",{className:"_19bk"},c)}function k(a){a=a.result;if(!a.isNullState||!b("FacebarGlobalOptions").logSERPClickAsRecentSearch)return null;var c="_19bl",d=void 0;a.photo!=null&&(d=b("React").createElement(b("RoundImage.react"),{className:b("joinClasses")(c,"_19bm"),src:a.photo,width:"24",height:"24"}));d==null&&(d=b("React").createElement(b("Image.react"),{className:c,src:g("126434"),width:"16",height:"16"}));return d!=null?b("React").createElement("div",{className:"_19bp"},d):null}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("li",{className:"_202 _19bq"+(this.props.result.isSeeMore?" _19br":""),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,role:"row"},b("React").createElement("div",{role:"gridcell"},b("React").createElement("a",{href:this.props.result.uri,className:"_19bs"},this.props.isNullState?null:b("React").createElement(k,{result:this.props.result}),b("React").createElement(j,{result:this.props.result}))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadTrendingItem.react",["cx","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.result.articleTitle||"";a=b("React").createElement(b("FacebarTypeaheadToken.react"),{text:[a],innerClass:"_53ab",leadingMiddot:!0});return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_207"),token:a,valign:!1}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FacebarTypeaheadList.react",["csx","cx","fbt","invariant","CSS","FacebarGlobalOptions","FacebarJSConstants","FacebarTypeaheadEntityItem.react","FacebarTypeaheadGrammarItem.react","FacebarTypeaheadKeywordItem.react","FacebarTypeaheadNodeItem.react","FacebarTypeaheadRecentItem.react","FacebarTypeaheadSimpleItem.react","FacebarTypeaheadTrendingItem.react","LoadingIndicator.react","React","StaticContainer.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l={grammar:b("FacebarTypeaheadGrammarItem.react"),trending:b("FacebarTypeaheadTrendingItem.react"),related:b("FacebarTypeaheadKeywordItem.react")};l[b("FacebarJSConstants").browseTypes.keyword]=b("FacebarTypeaheadKeywordItem.react");l[b("FacebarJSConstants").keywordType]=b("FacebarTypeaheadKeywordItem.react");c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.handleMouseLeave=function(){b("FacebarGlobalOptions").facebarTypeaheadMouseoutHighlight&&this.props.onClearHighlight()}.bind(this),c}a.prototype.getItemComponentConstructor=function(a){if(b("FacebarGlobalOptions").hasKeywordOnlyTypeahead&&!b("FacebarGlobalOptions").workplaceHybridTypeahead)return b("FacebarTypeaheadSimpleItem.react");if(a.node)return b("FacebarTypeaheadNodeItem.react");if(a.isRecent)return b("FacebarTypeaheadRecentItem.react");if(a.results_set_type===b("FacebarJSConstants").browseTypes.keyword)return b("FacebarTypeaheadKeywordItem.react");return a.type!=null&&l[a.type]?l[a.type]:b("FacebarTypeaheadEntityItem.react")};a.prototype.renderItem=function(a){var c=this.getItemComponentConstructor(a),d=void 0;a.type===b("FacebarJSConstants").keywordType?d=a.query_string+a.semantic+a.boldedSubtext+a.subtext+a.fromCache+(a.isSeeMore?"see_more":"")+(a.keywordBootstrapType?a.keywordBootstrapType:"")+(a.uid!=null?a.uid:"")+a.isInvalidated:(d=a.semantic||a.uid||a.tuid,d+=a.isNullState+a.category+a.subtext,d+=a.query_string);b("FacebarGlobalOptions").dymOnEchoOnly&&(a.query_string!==a.text?a.uri.addQueryData({em:"1"}):a.uri.removeQueryData("em"));b("FacebarGlobalOptions").noDymOnSingleState&&(a.isSingleState&&a.uri.addQueryData({em:"1"}));b("FacebarGlobalOptions").noDymOnNullState&&(a.isNullState&&a.uri.addQueryData({em:"1"}));return b("React").createElement(b("StaticContainer.react"),{key:d},b("React").createElement(c,{result:a,onClick:function(event){return this.handleClick(event,a)}.bind(this),onMouseEnter:function(){return this.handleMouseEnter(a)}.bind(this)}))};a.prototype.renderFooter=function(){var a="_3su"+(this.props.loading?"":" hidden_elem");return b("React").createElement("li",{className:a},b("React").createElement("div",{className:"_21f"},i._("Finding results"),b("React").createElement(b("LoadingIndicator.react"),{size:"medium",color:"white"})))};a.prototype.hasValidRecentSearches=function(){return!b("FacebarGlobalOptions").hasRecentSearchNullState||!this.props.results?!1:this.props.results.some(function(a){return a.isRecent})};a.prototype.render=function(){var a=this.props.results,c=[];a&&a.forEach(function(a){c.push(this.renderItem(a))},this);return b("React").createElement("div",null,b("React").createElement("ul",{id:"facebar_typeahead_view_list",className:"_21c"+(this.props.isKeywordList?" _2yob":""),"data-click":"Search",onMouseLeave:this.handleMouseLeave},c,this.renderFooter()))};a.prototype.handleClick=function(event,a){event.target instanceof HTMLElement||j(0);if(b("CSS").matchesSelector(event.target,"._2d9t"))return;!event.nativeEvent.isMiddleClick()&&!event.nativeEvent.getModifiers().any&&(this.props.onSelect(a),event.preventDefault())};a.prototype.handleMouseEnter=function(a){this.props.onHighlight(a)};a.prototype.componentDidUpdate=function(a){this.props.onRender()};a.prototype.shouldComponentUpdate=function(a){return this.props.loading!==a.loading||this.props.results!==a.results};e.exports=a}),null);
__d("FacebarTypeaheadView",["csx","cx","fbt","Arbiter","ContextualLayer","ContextualLayerUpdateOnScroll","CSS","DOM","FacebarGlobalOptions","FacebarJSConstants","FacebarStructuredText","FacebarTypeaheadList.react","Parent","React","ReactDOM","ScriptPath","Style","TypeaheadView","WorkWebDriverConstants","performanceNow"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k="unimplemented";c=babelHelpers.inherits(a,b("TypeaheadView"));j=c&&c.prototype;function a(a,b){j.constructor.call(this,a,b),this.handleClearHighlight=function(){this.highlight(-1,!1)}.bind(this),this.handleHighlight=function(a){this.highlight(this.getIndexOf(a,this.results),!1)}.bind(this),this.handleSelect=function(a){this.handleHighlight(a),this.select(!0)}.bind(this),this.handleRender=function(){this.items=this.getItems()}.bind(this),this.element=a,this.sid="",this.index=-1,this.warningShown=!1,this.autoSelect=!1,this.flipCount=0,this.loading=!1,this.events=["highlight","render","filter","show"]}a.prototype.init=function(){this.initializeElements()};a.prototype.initGSV2Elements=function(){__p&&__p();var a=this.element;this.contentKeyword=b("DOM").find(a,"._f7s");this.contentEntity=b("DOM").find(a,"._2pda");this.contentRecent=b("DOM").find(a,"._mn8");this.contentSuggestion=b("DOM").find(a,"._2pl-");this.contentSeeMore=b("DOM").find(a,"._3-xd");this.keywordResultsContainer=b("DOM").create("div");this.entityResultsContainer=b("DOM").create("div");this.recentSearchContainer=b("DOM").create("div");this.seeMoreContainer=b("DOM").create("div");this.results=[];this.keywordResults=[];this.entityResults=[]};a.prototype.initGSV2Construct=function(){__p&&__p();this.currentKeywordContainer=this.contentKeyword;this.currentEntityContainer=this.contentEntity;this.contentKeyword.appendChild(this.keywordResultsContainer);this.contentEntity.appendChild(this.entityResultsContainer);this.contentRecent.appendChild(this.recentSearchContainer);this.contentSeeMore.appendChild(this.seeMoreContainer);if(this.isNullState()){b("FacebarGlobalOptions").hasRecentOnTopNullState?(this.resultsContainer.appendChild(this.contentRecent),this.resultsContainer.appendChild(this.contentKeyword),this.resultsContainer.appendChild(this.contentEntity)):(this.resultsContainer.appendChild(this.contentKeyword),this.resultsContainer.appendChild(this.contentRecent),this.resultsContainer.appendChild(this.contentEntity));return}this.entityTop?(this.resultsContainer.appendChild(this.contentEntity),this.resultsContainer.appendChild(this.contentKeyword)):(this.resultsContainer.appendChild(this.contentKeyword),this.resultsContainer.appendChild(this.contentEntity));this.isNullState()||this.resultsContainer.appendChild(this.contentSeeMore)};a.prototype.initializeElements=function(){var a=this.element;this.isGSV2=b("FacebarGlobalOptions").graphSearchV2;this.dynamicRank=this.isGSV2;this.fixedBlendingOrder=b("FacebarGlobalOptions").blendingOrderKeywordFirst||b("FacebarGlobalOptions").blendingOrderEntityFirst;this.entityTop=b("FacebarGlobalOptions").blendingOrderEntityFirst&&!b("FacebarGlobalOptions").renderKeywordsFirst;this.content=b("DOM").find(a,"._21r");this.warningNode=b("DOM").find(a,"._553e");this.resultsContainer=b("DOM").create("div");this.isGSV2&&this.initGSV2Elements()};a.prototype.initializeList=function(){this.renderTypeaheadList(),this.content.appendChild(this.resultsContainer),this.isGSV2&&this.initGSV2Construct()};a.prototype.initializeLayer=function(){this.layer=new(b("ContextualLayer"))({context:b("Parent").bySelector(this.causalElement,"._585-"),position:"below",causalElement:this.causalElement,shouldSetARIAProperties:!1,"data-testid":b("WorkWebDriverConstants").SEARCH_TYPEAHEAD_VIEW},this.element).enableBehavior(b("ContextualLayerUpdateOnScroll"));var a=this.layer.getRoot();a.setAttribute("role","grid");a=this.layer.getContentRoot();this.root=b("DOM").find(a,"._50c9");b("CSS").addClass(a,"_5tlx");this.isGSV2&&b("CSS").addClass(a,"_5xzd");this.wrapper=a};a.prototype.setInputElement=function(a){this.setAccessibilityControlElement(a),this.causalElement=a,this.initializeLayer(),this.initializeList()};a.prototype.setAutoSelect=function(a){this.autoSelect=a,this.index===-1&&a&&this.first()};a.prototype.getIndexOf=function(a,b){for(var c=0;c<b.length;c++)if(a.semantic===b[c].semantic&&a.isSeeMore===b[c].isSeeMore&&a.text===b[c].text)return c;return-1};a.prototype.show=function(a){__p&&__p();if(!this.visible){this.inform("beforeShow",this.layer);b("Style").set(this.wrapper,"minWidth",a+"px");a=j.show.call(this);this.first();this.layer.show();this.layer.updatePosition();this.inform("show");b("Arbiter").inform("layer_shown",{type:"FacebarTypeahead"});return a}};a.prototype.hide=function(){this.visible&&(this.layer.hide(),j.hide.call(this),this.inform("hide"),b("Arbiter").inform("layer_hidden",{type:"FacebarTypeahead"}),this.flipCount=0);return this};a.prototype.select=function(a){var c=this.results&&this.results[this.index];if(!c){this.inform("quickSelect");return}c=this.inform("beforeSelect",{index:this.index,selected:c});c!==!1&&(b("ScriptPath").setClickPointInfo({click:"Search"}),j.select.call(this,a))};a.prototype.doesResultBelongToEntitySection=function(a){if(b("FacebarGlobalOptions").hasKeywordOnlyTypeahead||b("FacebarGlobalOptions").workplaceHybridTypeahead)return!0;switch(a.type){case b("FacebarJSConstants").keywordType:return!!a.isRecent;case b("FacebarJSConstants").grammarType:return a.tags&&a.tags.displayedSeeMore;default:return!0}};a.prototype.processGSV2Results=function(a){this.keywordResults=[];this.entityResults=[];var b=[],c=[],d=[],e=a.some(function(a){return a.isSingleState});a.forEach(function(a){this.doesResultBelongToEntitySection(a)?this.entityResults.push(a):e?a.alternateSemantic?c.push(a):a.exactMatchKeyword?d.push(a):b.push(a):this.keywordResults.push(a)}.bind(this));e&&(this.keywordResults=d.concat(c.concat(b)));return this.entityTop?this.entityResults.concat(this.keywordResults):this.keywordResults.concat(this.entityResults)};a.prototype.reGenerateContainer=function(a){var c=b("DOM").create("div");if(this.isNullState()){b("FacebarGlobalOptions").hasRecentOnTopNullState?(c.appendChild(this.contentRecent),c.appendChild(this.currentKeywordContainer),c.appendChild(this.currentEntityContainer)):(c.appendChild(this.currentKeywordContainer),c.appendChild(this.contentRecent),c.appendChild(this.currentEntityContainer));return c}this.entityTop?(c.appendChild(this.currentEntityContainer),c.appendChild(this.currentKeywordContainer)):(c.appendChild(this.currentKeywordContainer),c.appendChild(this.currentEntityContainer));!this.isNullState()&&!a&&c.appendChild(this.contentSeeMore);return c};a.prototype.buildResultsNoRegeneration=function(a,c){__p&&__p();if(this.dynamicRank&&a.length>0&&!this.fixedBlendingOrder&&!b("FacebarGlobalOptions").renderKeywordsFirst&&this.flipCount<2){var d=a[0].type!==b("FacebarJSConstants").keywordType;b("FacebarGlobalOptions").hasFlipOnce&&this.value.toString()&&this.entityTop!=d&&this.flipCount++;this.entityTop=d}var e=String(this.value);a.forEach(function(a){a.query_string=e});this.results=a;if(this.isGSV2){b("FacebarGlobalOptions").disableKeywords&&(a=a.filter(function(a){return a.semantic!=null&&a.semantic.match(/^[0-9]+$/)!=null}));this.results=this.processGSV2Results(a);if(this.seeMoreResult){d=this.results.indexOf(this.seeMoreResult);d>-1&&this.results.splice(d,1);this.seeMoreResult=null}!this.isNullState()&&!c&&(this.seeMoreResult=this.inform("seeMore",{value:e,results:this.results}),this.seeMoreResult&&(this.results.push(this.seeMoreResult),this.inform("afterSeeMore",{results:this.results})))}a=b("performanceNow")();this.renderTypeaheadList({results:this.results,loading:this.loading});this.inform("logPerformanceTiming",{field:"build_results_set_props_duration",value:b("performanceNow")()-a})};a.prototype.buildResults=function(a){var b=a.some(function(a){return a.isSingleState});this.buildResultsNoRegeneration(a,b);this.dynamicRank&&(this.resultsContainer=this.reGenerateContainer(b));return this.resultsContainer};a.prototype.getGSV2Items=function(){return j.getItems.call(this).filter(function(a){return!b("CSS").matchesSelector(a,"._3su")})};a.prototype.getItems=function(){return this.isGSV2?this.getGSV2Items():j.getItems.call(this).slice(0,-1)};a.prototype.render=function(a,c,d,e){this.inform("filter",{results:c,value:a});var f=!a||a instanceof b("FacebarStructuredText")&&a.isEmptyOrWhitespace();b("CSS").conditionClass(this.wrapper,"_5qz2",!c.length&&f);var g=c[0];e&&!f?this.isGSV2||this.showWarning(i._("There are no results for '{query}'",[i._param("query",a.toString())])):g&&g.results_set_type===k?g.error_info.suppress||this.showWarning(g.error_info.errorMessage||i._("This search isn't currently supported.")):this.hideWarning();this.inform("removeUnimplementedGrammar")!==!1&&(c=c.filter(function(a){return a.results_set_type!==k}.bind(this)));j.render.call(this,a,c,d)};a.prototype.reset=function(){this.index=-1;this.items=[];this.results=[];this.value="";this.buildResults([]);this.inform("reset");return this};a.prototype.resetIndex=function(){this.index=-1};a.prototype.showWarning=function(a){b("CSS").show(this.warningNode),b("DOM").setContent(this.warningNode,a),this.warningShown=!0,this.highlight(-1,!1)};a.prototype.hideWarning=function(){b("CSS").hide(this.warningNode),this.warningShown=!1,this.highlight(this.index,!1)};a.prototype.setLoading=function(a){this.loading!=a&&(this.loading=a,this.renderTypeaheadList({results:this.results,loading:a}))};a.prototype.first=function(){this.index=this.autoSelect?0:-1,this.highlight(this.index)};a.prototype.prev=function(){this.isGSV2?(this.index<0||this.index===0&&this.autoSelect)&&(this.index=this.items.length):this.index<=0&&(this.index=this.items.length),this.ignoreMouseover=!0,j.prev.call(this)};a.prototype.next=function(){this.isGSV2&&this.autoSelect&&this.index>=this.items.length-1&&(this.index=-1),!this.isGSV2&&this.index+1>=this.items.length&&(this.index=-1),this.ignoreMouseover=!0,j.next.call(this)};a.prototype.highlight=function(a,b){b=b!==!1&&this.index!=a;if(!b||this.inform("beforeHighlight")!==!1){var c=this.warningShown||!this.autoSelect?-1:0;j.highlight.call(this,Math.max(c,a),b)}};a.prototype.isNullState=function(){return!String(this.value).trim()};a.prototype.updateCurrentKeywordContainer=function(){var a=this.currentKeywordContainer;this.isNullState()?this.currentKeywordContainer=this.contentSuggestion:this.currentKeywordContainer=this.contentKeyword;a&&a!==this.currentKeywordContainer&&(b("CSS").hide(a),a.removeChild(this.keywordResultsContainer),this.currentKeywordContainer.appendChild(this.keywordResultsContainer))};a.prototype.updateCurrentEntityContainer=function(){var a=this.currentEntityContainer,c=!String(this.value).trim();c&&this.entityResults?this.currentEntityContainer=this.contentEntity:this.currentEntityContainer=this.contentEntity;a&&a!=this.currentEntityContainer&&(b("CSS").hide(a),a.removeChild(this.entityResultsContainer),this.currentEntityContainer.appendChild(this.entityResultsContainer))};a.prototype.hasValidRecentSearches=function(){return!b("FacebarGlobalOptions").hasRecentSearchNullState||!this.keywordResults?!1:this.keywordResults.some(function(a){return a.isRecent})};a.prototype.copyProps=function(a){return babelHelpers["extends"]({accessibilityElement:this.accessibilityElement,onClearHighlight:this.handleClearHighlight,onHighlight:this.handleHighlight,onRender:this.handleRender,onSelect:this.handleSelect},a)};a.prototype.renderList=function(a,c){b("ReactDOM").render(b("React").createElement(b("FacebarTypeaheadList.react"),this.copyProps(a)),c)};a.prototype.renderGSV2TypeaheadList=function(a){__p&&__p();var c=this.copyProps(Object.assign({},a,{isKeywordList:!0})),d=this.copyProps(a);a=this.copyProps(Object.assign({},a,{isKeywordList:!0}));c.results=this.isNullState()?this.keywordResults.filter(function(a){return!a.isRecent}):this.keywordResults;a.results=this.isNullState()?[]:this.results.filter(function(a){return a.isSeeMore});d.results=this.entityResults.filter(function(a){return!a.isRecent});a.results.length>0||this.isNullState()?(c.loading=!1,d.loading=!1):this.entityTop||d.results.length===0?d.loading=!1:c.loading=!1;var e=!!d.results.length,f=!!c.results.length;this.renderList(c,this.keywordResultsContainer);this.renderList(d,this.entityResultsContainer);c=!1;this.isNullState()&&(d.results=this.entityResults.filter(function(a){return!!a.isRecent}),this.renderList(d,this.recentSearchContainer),c=!!d.results.length);this.updateCurrentKeywordContainer();this.updateCurrentEntityContainer();this.renderList(a,this.seeMoreContainer);b("CSS").conditionShow(this.currentKeywordContainer,f);b("CSS").conditionShow(this.contentRecent,c);b("CSS").conditionShow(this.currentEntityContainer,e);b("CSS").conditionShow(this.contentSeeMore,this.seeMoreResult!=null&&!this.isNullState())};a.prototype.renderTypeaheadList=function(a){a=a||{},this.isGSV2?this.renderGSV2TypeaheadList(a):this.renderList(a,this.resultsContainer)};e.exports=a}),null);
__d("XWarmUserRequestArgsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/browse/warm/requestargs/",{query:{type:"String"},csid:{type:"String"}})}),null);
__d("FacebarTypeaheadBrowsePreload",["AsyncRequest","XWarmUserRequestArgsController","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._core=a.core,this._typeahead=a}a.prototype.enable=function(){this._core.subscribe("execute",this.preloadOnNavigate.bind(this))};a.prototype.preloadOnNavigate=function(a,c){if(c.type==="keyword"){a=b("XWarmUserRequestArgsController").getURIBuilder().setString("query",String(c.text));c.csid&&a.setString("csid",String(c.csid));new(b("AsyncRequest"))().setURI(a.getURI()).setAllowCrossPageTransition(!0).send()}};a.prototype.disable=function(){b("emptyFunction")()};e.exports=a}),null);
__d("FacebarTypeaheadInjectedSuggestion",["csx","cx","fbt","Arbiter","DOM"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=3,k=0,l;function a(a){this.core=a.getCore(),this.$1=this.core.view}a.prototype.enable=function(){b("Arbiter").subscribe("FacebarTypeahead.injectedSuggestion",function(){return this.addSuggestionTextToSearchBox()}.bind(this)),b("Arbiter").subscribe("FacebarTypeahead.removeInjectedSuggestion",function(){return this.removeSuggestionTextToSearchBox()}.bind(this)),b("Arbiter").subscribe("FacebarTypeahead.showSuggestionBadge",function(){return this.showSuggestionBadge(!0)}.bind(this)),b("Arbiter").subscribe("FacebarTypeahead.hideSuggestionBadge",function(){return this.showSuggestionBadge(!1)}.bind(this))};a.prototype.disable=function(){this.$2.unsubscribe()};a.prototype.showSuggestionBadge=function(a){var c=b("DOM").scry(this.core.getElement(),"._5861")[0];if(c){c=c.getElementsByClassName("injectedSearchSuggestion")[0];if(!c)return;a?c.style.visibility="visible":c.style.visibility="hidden"}};a.prototype.removeSuggestionTextToSearchBox=function(){__p&&__p();if(!k)return;--k;if(!k){var a=b("DOM").scry(this.core.getElement(),"._5861")[0],c=a.getElementsByClassName("injectedSearchSuggestion")[0];a.removeChild(c)}else if(l){a=i._({"suggestion":"{suggestionCount} new suggestion","suggestions":"{suggestionCount} new suggestions"},[i._param("suggestionCount",k),i._enum(k===1?"suggestion":"suggestions",{suggestion:"suggestion",suggestions:"suggestions"})]);l.innerText=a}};a.prototype.addSuggestionTextToSearchBox=function(){__p&&__p();if(k)l&&k<j&&(l.innerText=k+1+" new suggestions");else{var a=b("DOM").scry(this.core.getElement(),"._5861")[0];if(a){l=document.createElement("DIV");var c=document.createTextNode("1 new suggestion");l.style.cssFloat="right";l.appendChild(c);c=document.createElement("DIV");c.className="_586j injectedSearchSuggestion";c.appendChild(l);a.appendChild(c)}}k+=1};e.exports=a}),null);
__d("FacebarTypeaheadNavigation",["Arbiter","FacebarNavigation","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._core=a.core,this._preserveQuery=!1,this._typeahead=a}a.prototype.enable=function(){b("FacebarNavigation").registerBehavior(this),this._core.subscribe("execute",this.executedUserQuery.bind(this))};a.prototype.executedUserQuery=function(a,b){this._preserveQuery=!0};a.prototype.pageTransition=function(){!this._preserveQuery?(this._core.close(),this._core.reset()):this._preserveQuery=!1};a.prototype.setPageQuery=function(a){a=this._core.setPageQuery(a),this._typeahead.inform("navigation",a,b("Arbiter").BEHAVIOR_PERSISTENT)};Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("FacebarTypeaheadPrefixLengthOrderedCache",["Arbiter","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._typeahead=a}a.prototype.enable=function(){this._typeahead.data.inform("setSortFunction",function(a){return function(b,c){if((b.keyword_type==="local"||b.keyword_type==="local_category")&&(c.keyword_type==="local"||c.keyword_type==="local_category"))return 0;if(b.cache_id_length!==c.cache_id_length)return b.cache_id_length-c.cache_id_length;var d=this.getCost(b,a)-this.getCost(c,a);return d!==0?d:(b.semantic||"").localeCompare(c.semantic||"")}.bind(this)}.bind(this),b("Arbiter").BEHAVIOR_STATE)};a.prototype.getCost=function(a,b){return a.cost||0};Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("FacebarTypeaheadQuickSelect",["FacebarStructuredText","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/search/web/direct_search.php";function a(a){this._core=a.getCore(),this._view=a.getView(),this._input=this._core.input,this._beforeSelectListener=null,this._quickSelectListener=null}a.prototype.enable=function(){this._beforeSelectListener=this._view.subscribe("beforeSelect",this._quickSelect.bind(this)),this._quickSelectListener=this._view.subscribe("quickSelect",this._quickSelect.bind(this))};a.prototype._quickSelect=function(a,c){__p&&__p();if(c&&c.selected)return!0;a=this._input.getValue().toArray();c=new(b("FacebarStructuredText"))(a);a=c.toString();if(!a)return!0;c=new(b("URI"))(g).addQueryData("q",a);a={input_query:a,type:"quickselect",text:a,position:0,with_mouse:0,semantic:"quickselect("+c.toString()+")",extra_uri_params:{source:"quickselect",sid:this._core.getSessionID()},uri:c};this._core.inform("quickSelectRedirect",a);this._core.executeQuery(a);return!1};a.prototype.disable=function(){this._beforeSelectListener&&this._view.unsubscribe(this._beforeSelectListener),this._quickSelectListener&&this._view.unsubscribe(this._quickSelectListener)};e.exports=a}),null);
__d("FacebarTypeaheadRecorderBasic",["FacebarTypeaheadRecorder"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._typeahead=a}a.prototype.enable=function(){var a=this._typeahead;this._recorder=new(b("FacebarTypeaheadRecorder"))(a)};a.prototype.disable=function(){this._typeahead.unsubscribe(this._subscription),this._recorder=null,this._subscription=null};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("FacebarTypeaheadSeeMore",["cx","fbt","FacebarGlobalOptions","FacebarGSv2Echo","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){this.$1=a.getCore(),this.$2=this.$1.view}a.prototype.enable=function(){this.$3=this.$2.subscribe("seeMore",this.$4.bind(this))};a.prototype.disable=function(){this.$3.unsubscribe()};a.prototype.$4=function(a,c){a=c.value.toString().trim();a=b("FacebarGSv2Echo").normalizeValue(a);c=b("FacebarKeywordSearchUtils").makeFacebarEntry(a);var d=void 0;b("FacebarGlobalOptions").hasKeywordOnlyTypeahead?d=h._("See all results for {query}",[h._param("query",a)]):d=h._("See all results for \"{query}\"",[h._param("query",a)]);return babelHelpers["extends"]({},c,{query_string:a,icon_class:"_5b1w",isSeeMore:!0,structure:b("FacebarStructuredText").fromString(a),displayStructure:b("FacebarStructuredText").fromString(String(d)),uri:c.uri,tags:{},isSingleState:this.$1.data.getSingleState(),keywordType:b("FacebarJSConstants").keywordTypes.escape,keywordSource:b("FacebarJSConstants").keywordTypes.escape})};e.exports=a}),null);
__d("FacebarTypeaheadSelectAll",["requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._core=a.getCore(),this._listener=null}a.prototype.enable=function(){var a=this._core.input;this._listener=this._core.subscribe("focus",function(c,d){c=d&&d.catchup;c||b("requestAnimationFrame")(function(){a.selectInput()})})};a.prototype.disable=function(){this._listener&&this._core.unsubscribe(this._listener)};e.exports=a}),null);
__d("FacebarTypeaheadShortcut",["fbt","KeyboardShortcuts","translateKey"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this._input=a.core.input,this._view=a.view,this._listener=null}a.prototype.enable=function(){this._registerListener()};a.prototype.disable=function(){};a.prototype._registerListener=function(){this._listener&&this._listener.remove(),this._listener=b("KeyboardShortcuts").register("SLASH",this._selectInput.bind(this),{filter:function(a,b){return!a.getModifiers().shift},persistOnTransition:!0,shortcutInfo:{displayKeys:[b("translateKey")("/")],description:g._("Search")}})};a.prototype._selectInput=function(){this._view.setAutoSelect(!0),this._input.focus(),this._input.selectInput(),this._input.inform("shortcut",{shift:!1})};e.exports=a}),null);
__d("FacebarTypeaheadStickyFilters",["Arbiter","NavigationMessage","Run","SubscriptionsHandler","enumerate","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=5e3,i="/search/top";function a(a){this.core=a.getCore(),this.filters={},this.subscriptionsHandler=new(b("SubscriptionsHandler"))(),this.view=this.core.view}a.prototype.enable=function(){__p&&__p();this.subscriptionsHandler.addSubscriptions(b("Arbiter").subscribe("SearchLHCFilters.initStickyFilters",function(a,c){__p&&__p();for(var a=b("enumerate")(this.filters),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];g in c||(f.active=!1)}for(var g=b("enumerate")(c),f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}a=d;c=a[0];d=a[1];a={value:d,active:!0};this.filters[c]=a}}.bind(this)),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,function(event,a){this.resetFiltersIfNotSearching()}.bind(this)),this.view.subscribe("filter",this.handleFilter.bind(this)),this.core.subscribe("magSearch",this.handleSearch.bind(this)),this.view.subscribe("afterSeeMore",this.handleSeeMore.bind(this))),b("Run").onLeave(function(){this.resetFiltersIfNotSearching()}.bind(this))};a.prototype.disable=function(){this.teardown()};a.prototype.teardown=function(){this.subscriptionsHandler.release()};a.prototype.handleFilter=function(a,b){a=b.results.filter(function(a){return!a.isNullState&&!a.isTrending});this.updateResultData(a)};a.prototype.handleSearch=function(a,b){this.updateResultData([b])};a.prototype.handleSeeMore=function(a,b){a=b.results.filter(function(a){return a.isSeeMore});this.updateResultData(a)};a.prototype.resetFiltersIfNotSearching=function(){__p&&__p();if(g)return;g=!0;b("setTimeoutAcrossTransitions")(function(){__p&&__p();var a=window.location.pathname;if(a.indexOf(i)===-1)for(var a=b("enumerate")(this.filters),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e[1];e.active=!1}g=!1;b("Run").onLeave(function(){this.resetFiltersIfNotSearching()}.bind(this))}.bind(this),h)};a.prototype.updateResultData=function(a){__p&&__p();for(var c=0;c<a.length;c++){var d=a[c];if(d.type==="keyword"){var e=d.uri.getQueryData();for(var f=b("enumerate")(this.filters),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];i.active?e[j]=i.value:d.uri.removeQueryData(j)}}}};e.exports=a}),null);
__d("TypeaheadEarlyUserRequest",["AsyncRequest","FacebarGlobalOptions","XWarmUserRequestArgsController"],(function(a,b,c,d,e,f){"use strict";function a(a){this._core=a.getCore(),this._listener=null}a.prototype.enable=function(){this._listener=this._core.subscribe("focus",function(a,c){new(b("AsyncRequest"))().setURI(b("XWarmUserRequestArgsController").getURIBuilder().getURI()).send(),this.disable()}.bind(this))};a.prototype.disable=function(){this._listener&&this._core.unsubscribe(this._listener)};e.exports=a}),null);
__d("XSearchFacebarSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/facebar_survey/",{id:{type:"String",required:!0},query:{type:"String"},session_id:{type:"String",required:!0},on_session_start:{type:"Exists",defaultValue:!1},result_selected:{type:"Exists",defaultValue:!1}})}),null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.tryToSubmitSurvey=function(){this.searchBoxFocused&&(this.openSurvey(),this.resultSelected=!1,this.searchBoxFocused=!1)}.bind(this),this.core=a.getCore(),this.data=a.getData(),this.view=a.getView(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe("focus",function(){this.searchBoxFocused=!0,this.resultSelected=!1}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){this.query=b.value||""}.bind(this)),this.view.subscribe("select",function(){this.resultSelected=!0,this.tryToSubmitSurvey()}.bind(this)),this.core.subscribe("blur",this.tryToSubmitSurvey))};a.prototype.disable=function(){"use strict";this.subscriptionsHandler.release(),this.request&&this.request.abort()};a.prototype.openSurvey=function(){"use strict";__p&&__p();if(this.openedSurvey)return;this.openedSurvey=!0;var a=this.core.element;a==null&&(a=this.core.getElement());var c=this.normalizeValue(this.query);a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(a)).setString("query",c!=null?c:"").setString("session_id",this.data.queryData.sid).setExists("result_selected",this.resultSelected);this.request=new(b("AsyncRequest"))().setMethod("POST").setAllowCrossPageTransition(!0).setURI(a.getURI());this.request.send()};a.prototype.normalizeValue=function(a){"use strict";return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"").toLowerCase()};e.exports=a}),null);