if (self.CavalryLogger) { CavalryLogger.start_js(["Un4r1"]); }

__d("BrowserExtensionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAPIEndpoint=function(a){this.$1.api_endpoint=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setErrorCode=function(a){this.$1.error_code=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setSessionid=function(a){this.$1.sessionid=a;return this};a.prototype.setStartURL=function(a){this.$1.start_url=a;return this};a.prototype.setStringPageID=function(a){this.$1.string_page_id=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setWebsiteURL=function(a){this.$1.website_url=a;return this};c={api_endpoint:!0,appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,error_code:!0,error_message:!0,extra_client_data:!0,isemployee:!0,name:!0,sessionid:!0,start_url:!0,string_page_id:!0,thread_id:!0,website_url:!0};e.exports=a}),null);
__d("MNCommercePromotionReactShapes",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.arrayOf(a.shape({action_link:a.string,title:a.string}));d={CallToActions:c,RetailItem:a.shape({call_to_actions:c,id:a.string,metalines:a.shape({metaline_1:a.string,metaline_2:a.string,metaline_3:a.string}),name:a.string,url:a.string,source:a.string})};e.exports=d}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1570574486349284"};c.getQueryID=function(){"use strict";return"389945858066688"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation","PopupWindow","XMNCommerceCTAPostProcessController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.process=function(a){var c=arguments.length<=1||arguments[1]===undefined?null:arguments[1],d=b("PopupWindow").open("",500,1024),e=b("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",c).getURI();new(b("AsyncRequest"))().setURI(e).setMethod("POST").setHandler(function(a){return d.location=a.payload}).send()};a.prototype.postHandle=function(a,c){a=b("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation").getURI({cta_id:a,message_id:c});new(b("AsyncRequest"))().setURI(a).send()};function a(){}e.exports=new a()}),null);
__d("MNCommerceCallToActionGenericIntentHandler",["cx","fbt","Link.react","MNCommerceCTAProcessor","React","Tooltip","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(){this.fallbackOnClick=function(){},this.onClickHook=function(){},this.threadID=null}a.prototype.setFallbackOnClick=function(a){this.fallbackOnClick=a;return this};a.prototype.setThreadID=function(a){a&&(this.threadID=a);return this};a.prototype.setOnClickHook=function(a){this.onClickHook=a;return this};a.prototype.renderForWebLink=function(a,c){var d=a.onClick||this.fallbackOnClick,e=function(event){this.onClickHook(),d(event),b("MNCommerceCTAProcessor").postHandle(a.id,null)}.bind(this);return b("React").createElement(b("Link.react"),{className:c,href:a.onClick?null:a.action_link||a.action_url,key:a.title+a.id,onClick:e,target:"_blank"},a.translated_title||a.title||a.action_title)};a.prototype.renderForNativeLink=function(a,c){var d=h._("To use this feature, use the Messenger app.");return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")("_3cno",c),"data-tooltip-alignh":"center","data-tooltip-position":"above",key:a.title},b("Tooltip").propsFor(d)),a.translated_title||a.title||a.action_title)};e.exports=a}),null);
__d("BuyOnMessengerCallToActionIntentHandler",["Link.react","MNCommerceCallToActionGenericIntentHandler","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("MNCommerceCallToActionGenericIntentHandler"));g&&g.prototype;a.prototype.renderForWebLink=function(a,b){return this.$BuyOnMessengerCallToActionIntentHandler1(a,b)};a.prototype.renderForNativeLink=function(a,b){return this.$BuyOnMessengerCallToActionIntentHandler1(a,b)};a.prototype.$BuyOnMessengerCallToActionIntentHandler1=function(a,c){return b("React").createElement(b("Link.react"),{className:c,key:a.title+a.id,onClick:a.onClick},a.translated_title||a.title)};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("MMeCallToActionIntentHandler",["MNCommerceCallToActionGenericIntentHandler"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("MNCommerceCallToActionGenericIntentHandler"));g&&g.prototype;a.prototype.renderForNativeLink=function(a,b){return this.renderForWebLink(a,b)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceCallToActionAsyncIntentHandler",["AsyncRequest","Link.react","MNCommerceCallToActionGenericIntentHandler","React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("MNCommerceCallToActionGenericIntentHandler"));g&&g.prototype;a.prototype.renderForWebLink=function(a,b){"use strict";return this.$MNCommerceCallToActionAsyncIntentHandler1(a,b)};a.prototype.renderForNativeLink=function(a,b){"use strict";return this.$MNCommerceCallToActionAsyncIntentHandler1(a,b)};a.prototype.$MNCommerceCallToActionAsyncIntentHandler1=function(a,c){"use strict";var d=function(){new(b("AsyncRequest"))(a.action_link).send()};return b("React").createElement(b("Link.react"),{className:c,key:a.title+a.id,onClick:d},a.translated_title||a.title)};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerPlayGameCallToActionHelper",["URI","idx"],(function(a,b,c,d,e,f){__p&&__p();e.exports={parseMetadata:function(a){var b,c,d;b=(b=a)!=null?b.instantgame_gameid:b;if(!b)return null;c=(c=a)!=null?c.instantgame_payload:c;d=(d=a)!=null?d.instantgame_context_type:d;a=(a=a)!=null?a.instantgame_context_id:a;return{contextSourceID:a,contextType:d,gameID:b,payload:c}},parseActionLink:function(a){a=new(b("URI"))(a).getQueryData();if(!a)return null;var c=a.game_id;if(!c)return null;var d=a.payload,e=a.context_type;a=a.context_id;return{contextSourceID:a,contextType:e,gameID:c,payload:d}}}}),null);
__d("MessengerPlayGameCallToActionIntentHandler",["cx","invariant","InstantGameContextType","MercuryIDs","MessengerGamesPlayGameLink.react","MessengerPlayGameCallToActionHelper","MNCommerceCallToActionGenericIntentHandler","QuicksilverSources","React","idx","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("MNCommerceCallToActionGenericIntentHandler"));i&&i.prototype;a.prototype.renderForWebLink=function(a,b){"use strict";return this.$MessengerPlayGameCallToActionIntentHandler1(a,b)};a.prototype.renderForNativeLink=function(a,b){"use strict";return this.$MessengerPlayGameCallToActionIntentHandler1(a,b)};a.prototype.$MessengerPlayGameCallToActionIntentHandler1=function(a,c){__p&&__p();var d,e,f=this.threadID||"";d=(d=a)!=null?d.instantgame_metadata:d;e=(e=a)!=null?e.action_link:e;var g=null;d?g=b("MessengerPlayGameCallToActionHelper").parseMetadata(d):e&&(g=b("MessengerPlayGameCallToActionHelper").parseActionLink(e));if(!g)return b("React").createElement("div",null);d=g.gameID;d||h(0);e=g.contextSourceID;var i=g.contextType;i||(i=b("InstantGameContextType").THREAD,e=b("MercuryIDs").getThreadFBIDFromThreadID(f));return b("React").createElement(b("MessengerGamesPlayGameLink.react"),{className:b("joinClasses")(c,"_fy2"),contextSourceID:e,contextType:i,gameID:d,key:a.title+a.id,onClick:this.onClickHook,payload:g.payload||undefined,source:b("QuicksilverSources").MESSENGER_CALL_TO_ACTION,threadID:f,title:a.translated_title||a.title})};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceCallToActionHandlerMap",["BuyOnMessengerCallToActionIntentHandler","MessengerPlayGameCallToActionIntentHandler","MMeCallToActionIntentHandler","MNCommerceCallToActionAsyncIntentHandler","MNCommerceCallToActionGenericIntentHandler","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={"fb-messenger://payments/buy/mc?":b("BuyOnMessengerCallToActionIntentHandler"),"fb-messenger://business/commerce/":b("BuyOnMessengerCallToActionIntentHandler"),"fb-messenger://instant_games/play":b("MessengerPlayGameCallToActionIntentHandler"),"https://m.me/":b("MMeCallToActionIntentHandler")};function a(a){for(var c in g)if(a.startsWith(c)){var d=g[c];return new d()}return new(b("URI"))(a).getQueryData().async?new(b("MNCommerceCallToActionAsyncIntentHandler"))():new(b("MNCommerceCallToActionGenericIntentHandler"))()}e.exports={getHandler:a}}),null);
__d("BrowserExtensionsAskPermissionsChatTabDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","React","URI","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.rejectButtonTitle,onClick:function(){this.$1(!1)}.bind(this)}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.confirmButtonTitle,onClick:function(){this.$1(!0),b("BrowserExtensionsPermissionsHelper").grantPermissions(this.props.pageID,this.props.threadID,this.props.permissionToGrant,this.props.successCallback,this.props.errorCallback)}.bind(this),use:"confirm"})))};a.prototype.$1=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};function a(){h.apply(this,arguments)}a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,message:c.string.isRequired,profileImageUrl:c.string.isRequired,confirmButtonTitle:c.string.isRequired,rejectButtonTitle:c.string.isRequired,permissionToGrant:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsAskPermissionsMessengerDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","LayerFadeOnHide","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogs.bs","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={clickedConfirm:!1},this.$1=function(a){a||(this.state.clickedConfirm||this.props.successCallback({permissions:this.props.grantedPermissions}),b("MessengerDialogs.bs").removeDialog())}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$1,shown:!0},b("React").createElement(i,null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{label:this.props.rejectButtonTitle,onClick:function(){this.$2(!1)}.bind(this)}),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",label:this.props.confirmButtonTitle,onClick:function(){this.setState({clickedConfirm:!0},function(){this.$2(!0),b("MessengerDialogs.bs").removeDialog(),b("BrowserExtensionsPermissionsHelper").grantPermissions(this.props.pageID,this.props.threadID,this.props.permissionToGrant,this.props.successCallback,this.props.errorCallback)}.bind(this))}.bind(this),type:"primary"})))};a.prototype.$2=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,message:c.string.isRequired,profileImageUrl:c.string.isRequired,confirmButtonTitle:c.string.isRequired,rejectButtonTitle:c.string.isRequired,permissionToGrant:c.string.isRequired,grantedPermissions:c.arrayOf(c.string).isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsErrorHandler",["errorCode","errorDesc"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getExternalError:function(a){__p&&__p();switch(a){case 2018062:return{code:2018062,message:h._(function(a,b){return a._("The URL provided is not whitelisted for messenger extensions")},{})};case 2018067:return{code:2018067,message:h._(function(a,b){return a._("Pages using Messenger Extensions must use https and not include any port.")},{})};case 2018164:return{code:2018164,message:h._(function(a,b){return a._("Please pass in a valid app ID.")},{})};case 2018166:return{code:2018166,message:h._(function(a,b){return a._("Permission not valid to call the SDK API.")},{})};case 2018159:return{code:2018159,message:h._(function(a,b){return a._("Invalid payload were passed to the share flow.")},{})};case 2018160:return{code:2018160,message:h._(function(a,b){return a._("The provided open graph template is not supported.")},{})};case 2018161:return{code:2018161,message:h._(function(a,b){return a._("Open graph URL in the preview content does not match the one in share content.")},{})};case 2018053:return{code:2018053,message:h._(function(a,b){return a._("Element button title cannot be empty.")},{})};case 2018125:return{code:2018125,message:h._(function(a,b){return a._("Invalid URL button fields provided. Please check documentation for details.")},{})};case 2018041:return{code:2018041,message:h._(function(a,b){return a._("Web url cannot be empty for url type button")},{})};case 2018158:return{code:2018158,message:h._(function(a,b){return a._("There was a problem creating the share attachment. Please try again later.")},{})};case 2018142:return{code:2018142,message:h._(function(a,b){return a._("Beginshare parameters are not valid.")},{})};case 2018034:return{code:2018034,message:h._(function(a,b){return a._("Message cannot be empty, must provide valid attachment or text")},{})};case 2018167:return{code:2018167,message:h._(function(a,b){return a._("Another API operation is in progress.")},{})};case 2018012:return{code:2018012,message:h._(function(a,b){return a._("Unexpected internal error")},{})};case 2018162:return{code:2018162,message:h._(function(a,b){return a._("This feature is currently not available")},{})};case 2018154:default:return{code:2018154,message:h._(function(a,b){return a._("Messenger Extensions unexpected error.")},{})}}}};e.exports=a}),null);
__d("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1544630875548192"};c.getQueryID=function(){"use strict";return"611085139087610"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerPlatformPermissionWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1068951296538364"};c.getQueryID=function(){"use strict";return"1526731417350771"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsPermissionsHelper",["AsyncRequest","BrowserExtensionsAskPermissionsChatTabDialog.react","BrowserExtensionsAskPermissionsMessengerDialog.react","BrowserExtensionsErrorHandler","BrowserExtensionsTypedLogger","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformGrantPermissionsMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","React","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h,i,j,k,l){__p&&__p();b("MessengerEnvironment").messengerui?b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsAskPermissionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,grantedPermissions:j,successCallback:k,errorCallback:l})}):(function(){var m={width:400,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},n=b("React").createElement(b("BrowserExtensionsAskPermissionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,successCallback:k,errorCallback:l});m=new(b("DialogX"))(m,n);var o=!1;m.subscribe("confirm",function(){o=!0});m.subscribe("hide",function(){o||k({permissions:j})});m.show()})(),new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setName("browser_extensions_permission_dialog_shown").setWebsiteURL(a.toString()).setStartURL(a.toString()).setStringPageID(c).setThreadID(d).log()}a={askPermissions:function(a,c,d,e,f,h){__p&&__p();var i=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:c,thread_id:d},selected_permissions:[e]});new(b("AsyncRequest"))().setURI(i).setHandler(function(i){__p&&__p();var j,k;j=(j=i)!=null?(j=j.payload)!=null?(j=j.data)!=null?(j=j.messenger_platform_permission)!=null?(j=j.selected_permission_infos)!=null?j[0]:j:j:j:j:j;k=(k=i)!=null?(k=k.payload)!=null?(k=k.data)!=null?(k=k.messenger_platform_permission)!=null?k.granted_permission_infos:k:k:k:k;i=(i=i)!=null?(i=i.payload)!=null?(i=i.errors)!=null?i[0]:i:i:i;if(!k){i=i?i.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(i))}else{i=k.map(function(a){return a.permission_type});if(!j||j.is_granted)f({permissions:i});else{k=j.dialog_info;g(a,c,d,k.title,k.profile_image.uri,k.confirm_button_text,k.reject_button_text,e,i,f,h)}}}).send()},grantPermissions:function(a,c,d,e,f){__p&&__p();a=b("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation").getURI({page_id:a,thread_id:c,permissions:[d]});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_grant_permissions)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});e({permissions:c})}else{c=a?a.code:null;f(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}};e.exports=a}),null);
__d("MessengerPlatformBeginShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1467034453348931"};c.getQueryID=function(){"use strict";return"294980674291966"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsShareChatTabDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","immutable","MessengerComposeViewHeader.react","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerTextWithEntities.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUISpinner.react","emptyFunction","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="broadcast";d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isSending:!1,message:"",recipients:b("immutable").List()},this.$3=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$4=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$2=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$6=function(){__p&&__p();this.setState({isSending:!0});var a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:this.props.buttonUrl,button_title:this.props.buttonTitle,image_url:this.props.imageUrl,item_url:this.props.itemUrl,open_graph_url:this.props.openGraphUrl,preview_type:this.props.previewType,subtitle:this.props.subtitle,target_display:this.props.targetDisplay,title:this.props.title,attachment_id:this.props.attachmentID,facebook_media_url:this.props.facebookMediaUrl,media_type:this.props.mediaType},content_for_share:this.props.contentForShare,message_text:this.state.message,page_id:this.props.pageID,thread_ids:this.props.sharingType===j?a:this.props.threadID,trigger:this.props.sharingType===j?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){this.$1&&this.setState({isSending:!1});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;this.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else this.props.successCallback({is_sent:!0})}.bind(this)).send()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.props.sharingType===j?h._("Share"):h._("Send To Current Thread"),c=this.props.sharingType===j?this.state.recipients.size!==0:!0,d=this.props.sharingType===j?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,e=this.props.sharingType===j?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(a){return this.setState({message:a.target.value})}.bind(this),placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,f=this.state.isSending?b("React").createElement(b("XUISpinner.react"),{size:"large"}):null,g=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement("div",null,b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,a)),b("React").createElement(b("XUIDialogBody.react"),{className:"_189w"},d,e,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:g})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$5(this.props.title)),b("React").createElement("div",null,this.$5(this.props.subtitle)),b("React").createElement("div",null,this.$5(this.props.targetDisplay))))),b("React").createElement(b("XUIDialogFooter.react"),{leftContent:f},b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!c,label:h._("Send"),onClick:this.$6,use:"default"})))};a.prototype.$5=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};a.propTypes={buttonTitle:c.string,buttonUrl:c.string,contentForShare:c.string,imageUrl:c.string,itemUrl:c.string,openGraphUrl:c.string,facebookMediaUrl:c.string,facebookMediaPreviewUrl:c.string,attachmentID:c.string,mediaType:c.string,previewType:c.string,subtitle:c.string,targetDisplay:c.string,title:c.string,sharingType:c.string.isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsShareMessengerDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","immutable","LayerFadeOnHide","MessengerComposeViewHeader.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerSpinner.react","MessengerTextWithEntities.react","React","emptyFunction","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;var k="broadcast";d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={clickedSend:!1,isSending:!1,message:"",recipients:b("immutable").List()},this.$3=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$4=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$2=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$7=function(){__p&&__p();this.setState({clickedSend:!0,isSending:!0});var a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:this.props.buttonUrl,button_title:this.props.buttonTitle,image_url:this.props.imageUrl,item_url:this.props.itemUrl,open_graph_url:this.props.openGraphUrl,preview_type:this.props.previewType,subtitle:this.props.subtitle,target_display:this.props.targetDisplay,title:this.props.title,attachment_id:this.props.attachmentID,facebook_media_url:this.props.facebookMediaUrl,media_type:this.props.mediaType},content_for_share:this.props.contentForShare,message_text:this.state.message,page_id:this.props.pageID,thread_ids:this.props.sharingType===k?a:this.props.threadID,trigger:this.props.sharingType===k?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){this.$1&&this.setState({isSending:!1},function(){b("MessengerDialogs.bs").removeDialog()});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;this.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else this.props.successCallback({is_sent:!0})}.bind(this)).send()}.bind(this),this.$5=function(a){a||(this.state.clickedSend||this.props.successCallback({is_sent:!1}),b("MessengerDialogs.bs").removeDialog())}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.props.sharingType===k?h._("Share"):h._("Send To Current Thread"),c=this.props.sharingType===k?this.state.recipients.size!==0:!0,d=this.props.sharingType===k?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,e=this.props.sharingType===k?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(a){return this.setState({message:a.target.value})}.bind(this),placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,f=this.state.isSending?b("React").createElement(b("MessengerSpinner.react"),null):null,g=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$5,shown:!0,width:500},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,a)),b("React").createElement(j,{className:"_189w"},d,e,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:g})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$6(this.props.title)),b("React").createElement("div",null,this.$6(this.props.subtitle)),b("React").createElement("div",null,this.$6(this.props.targetDisplay))))),b("React").createElement(b("MessengerDialogFooter.react"),{leftContent:f},b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!c,label:h._("Send"),onClick:this.$7,type:"primary"})))};a.prototype.$6=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};a.propTypes={buttonTitle:c.string,buttonUrl:c.string,contentForShare:c.string,imageUrl:c.string,itemUrl:c.string,openGraphUrl:c.string,facebookMediaUrl:c.string,facebookMediaPreviewUrl:c.string,attachmentID:c.string,mediaType:c.string,previewType:c.string,subtitle:c.string,targetDisplay:c.string,title:c.string,sharingType:c.string.isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1480172682071484"};c.getQueryID=function(){"use strict";return"1145458142265315"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsBeginShareHelper",["AsyncRequest","BrowserExtensionsErrorHandler","BrowserExtensionsShareChatTabDialog.react","BrowserExtensionsShareMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery","React","WebGraphQL","XShareScrapeAttachmentAsyncController","idx","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="OPEN_GRAPH",h=150,i=150;function j(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b("MessengerEnvironment").messengerui?b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsShareMessengerDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t})}):(function(){var u={width:500,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},v=b("React").createElement(b("BrowserExtensionsShareChatTabDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t}),w=new(b("DialogX"))(u,v);w.subscribe("confirm",function(){w.hide()});w.subscribe("cancel",function(){s({is_sent:!1})});w.show()})()}a={beginShareFlow:function(a,c,d,e,f,k,l){__p&&__p();if(f.preview_type===g){var m=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(m).setData({image_height:h,image_width:i,uri:f.open_graph_url}).setHandler(function(b){var g,h;g=(g=b)!=null?(g=g.payload)!=null?(g=g.media)!=null?g.image:g:g:g;h=(h=b)!=null?(h=h.payload)!=null?h.title:h:h;b=(b=b)!=null?(b=b.payload)!=null?(b=b.target)!=null?(b=b.artists)!=null?b[0]:b:b:b:b;j(f.button_title,f.button_url,e,g,f.item_url,f.open_graph_url,null,null,null,null,f.preview_type,b,f.target_display,h,d,a,c,k,l)}).send()}else!f.image_url?b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery"))({params:{attachment_id:f.attachment_id,page_id:a,url:f.facebook_media_url,media_type:f.media_type}})),function(b){b=b.messenger_platform_media_attachment_preview_info;j(f.button_title,f.button_url,e,null,f.item_url,f.open_graph_url,f.facebook_media_url,b.media_attachment.image.uri,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)},function(a){a=(a=a)!=null?(a=a.errors)!=null?(a=a[0])!=null?a.code:a:a:a;l(b("BrowserExtensionsErrorHandler").getExternalError(a))}):j(f.button_title,f.button_url,e,f.image_url,f.item_url,f.open_graph_url,f.facebook_media_url,null,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)}};e.exports=a}),null);
__d("MessengerPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1350985785027565"};c.getQueryID=function(){"use strict";return"182243942324918"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("WorkChatPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1471152822996828"};c.getQueryID=function(){"use strict";return"172454613443187"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsDesktopController",["errorCode","AsyncRequest","BrowserExtensionsBeginShareHelper","BrowserExtensionsErrorHandler","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","CurrentUser","DOMEventListener","JSONRPC","MessengerPlatformGetContextMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","WorkChatPlatformGetContextMutationWebGraphQLMutation","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="MESSENGER_EXTENSIONS_RPC:";function i(a,c,d,e,f,g,h){__p&&__p();e=b("CurrentUser").isWorkUser()?b("WorkChatPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()}):b("MessengerPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()});new(b("AsyncRequest"))().setURI(e).setHandler(function(a){var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?c.messenger_platform_get_context:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c)g(c);else{c=a?a.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function j(a,c,d,e){__p&&__p();a=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:a,thread_id:c}});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_permission)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});d({permissions:c})}else{c=a?a.code:null;e(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function k(a,b,c){a(b)}function a(a,c,d,e,f,g){__p&&__p();var l=new(b("JSONRPC"))(function(b){var d=a instanceof HTMLIFrameElement?a.contentWindow:a;d.postMessage(h+b,c.getOrigin())});this.$1=b("DOMEventListener").add(window,"message",function(event){if(typeof event.data!=="string"||!event.data.startsWith(h))return;l.read(event.data.substring(h.length))},!1);function m(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint(a).setName("browser_extensions_native_bridge_called").setWebsiteURL(c.toString()).setStartURL(c.toString()).setStringPageID(d).setThreadID(e).log()}l.local.askPermission=function(a,f,g){if(b("CurrentUser").isWorkUser()){g(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}m("askPermission");b("BrowserExtensionsPermissionsHelper").askPermissions(c,d,e,a,f,g)};l.local.beginShareFlow=function(a,c,f,g,h){m("beginShareFlow"),b("BrowserExtensionsBeginShareHelper").beginShareFlow(d,e,a,c,f,g,h)};l.local.getContext=function(a,b,g){m("getContext"),i(c,d,e,f,a,b,g)};l.local.getGrantedPermissions=function(a,b){m("getGrantedPermissions"),j(d,e,a,b)};l.local.requestCloseBrowser=function(a,b){m("requestCloseBrowser"),k(g,a,b)}}a.prototype.getListener=function(){return this.$1};e.exports=a}),null);
__d("BrowserExtensionsDesktopCoordinator",["BrowserExtensionsDesktopController"],(function(a,b,c,d,e,f){"use strict";var g=void 0;a={setActiveBridge:function(a,c,d,e,f,h){g&&g.remove();a=new(b("BrowserExtensionsDesktopController"))(a,c,d,e,f,h);g=a.getListener()}};e.exports=a}),null);
__d("BrowserExtensionsIframe.react",["BrowserExtensionsDesktopCoordinator","BrowserExtensionsTypedLogger","ControlledRefererIFrame.react","React","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){this.refs.iframeRef&&(b("BrowserExtensionsDesktopCoordinator").setActiveBridge(this.refs.iframeRef,this.props.thirdPartyURI,this.props.pageID,this.props.threadID,this.props.userID,this.props.closeDialogHandler),new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_open").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log())};a.prototype.componentWillUnmount=function(){new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_closed").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};a.prototype.render=function(){var a=new(b("URI"))(window.location.href),c=this.props.thirdPartyURI;a={ref:"iframeRef",src:c.addQueryData("fb_iframe_origin",a.getOrigin()).toString(),name:b("isFacebookURI")(a)?"facebook_ref":"messenger_ref",style:{border:0,height:this.props.height,width:this.props.width}};return b("isFacebookURI")(c)?b("React").createElement("iframe",a):b("React").createElement(b("ControlledRefererIFrame.react"),a)};function a(){g.apply(this,arguments)}a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,userID:c.string.isRequired,height:c.number.isRequired,width:c.number.isRequired,closeDialogHandler:c.func.isRequired};e.exports=a}),null);
__d("MessengerPageInfoWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1340699622714874"};c.getQueryID=function(){"use strict";return"794225320759977"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsChatTabDialog.react",["cx","fbt","AsyncRequest","BrowserExtensionsIframe.react","Image.react","MessengerConstants","MessengerPageInfoWebGraphQLQuery","React","URI","XUICloseButton.react","XUIDialogBody.react","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);i=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={profilePicUrl:null,title:null},b}a.prototype.componentDidMount=function(){var a=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){var b;b=(b=a)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?(b=b.profile_picture)!=null?b.uri:b:b:b:b:b;a=(a=a)!=null?(a=a.payload)!=null?(a=a.data)!=null?(a=a.node)!=null?a.name:a:a:a:a;this.setState({profilePicUrl:b,title:a})}.bind(this)).send()};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_4-i0"},b("React").createElement("div",{className:"_5l-3 _3qur"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3qus"},b("React").createElement(b("XUICloseButton.react"),{className:"layerCancel _51-t",label:h._("Close")})))),b("React").createElement(b("XUIDialogBody.react"),{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.props.closeDialogHandler})))};a.defaultProps={height:c.HEIGHT,width:c.WIDTH};a.propTypes={thirdPartyURI:d.instanceOf(b("URI")).isRequired,pageID:d.string.isRequired,threadID:d.string.isRequired,userID:d.string.isRequired,height:d.number,width:d.number,closeDialogHandler:d.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsMessengerDialog.react",["cx","AsyncRequest","BrowserExtensionsIframe.react","Image.react","LayerFadeOnHide","MessengerConstants","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerPageInfoWebGraphQLQuery","React","URI","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;var i=b("MessengerDialogBodyReact.bs").jsComponent;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={profilePicUrl:null,title:null,shown:!0},this.$3=function(a){this.setState({shown:!1},a)}.bind(this),b}a.prototype.componentDidMount=function(){var a=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});this.$1=new(b("AsyncRequest"))().setURI(a).setHandler(function(a){var b;b=(b=a)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?(b=b.profile_picture)!=null?b.uri:b:b:b:b:b;a=(a=a)!=null?(a=a.payload)!=null?(a=a.data)!=null?(a=a.node)!=null?a.name:a:a:a:a;this.setState({profilePicUrl:b,title:a})}.bind(this));this.$1.send()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.abandon()};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$2,shown:this.state.shown,type:"default",width:this.props.width},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement("div",{className:"_5l-3 _3o_e"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",className:"_3o_k",label:"",type:"primary",use:"default"})))),b("React").createElement(i,{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.$3})))};a.prototype.$2=function(a){a||b("MessengerDialogs.bs").removeDialog()};a.defaultProps={height:c.HEIGHT,width:c.WIDTH};a.propTypes={thirdPartyURI:d.instanceOf(b("URI")).isRequired,pageID:d.string.isRequired,threadID:d.string.isRequired,userID:d.string.isRequired,height:d.number,width:d.number};e.exports=a}),null);
__d("BrowserExtensionsDialog",["BrowserExtensionsChatTabDialog.react","BrowserExtensionsMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerConstants","MessengerDialogs.bs","MessengerEnvironment","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS,h={show:function(a,c,d,e){b("MessengerEnvironment").messengerui?b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e})}):(function(){var f=void 0,i={width:g.WIDTH,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},j=b("React").createElement(b("BrowserExtensionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e,closeDialogHandler:function(a){return h.hideChatTabDialog(f,a)}});f=new(b("DialogX"))(i,j);f.show()})()},hideChatTabDialog:function(a,b){a&&(a.hide(),b())}};e.exports=h}),null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","FBPaymentsCreditCardForm_DEPRECATED.react","MessengerPaymentProductType","P2PAPI","P2PAPIUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={binError:"",isFormValid:!1,previousBINNumber:"",validateBINRequestID:""},this.handleValidation=function(a,c){var d=c[b("CreditCardFormParam").CARD_NUMBER];!this.props.editMode&&this.props.productType===b("MessengerPaymentProductType").P2P&&d&&this.validateBIN(d);this.setState({isFormValid:a});this.props.onValidation({isValid:a&&this.state.validateBINRequestID===""&&!this.state.binError,formData:c})}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.asyncRequestState;a=a?a[this.state.validateBINRequestID]:null;a&&(this.setState({validateBINRequestID:""}),a.error?this.handleValidateBINNumberError(a.error):this.handleValidateBINNumberSuccess())};a.prototype.handleValidateBINNumberSuccess=function(){this.props.onValidation({isValid:this.state.isFormValid}),this.setState({binError:""})};a.prototype.handleValidateBINNumberError=function(a){a=a.message;this.props.onValidation({isValid:!1});this.setState({binError:a})};a.prototype.validateBIN=function(a){var c=void 0,d=void 0;a=a.replace(/ /g,"");c=a.substr(0,6);c!==this.state.previousBINNumber&&c.length>=6?(d=b("P2PAPIUtils").genRequestID(),this.setState({validateBINRequestID:d}),this.props.onValidation({isValid:!1}),b("P2PAPI").validateBINNumber({binNumber:c,requestID:d})):c.length<6&&this.setState({binError:"",validateBINRequestID:""});this.setState({previousBINNumber:c})};a.prototype.render=function(){return b("React").createElement(b("FBPaymentsCreditCardForm_DEPRECATED.react"),babelHelpers["extends"]({},this.props,{autoTab:!0,allowCredit:this.props.productType===b("MessengerPaymentProductType").MESSENGER_COMMERCE,isBinErrorLoading:this.state.validateBINRequestID!=="",binError:this.state.binError,onValidation:this.handleValidation,postalRegex:this.props.postalRegex}))};a.defaultProps={asyncRequestState:{},productType:b("MessengerPaymentProductType").P2P};e.exports=a}),null);
__d("P2PEditCreditCardDialog.react",["cx","fbt","CreditCardFormParam","Link.react","MessengerEnvironment","P2PAPI","P2PAPIUtils","P2PButton.react","P2PCreditCard","P2PCreditCardForm.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLoadingMask.react","P2PText.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j="fbP2PEditCreditCardDialog_learnMoreSentenceID";c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={formData:{},isValid:!1,loading:!1,requestID:"",saveErrors:null},this.clearSaveErrors=function(){this.setState({saveErrors:null})}.bind(this),this.onSaveClick=function(a){a={};var c=b("P2PAPIUtils").genRequestID();a[b("CreditCardFormParam").CREDENTIAL_ID]=this.props.creditCard.getCredentialId();this.clearSaveErrors();this.setState({loading:!0,requestID:c});b("P2PAPI").updateCreditCard(babelHelpers["extends"]({requestID:c},a,this.state.formData))}.bind(this),this.handleOnSaveSuccess=function(a){this.props.onSuccess(a)}.bind(this),this.onCancelClick=function(a){this.props.onCancel()}.bind(this),this.handleOnSaveError=function(a){this.setState({loading:!1,saveErrors:a})}.bind(this),this.isSaveDisabled=function(){return!this.state.isValid||this.state.loading}.bind(this),this.isCancelDisabled=function(){return this.state.loading}.bind(this),this.handleValidation=function(a,b){this.setState({isValid:a,formData:b})}.bind(this),this.getPrefilledFormData=function(){var a={};a[b("CreditCardFormParam").CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();a[b("CreditCardFormParam").CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();a[b("CreditCardFormParam").ZIP]=this.props.creditCard.getZipCode();return a}.bind(this),this.handleErrorDialogOKClick=function(){this.clearSaveErrors()}.bind(this),this.onToggle=function(a){a||this.props.onCancel()}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.asyncRequestState?a.asyncRequestState[this.state.requestID]:null;a&&(this.setState({requestID:""}),a.error?this.handleOnSaveError(a.error):this.handleOnSaveSuccess(a))};a.prototype.render=function(){var a=void 0,c=this.props.text;c||(c=h._("Please update the expiration date for your card ending in {card numbers}.",[h._param("card numbers",this.props.creditCard.getCreditCardNumber())]));this.props.showCancelButton&&(a=b("React").createElement(b("P2PButton.react"),{use:"default",size:"medium",label:h._("Cancel"),disabled:this.isCancelDisabled(),onClick:this.onCancelClick}));return b("React").createElement(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,onToggle:this.onToggle,repositionOnUpdate:!0,shown:!0,width:this.props.width},b("React").createElement(b("P2PDialogTitle.react"),null,h._("Update Debit Card")),b("React").createElement(b("P2PDialogBody.react"),null,b("React").createElement(b("P2PText.react"),{className:"_3-96",type:"primary"},c),b("React").createElement(b("P2PCreditCardForm.react"),{onValidation:this.handleValidation,saveErrors:this.state.saveErrors,editMode:!0,prefilledFormData:this.getPrefilledFormData(),cscMaxLength:this.props.creditCard.getMaxCSCLength()}),b("React").createElement(b("P2PText.react"),{className:"_3-8y",id:j,type:"secondary"},h._("Your payment info is stored securely. {Learn more about p2p link}",[h._param("Learn more about p2p link",b("React").createElement(b("Link.react"),{"aria-describedby":j,href:b("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},h._("Learn more.")))]))),b("React").createElement(b("P2PDialogFooter.react"),null,a,b("React").createElement(b("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveDisabled(),onClick:this.onSaveClick})),b("React").createElement(b("P2PLoadingMask.react"),{visible:this.state.loading}))};a.propTypes={asyncRequestState:c.object.isRequired,creditCard:c.instanceOf(b("P2PCreditCard")).isRequired,onCancel:c.func.isRequired,onSuccess:c.func.isRequired,saveButtonText:c.node,showCancelButton:c.bool};a.defaultProps={saveButtonText:h._("Save"),showCancelButton:!0,width:b("MessengerEnvironment").messengerui?350:300};e.exports=a}),null);
__d("P2PPasswordProtectionNUXDialog.react",["cx","fbt","Link.react","MessengerEnvironment","P2PAPI","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PErrorDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPasswordProtectionParam","P2PPasswordProtectionStatusTypes","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={saveErrorObject:null,loading:!1},this.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SETTINGS},c))},this.onSaveClick=function(){this.setState({loading:!0,saveErrorObject:null}),this.setPasswordProtection(b("P2PPasswordProtectionStatusTypes").ENABLED),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX)}.bind(this),this.setPasswordProtection=function(a){var c={};c[b("P2PPasswordProtectionParam").STATUS]=a;b("P2PAPI").setPasswordProtectionSetting({formData:c,success:this.handleOnSaveSuccess,error:this.handleOnSaveError})}.bind(this),this.handleOnSaveSuccess=function(){this.setState({loading:!1}),this.props.onComplete()}.bind(this),this.handleOnSaveError=function(a){this.setState({loading:!1,saveErrorObject:a})}.bind(this),this.isSaveButtonDisabled=function(){return this.state.loading}.bind(this),this.isCancelButtonDisabled=function(){return this.state.loading}.bind(this),this.onCancelClick=function(){this.setState({loading:!0,saveErrorObject:null}),this.setPasswordProtection(b("P2PPasswordProtectionStatusTypes").DISABLED),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX)}.bind(this),this.handleErrorBackClick=function(){this.setState({saveErrorObject:null})}.bind(this),this.handleErrorOKClick=function(){this.setState({saveErrorObject:null}),this.props.onComplete()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX)};a.prototype.render=function(){return this.state.saveErrorObject?b("React").createElement(b("P2PErrorDialog.react"),{allowBack:!0,title:h._("Problem Saving"),onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.saveErrorObject}):b("React").createElement(b("P2PDialog.react"),{className:b("MessengerEnvironment").messengerui?"_-el":"",behaviors:{LayerFadeOnShow:!1},layerHideOnBlur:!1,shown:!0,width:this.props.width},b("React").createElement(b("P2PDialogTitle.react"),{showCloseButton:!1},h._("Use Password?")),b("React").createElement(b("P2PDialogBody.react"),null,b("React").createElement(b("P2PText.react"),{className:"_5sor",type:"primary"},h._("For additional security, you can enter your Facebook password to send money. You can always update this in {link}.",[h._param("link",b("React").createElement(b("Link.react"),{href:b("P2PLinkConstants").settingsWWWURI,target:"_blank"},h._("Settings")))]))),b("React").createElement(b("P2PDialogFooter.react"),null,b("React").createElement(b("P2PButton.react"),{className:"_5sov",disabled:this.isCancelButtonDisabled(),label:h._("Not Now"),onClick:this.onCancelClick,size:"medium",use:"default"}),b("React").createElement(b("P2PButton.react"),{className:"_5sox",disabled:this.isSaveButtonDisabled(),label:h._("Use Password"),onClick:this.onSaveClick,size:"medium",use:"confirm"})),b("React").createElement(b("P2PLoadingMask.react"),{visible:this.state.loading}))};a.propTypes={onComplete:c.func};a.defaultProps={onComplete:b("emptyFunction"),width:b("MessengerEnvironment").messengerui?320:300};e.exports=a}),null);
__d("P2PSuccessDialog.react",["fbt","ix","Image.react","LayerSlowlyFadeOnShow","MessengerEnvironment","P2PConfirmationDialog.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.getImage=function(){return b("React").createElement(b("Image.react"),{height:62,width:62,src:h("94361")})},c}a.prototype.render=function(){var a=this.getImage();return b("React").createElement(b("P2PConfirmationDialog.react"),{behaviors:babelHelpers["extends"]({LayerSlowlyFadeOnShow:b("LayerSlowlyFadeOnShow")},this.props.behaviors),allowBack:this.props.allowBack,buttonLabel:this.props.buttonLabel,buttonUse:this.props.buttonUse,centered:this.props.centered,image:a,onOKClick:this.props.onOKClick,onSecondaryClick:this.props.onSecondaryClick,onToggle:this.props.onToggle,showCloseButton:this.props.showCloseButton,showSecondaryButton:this.props.showSecondaryButton,secondaryButtonLabel:this.props.secondaryButtonLabel,secondaryButtonUse:this.props.secondaryButtonUse,title:this.props.title,width:this.props.width},this.props.children)};a.propTypes={allowBack:c.bool,buttonLabel:c.node,buttonUse:c.string,onOKClick:c.func,onSecondaryClick:c.func,onToggle:c.func,secondaryButtonLabel:c.node,secondaryButtonUse:c.string,showCloseButton:c.bool,showSecondaryButton:c.bool,title:c.node.isRequired,width:c.number};a.defaultProps={allowBack:!1,buttonLabel:g._("OK"),buttonUse:"default",onOKClick:b("emptyFunction"),showCloseButton:!1,width:b("MessengerEnvironment").messengerui?350:300};e.exports=a}),null);
__d("FBPaymentsSerializableCheckoutConfigurationParser",["FBPaymentsContentConfigurationParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={parse:function(a,b){a=JSON.parse(a);return this._parseCheckoutConfiguration(a.checkout_configuration,!!b)},_parseCheckoutConfiguration:function(a,c){c={version:a.version,paymentInfo:this._parsePaymentInfo(a.payment_info),contentConfiguration:b("FBPaymentsContentConfigurationParser").parse(a.version,a.content_configuration,c),orderStatusModel:this._parseOrderStatusModel(a.order_status_model)};return c},_parsePaymentInfo:function(a){a={paymentItemType:a.payment_item_type,receiverId:a.receiver_id,orderId:a.order_id,action:a.action,extraData:a.extra_data};return a},_parseOrderStatusModel:function(a){a={type:a.type};return a}};e.exports=a}),null);