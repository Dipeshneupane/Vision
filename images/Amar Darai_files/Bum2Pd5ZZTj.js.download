if (self.CavalryLogger) { CavalryLogger.start_js(["+uMpR"]); }

__d("PageIcebreakerEventLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WWW_CHAT_NULL_STATE:"www_chat_null_state",IOS_NULL_STATE_IN_THREAD:"ios_null_state_in_thread",IOS_NULL_STATE_NEW_LAYOUT:"ios_null_state_new_layout",ANDROID_WELCOME_PAGE:"android_welcome_page",ANDROID_CHAT_NULL_STATE:"android_chat_null_state",CLICK_TO_MESSENGER_ADS:"click_to_messenger_ads",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",PAGES__HOME_TAB__ICEBREAKERS_UNIT:"pages__home_tab__icebreakers_unit",ANDROID_MESSENGER:"android_messenger",IOS_MESSENGER:"ios_messenger"})}),null);
__d("MercuryChatTabPagesGreetingContainer.react",["cx","invariant","ix","CurrentUser","FantaAppStore","Grid.react","Image.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercurySourceType","MessagingTag","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","PageIcebreakerEventLocation","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React","StoreAndPropBasedStateMixin","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryMessageActions").get(),k=b("Grid.react").GridItem;a=b("React").PropTypes;var l=function(a){var c=b("FantaAppStore").getState().tabGroup.tabs.get(b("MercuryIDs").getThreadIDFromUserID(a.pageID)),d=[b("MessagingTag").ONE_CLICK_MESSAGE];c&&c.entryPoint&&c.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(c.entryPoint[0])!==-1&&d.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([c.entryPoint[0]]));c=function(){var c=new(b("MercuryMessageObject"))(b("CurrentUser").getID());j.send(c.constructUserGeneratedMessageObject(a.message,b("MercurySourceType").TITAN_WEB,a.threadID,null,null,d));b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,b("PageIcebreakerEventLocation").WWW_CHAT_NULL_STATE,["pages_messaging_www","PagesComms","OneClick"],{message:a.messageType,position:a.position})};return b("React").createElement("a",{className:"_2-8t",href:"#",onClick:c},a.message)};c=b("React").createClass({displayName:"MercuryChatTabPagesGreetingContainer",propTypes:{threadID:a.string.isRequired},mixins:[b("StoreAndPropBasedStateMixin")(b("MercuryMessages"),b("PagesMessagingMercuryChatTabStore"))],statics:{calculateState:function(a){var c=b("MercuryMessages").get().getCurrentlyLoadedMessages(a.threadID);if(c&&c.length>0)return{greetingMessage:null,shouldShowGreetingMessage:!1,shouldShowIcebreakers:!1,pageResponsiveness:null,connectionContext:null,pageOnlineMessage:null};c=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);return{shouldShowGreetingMessage:c.pagesGreetingShouldShow&&c.pagesGreetingContent&&c.pagesGreetingContent.length>0,shouldShowIcebreakers:c.icebreakers&&Object.keys(c.icebreakers).length>0,greetingMessage:c.pagesGreetingContent,pageResponsiveness:c.pageResponsiveness,connectionContext:c.connectionContext,pageOnlineMessage:c.pageOnlineMessage}}},getInitialState:function(){return{loggedButtonImpressions:[]}},componentDidMount:function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)},render:function(){var a=void 0;this.state.shouldShowIcebreakers&&(a=this._renderIcebreakers());return b("React").createElement("div",null,b("React").createElement(b("Grid.react"),{alignv:"top",className:"_5-5-",cols:2,spacing:"_253f"},this._renderTopRow(),this._renderSubRow()),a)},_renderIcebreakers:function(){var a=b("PagesMessagingMercuryChatTabStore").getStateByThread(this.props.threadID).icebreakers;a!==undefined&&a!==null||h(0);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);c!==undefined&&c!==null||h(0);a=a.map(function(a,d){var e=a.messageKey;this._maybeLogOneClickMessageImpression(c,e,d);return b("React").createElement(k,{key:e},b("React").createElement(l,{message:String(a.message),messageType:e,pageID:c,position:d,threadID:this.props.threadID}))}.bind(this));return b("React").createElement(b("Grid.react"),{alignh:"center",className:"_2-8-",cols:1},a)},_renderTopRow:function(){if(this.state.pageOnlineMessage)return this._renderOnlineMessage();return this.state.pageResponsiveness?this._renderPageResponsiveness():null},_renderSubRow:function(){return this.state.shouldShowGreetingMessage?[b("React").createElement(k,{className:"_2f2u",key:"messenger_greeting_icon"},b("React").createElement(b("Image.react"),{src:i("124738")})),b("React").createElement(k,{className:"_253g",key:"messenger_greeting_text"},this.state.greetingMessage)]:this._renderConnectionContext()},_renderOnlineMessage:function(){return[b("React").createElement(k,{className:"_2f2v",key:"online_indicator_icon"},b("React").createElement(b("Image.react"),{src:i("311943")})),b("React").createElement(k,{className:"_2f2w",key:"online_indicator_text"},this.state.pageOnlineMessage)]},_renderPageResponsiveness:function(){return[b("React").createElement(k,{key:"page_responsiveness_icon"},b("React").createElement(b("Image.react"),{src:i("124279")})),b("React").createElement(k,{className:"_2f2w",key:"page_responsiveness_text"},this.state.pageResponsiveness)]},_renderConnectionContext:function(){return!this.state.connectionContext?null:[b("React").createElement(k,{className:"_2f2u",key:"connection_context_icon"},b("React").createElement(b("Image.react"),{src:i("124577")})),b("React").createElement(k,{className:"_253g",key:"connection_context_text"},this.state.connectionContext)]},_maybeLogOneClickMessageImpression:function(a,c,d){var e=this.state.loggedButtonImpressions;if(e.indexOf(c)>=0)return;b("PagesLogger").log(a,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,b("PageIcebreakerEventLocation").WWW_CHAT_NULL_STATE,["pages_messaging_www","PagesComms","OneClick"],{position:d,message:c});e.push(c);this.setState({loggedButtonImpressions:e})}});e.exports=c}),null);